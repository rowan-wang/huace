(self.webpackChunkhuace_viewer=self.webpackChunkhuace_viewer||[]).push([[866],{72655:function(Jt,Zt,I){var b=I(19755),Ot=I(18698).default;(function(u){function At(i,e,t){if(!t[0]||Ot(t[0])=="object")return e.init.apply(i,t);if(e[t[0]])return e[t[0]].apply(i,Array.prototype.slice.call(t,1));throw rt(t[0]+" is not a method or property")}function W(i,e,t,a){return{css:{position:"absolute",top:i,left:e,overflow:a||"hidden",zIndex:t||"auto"}}}function It(i,e,t,a,r){var n=1-r,s=n*n*n,d=r*r*r;return _(Math.round(s*i.x+3*r*n*n*e.x+3*r*r*n*t.x+d*a.x),Math.round(s*i.y+3*r*n*n*e.y+3*r*r*n*t.y+d*a.y))}function _(i,e){return{x:i,y:e}}function pt(i,e,t){return N&&t?" translate3d("+i+"px,"+e+"px, 0px) ":" translate("+i+"px, "+e+"px) "}function D(i){return" rotate("+i+"deg) "}function G(i,e){return Object.prototype.hasOwnProperty.call(e,i)}function gt(){for(var i=["Moz","Webkit","Khtml","O","ms"],e=i.length,t="";e--;)i[e]+"Transform"in document.body.style&&(t="-"+i[e].toLowerCase()+"-");return t}function K(i,e,t,a,r){var n,s=[];if(nt=="-webkit-"){for(n=0;n<r;n++)s.push("color-stop("+a[n][0]+", "+a[n][1]+")");i.css({"background-image":"-webkit-gradient(linear, "+e.x+"% "+e.y+"%,"+t.x+"% "+t.y+"%, "+s.join(",")+" )"})}else{var e={x:e.x/100*i.width(),y:e.y/100*i.height()},t={x:t.x/100*i.width(),y:t.y/100*i.height()},v=t.x-e.x;n=t.y-e.y;var d=Math.atan2(n,v),z=d-Math.PI/2,z=Math.abs(i.width()*Math.sin(z))+Math.abs(i.height()*Math.cos(z)),v=Math.sqrt(n*n+v*v),t=_(t.x<e.x?i.width():0,t.y<e.y?i.height():0),y=Math.tan(d);for(n=-1/y,y=(n*t.x-t.y-y*e.x+e.y)/(n-y),t=n*y-n*t.x+t.y,e=Math.sqrt(Math.pow(y-e.x,2)+Math.pow(t-e.y,2)),n=0;n<r;n++)s.push(" "+a[n][1]+" "+100*(e+v*a[n][0])/z+"%");i.css({"background-image":nt+"linear-gradient("+-d+"rad,"+s.join(",")+")"})}}function w(i,e,t){return i=u.Event(i),e.trigger(i,t),i.isDefaultPrevented()?"prevented":i.isPropagationStopped()?"stopped":""}function rt(i){function e(t){this.name="TurnJsError",this.message=t}return e.prototype=Error(),e.prototype.constructor=e,new e(i)}function c(i){var e={top:0,left:0};do e.left+=i.offsetLeft,e.top+=i.offsetTop;while(i=i.offsetParent);return e}var N,Wt,nt="",St=Math.PI,Y=St/2,m="ontouchstart"in window,it=m?{down:"touchstart",move:"touchmove",up:"touchend",over:"touchstart",out:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup",over:"mouseover",out:"mouseout"},U={backward:["bl","tl"],forward:["br","tr"],all:"tl bl tr br l r".split(" ")},k=["single","double"],ft=["ltr","rtl"],vt={acceleration:!0,display:"double",duration:600,page:1,gradients:!0,turnCorners:"bl,br",when:null},Tt={cornerSize:100},l={init:function(s){N="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style;var t;Wt=(t=/AppleWebkit\/([0-9\.]+)/i.exec(navigator.userAgent))?534.3<parseFloat(t[1]):!0,nt=gt();var a;t=0;var r=this.data(),n=this.children(),s=u.extend({width:this.width(),height:this.height(),direction:this.attr("dir")||this.css("direction")||"ltr"},vt,s);if(r.opts=s,r.pageObjs={},r.pages={},r.pageWrap={},r.pageZoom={},r.pagePlace={},r.pageMv=[],r.zoom=1,r.totalPages=s.pages||0,r.eventHandlers={touchStart:u.proxy(l._touchStart,this),touchMove:u.proxy(l._touchMove,this),touchEnd:u.proxy(l._touchEnd,this),start:u.proxy(l._eventStart,this)},s.when)for(a in s.when)G(a,s.when)&&this.bind(a,s.when[a]);for(this.css({position:"relative",width:s.width,height:s.height}),this.turn("display",s.display),s.direction!==""&&this.turn("direction",s.direction),N&&!m&&s.acceleration&&this.transform(pt(0,0,!0)),a=0;a<n.length;a++)u(n[a]).attr("ignore")!="1"&&this.turn("addPage",n[a],++t);return u(this).bind(it.down,r.eventHandlers.touchStart).bind("end",l._eventEnd).bind("pressed",l._eventPressed).bind("released",l._eventReleased).bind("flip",l._flip),u(this).parent().bind("start",r.eventHandlers.start),u(document).bind(it.move,r.eventHandlers.touchMove).bind(it.up,r.eventHandlers.touchEnd),this.turn("page",s.page),r.done=!0,this},addPage:function(e,t){var a,r=!1,n=this.data(),s=n.totalPages+1;if(n.destroying)return!1;if((a=/\bp([0-9]+)\b/.exec(u(e).attr("class")))&&(t=parseInt(a[1],10)),t){if(t==s)r=!0;else if(t>s)throw rt('Page "'+t+'" cannot be inserted')}else t=s,r=!0;return 1<=t&&t<=s&&(a=n.display=="double"?t%2?" odd":" even":"",n.done&&this.turn("stop"),t in n.pageObjs&&l._movePages.call(this,t,1),r&&(n.totalPages=s),n.pageObjs[t]=u(e).css({float:"left"}).addClass("page p"+t+a),navigator.userAgent.indexOf("MSIE 9.0")!=-1&&n.pageObjs[t].hasClass("hard")&&n.pageObjs[t].removeClass("hard"),l._addPage.call(this,t),l._removeFromDOM.call(this)),this},_addPage:function(e){var t=this.data(),a=t.pageObjs[e];if(a)if(l._necessPage.call(this,e)){if(!t.pageWrap[e]){t.pageWrap[e]=u("<div/>",{class:"page-wrapper",page:e,css:{position:"absolute",overflow:"hidden"}}),this.append(t.pageWrap[e]),t.pagePlace[e]||(t.pagePlace[e]=e,t.pageObjs[e].appendTo(t.pageWrap[e]));var r=l._pageSize.call(this,e,!0);a.css({width:r.width,height:r.height}),t.pageWrap[e].css(r)}t.pagePlace[e]==e&&l._makeFlip.call(this,e)}else t.pagePlace[e]=0,t.pageObjs[e]&&t.pageObjs[e].remove()},hasPage:function(e){return G(e,this.data().pageObjs)},center:function(e){var t=this.data(),a=u(this).turn("size"),r=0;return t.noCenter||(t.display=="double"&&(e=this.turn("view",e||t.tpage||t.page),t.direction=="ltr"?e[0]?e[1]||(r+=a.width/4):r-=a.width/4:e[0]?e[1]||(r-=a.width/4):r+=a.width/4),u(this).css({marginLeft:r})),this},destroy:function(){var e=this,t=this.data(),a="end first flip last pressed released start turning turned zooming missing".split(" ");if(w("destroying",this)!="prevented"){for(t.destroying=!0,u.each(a,function(r,n){e.unbind(n)}),this.parent().unbind("start",t.eventHandlers.start),u(document).unbind(it.move,t.eventHandlers.touchMove).unbind(it.up,t.eventHandlers.touchEnd);t.totalPages!==0;)this.turn("removePage",t.totalPages);return t.fparent&&t.fparent.remove(),t.shadow&&t.shadow.remove(),this.removeData(),t=null,this}},is:function(){return Ot(this.data().pages)=="object"},zoom:function(e){var t=this.data();if(typeof e=="number"){if(.001>e||100<e)throw rt(e+" is not a value for zoom");if(w("zooming",this,[e,t.zoom])=="prevented")return this;var s=this.turn("size"),a=this.turn("view"),r=1/t.zoom,n=Math.round(s.width*r*e),s=Math.round(s.height*r*e);for(t.zoom=e,u(this).turn("stop").turn("size",n,s),t.opts.autoCenter&&this.turn("center"),l._updateShadow.call(this),e=0;e<a.length;e++)a[e]&&t.pageZoom[a[e]]!=t.zoom&&(this.trigger("zoomed",[a[e],a,t.pageZoom[a[e]],t.zoom]),t.pageZoom[a[e]]=t.zoom);return this}return t.zoom},_pageSize:function(e,t){var a=this.data(),r={};if(a.display=="single")r.width=this.width(),r.height=this.height(),t&&(r.top=0,r.left=0,r.right="auto");else{var n=this.width()/2,s=this.height();if(a.pageObjs[e].hasClass("own-size")?(r.width=a.pageObjs[e].width(),r.height=a.pageObjs[e].height()):(r.width=n,r.height=s),t){var d=e%2;r.top=(s-r.height)/2,a.direction=="ltr"?(r[d?"right":"left"]=n-r.width,r[d?"left":"right"]="auto"):(r[d?"left":"right"]=n-r.width,r[d?"right":"left"]="auto")}}return r},_makeFlip:function(e){var t=this.data();if(!t.pages[e]&&t.pagePlace[e]==e){var a=t.display=="single",r=e%2;t.pages[e]=t.pageObjs[e].css(l._pageSize.call(this,e)).flip({page:e,next:r||a?e+1:e-1,turn:this}).flip("disable",t.disabled),l._setPageLoc.call(this,e),t.pageZoom[e]=t.zoom}return t.pages[e]},_makeRange:function(){var e,t;if(!(1>this.data().totalPages))for(t=this.turn("range"),e=t[0];e<=t[1];e++)l._addPage.call(this,e)},range:function(s){var t,a,r,n=this.data(),s=s||n.tpage||n.page||1;if(r=l._view.call(this,s),1>s||s>n.totalPages)throw rt('"'+s+'" is not a valid page');return r[1]=r[1]||r[0],1<=r[0]&&r[1]<=n.totalPages?(s=Math.floor(2),n.totalPages-r[1]>r[0]?(t=Math.min(r[0]-1,s),a=2*s-t):(a=Math.min(n.totalPages-r[1],s),t=2*s-a)):a=t=5,[Math.max(1,r[0]-t),Math.min(n.totalPages,r[1]+a)]},_necessPage:function(e){if(e===0)return!0;var t=this.turn("range");return this.data().pageObjs[e].hasClass("fixed")||e>=t[0]&&e<=t[1]},_removeFromDOM:function(){var e,t=this.data();for(e in t.pageWrap)G(e,t.pageWrap)&&!l._necessPage.call(this,e)&&l._removePageFromDOM.call(this,e)},_removePageFromDOM:function(e){var t=this.data();if(t.pages[e]){var a=t.pages[e].data();p._moveFoldingPage.call(t.pages[e],!1),a.f&&a.f.fwrapper&&a.f.fwrapper.remove(),t.pages[e].removeData(),t.pages[e].remove(),delete t.pages[e]}t.pageObjs[e]&&t.pageObjs[e].remove(),t.pageWrap[e]&&(t.pageWrap[e].remove(),delete t.pageWrap[e]),l._removeMv.call(this,e),delete t.pagePlace[e],delete t.pageZoom[e]},removePage:function(e){var t=this.data();if(e=="*")for(;t.totalPages!==0;)this.turn("removePage",t.totalPages);else{if(1>e||e>t.totalPages)throw rt("The page "+e+" doesn't exist");t.pageObjs[e]&&(this.turn("stop"),l._removePageFromDOM.call(this,e),delete t.pageObjs[e]),l._movePages.call(this,e,-1),t.totalPages-=1,t.page>t.totalPages?(t.page=null,l._fitPage.call(this,t.totalPages)):(l._makeRange.call(this),this.turn("update"))}return this},_movePages:function(e,t){var a,r=this,n=this.data(),s=n.display=="single",d=function(v){var y=v+t,E=y%2,V=E?" odd ":" even ";n.pageObjs[v]&&(n.pageObjs[y]=n.pageObjs[v].removeClass("p"+v+" odd even").addClass("p"+y+V)),n.pagePlace[v]&&n.pageWrap[v]&&(n.pagePlace[y]=y,n.pageWrap[y]=n.pageObjs[y].hasClass("fixed")?n.pageWrap[v].attr("page",y):n.pageWrap[v].css(l._pageSize.call(r,y,!0)).attr("page",y),n.pages[v]&&(n.pages[y]=n.pages[v].flip("options",{page:y,next:s||E?y+1:y-1})),t&&(delete n.pages[v],delete n.pagePlace[v],delete n.pageZoom[v],delete n.pageObjs[v],delete n.pageWrap[v]))};if(0<t)for(a=n.totalPages;a>=e;a--)d(a);else for(a=e;a<=n.totalPages;a++)d(a)},display:function(e){var t=this.data(),a=t.display;if(e===void 0)return a;if(u.inArray(e,k)==-1)throw rt('"'+e+'" is not a value for display');switch(e){case"single":t.pageObjs[0]||(this.turn("stop").css({overflow:"hidden"}),t.pageObjs[0]=u("<div />",{class:"page p-temporal"}).css({width:this.width(),height:this.height()}).appendTo(this)),this.addClass("shadow");break;case"double":t.pageObjs[0]&&(this.turn("stop").css({overflow:""}),t.pageObjs[0].remove(),delete t.pageObjs[0]),this.removeClass("shadow")}return t.display=e,a&&(e=this.turn("size"),l._movePages.call(this,1,0),this.turn("size",e.width,e.height).turn("update")),this},direction:function(e){var t=this.data();if(e===void 0)return t.direction;if(e=e.toLowerCase(),u.inArray(e,ft)==-1)throw rt('"'+e+'" is not a value for direction');return e=="rtl"&&u(this).attr("dir","ltr").css({direction:"ltr"}),t.direction=e,t.done&&this.turn("size",u(this).width(),u(this).height()),this},animating:function(){return 0<this.data().pageMv.length},corner:function(){var e,t,a=this.data();for(t in a.pages)if(G(t,a.pages)&&(e=a.pages[t].flip("corner")))return e;return!1},data:function(){return this.data()},disable:function(e){var t,a=this.data(),r=this.turn("view");a.disabled=e===void 0||e===!0;for(t in a.pages)G(t,a.pages)&&a.pages[t].flip("disable",a.disabled?!0:u.inArray(parseInt(t,10),r)==-1);return this},disabled:function(e){return e===void 0?this.data().disabled===!0:this.turn("disable",e)},size:function(e,t){if(e===void 0||t===void 0)return{width:this.width(),height:this.height()};this.turn("stop");var a,r,n=this.data();r=n.display=="double"?e/2:e,this.css({width:e,height:t}),n.pageObjs[0]&&n.pageObjs[0].css({width:r,height:t});for(a in n.pageWrap)G(a,n.pageWrap)&&(r=l._pageSize.call(this,a,!0),n.pageObjs[a].css({width:r.width,height:r.height}),n.pageWrap[a].css(r),n.pages[a]&&n.pages[a].css({width:r.width,height:r.height}));return this.turn("resize"),this},resize:function(){var e,t=this.data();for(t.pages[0]&&(t.pageWrap[0].css({left:-this.width()}),t.pages[0].flip("resize",!0)),e=1;e<=t.totalPages;e++)t.pages[e]&&t.pages[e].flip("resize",!0);l._updateShadow.call(this),t.opts.autoCenter&&this.turn("center")},_removeMv:function(e){var t,a=this.data();for(t=0;t<a.pageMv.length;t++)if(a.pageMv[t]==e)return a.pageMv.splice(t,1),!0;return!1},_addMv:function(e){var t=this.data();l._removeMv.call(this,e),t.pageMv.push(e)},_view:function(a){var t=this.data(),a=a||t.page;return t.display=="double"?a%2?[a-1,a]:[a,a+1]:[a]},view:function(a){var t=this.data(),a=l._view.call(this,a);return t.display=="double"?[0<a[0]?a[0]:0,a[1]<=t.totalPages?a[1]:0]:[0<a[0]&&a[0]<=t.totalPages?a[0]:0]},stop:function(e,t){if(this.turn("animating")){var a,r,n,s=this.data();for(s.tpage&&(s.page=s.tpage,delete s.tpage),a=0;a<s.pageMv.length;a++)s.pageMv[a]&&s.pageMv[a]!==e&&(n=s.pages[s.pageMv[a]],r=n.data().f.opts,n.flip("hideFoldedPage",t),t||p._moveFoldingPage.call(n,!1),r.force&&(r.next=r.page%2===0?r.page-1:r.page+1,delete r.force))}return this.turn("update"),this},pages:function(e){var t=this.data();if(e){if(e<t.totalPages)for(var a=t.totalPages;a>e;a--)this.turn("removePage",a);return t.totalPages=e,l._fitPage.call(this,t.page),this}return t.totalPages},_missing:function(e){var t=this.data();if(!(1>t.totalPages)){for(var a=this.turn("range",e),r=[],e=a[0];e<=a[1];e++)t.pageObjs[e]||r.push(e);0<r.length&&this.trigger("missing",[r])}},_fitPage:function(e){var t=this.data(),a=this.turn("view",e);if(l._missing.call(this,e),t.pageObjs[e]){t.page=e,this.turn("stop");for(var r=0;r<a.length;r++)a[r]&&t.pageZoom[a[r]]!=t.zoom&&(this.trigger("zoomed",[a[r],a,t.pageZoom[a[r]],t.zoom]),t.pageZoom[a[r]]=t.zoom);l._removeFromDOM.call(this),l._makeRange.call(this),l._updateShadow.call(this),this.trigger("turned",[e,a]),this.turn("update"),t.opts.autoCenter&&this.turn("center")}},_turnPage:function(e){var t,a,r=this.data(),n=r.pagePlace[e],s=this.turn("view"),d=this.turn("view",e);if(r.page!=e){var z=r.page;if(w("turning",this,[e,d])=="prevented"){z==r.page&&u.inArray(n,r.pageMv)!=-1&&r.pages[n].flip("hideFoldedPage",!0);return}u.inArray(1,d)!=-1&&this.trigger("first"),u.inArray(r.totalPages,d)!=-1&&this.trigger("last")}r.display=="single"?(t=s[0],a=d[0]):s[1]&&e>s[1]?(t=s[1],a=d[0]):s[0]&&e<s[0]&&(t=s[0],a=d[1]),n=r.opts.turnCorners.split(","),s=r.pages[t].data().f,d=s.opts,z=s.point,l._missing.call(this,e),r.pageObjs[e]&&(this.turn("stop"),r.page=e,l._makeRange.call(this),r.tpage=a,d.next!=a&&(d.next=a,d.force=!0),this.turn("update"),s.point=z,s.effect=="hard"?r.direction=="ltr"?r.pages[t].flip("turnPage",e>t?"r":"l"):r.pages[t].flip("turnPage",e>t?"l":"r"):r.direction=="ltr"?r.pages[t].flip("turnPage",n[e>t?1:0]):r.pages[t].flip("turnPage",n[e>t?0:1]))},page:function(e){var t=this.data();if(e===void 0)return t.page;if(!t.disabled&&!t.destroying){if(e=parseInt(e,10),0<e&&e<=t.totalPages)return e!=t.page&&(!t.done||u.inArray(e,this.turn("view"))!=-1?l._fitPage.call(this,e):l._turnPage.call(this,e)),this;throw rt("The page "+e+" does not exist")}},next:function(){return this.turn("page",Math.min(this.data().totalPages,l._view.call(this,this.data().page).pop()+1))},previous:function(){return this.turn("page",Math.max(1,l._view.call(this,this.data().page).shift()-1))},peel:function(e,n){var a=this.data(),r=this.turn("view"),n=n===void 0?!0:n===!0;return e===!1?this.turn("stop",null,n):a.display=="single"?a.pages[a.page].flip("peel",e,n):(r=a.direction=="ltr"?e.indexOf("l")!=-1?r[0]:r[1]:e.indexOf("l")!=-1?r[1]:r[0],a.pages[r]&&a.pages[r].flip("peel",e,n)),this},_addMotionPage:function(){var e=u(this).data().f.opts,t=e.turn;t.data(),l._addMv.call(t,e.page)},_eventStart:function(e,t,a){var r=t.turn.data(),n=r.pageZoom[t.page];e.isDefaultPrevented()||(n&&n!=r.zoom&&(t.turn.trigger("zoomed",[t.page,t.turn.turn("view",t.page),n,r.zoom]),r.pageZoom[t.page]=r.zoom),r.display=="single"&&a&&(a.charAt(1)=="l"&&r.direction=="ltr"||a.charAt(1)=="r"&&r.direction=="rtl"?(t.next=t.next<t.page?t.next:t.page-1,t.force=!0):t.next=t.next>t.page?t.next:t.page+1),l._addMotionPage.call(e.target)),l._updateShadow.call(t.turn)},_eventEnd:function(r,t,a){u(r.target).data();var r=t.turn,n=r.data();a?(a=n.tpage||n.page,(a==t.next||a==t.page)&&(delete n.tpage,l._fitPage.call(r,a||t.next,!0))):(l._removeMv.call(r,t.page),l._updateShadow.call(r),r.turn("update"))},_eventPressed:function(t){var t=u(t.target).data().f,a=t.opts.turn;return a.data().mouseAction=!0,a.turn("update"),t.time=new Date().getTime()},_eventReleased:function(e,t){var a;a=u(e.target);var r=a.data().f,n=r.opts.turn,s=n.data();a=s.display=="single"?t.corner=="br"||t.corner=="tr"?t.x<a.width()/2:t.x>a.width()/2:0>t.x||t.x>a.width(),(200>new Date().getTime()-r.time||a)&&(e.preventDefault(),l._turnPage.call(n,r.opts.next)),s.mouseAction=!1},_flip:function(e){e.stopPropagation(),e=u(e.target).data().f.opts,e.turn.trigger("turn",[e.next]),e.turn.data().opts.autoCenter&&e.turn.turn("center",e.next)},_touchStart:function(){var e=this.data(),t;for(t in e.pages)if(G(t,e.pages)&&p._eventStart.apply(e.pages[t],arguments)===!1)return!1},_touchMove:function(){var e=this.data(),t;for(t in e.pages)G(t,e.pages)&&p._eventMove.apply(e.pages[t],arguments)},_touchEnd:function(){var e=this.data(),t;for(t in e.pages)G(t,e.pages)&&p._eventEnd.apply(e.pages[t],arguments)},calculateZ:function(e){var t,a,r,n,s=this,d=this.data();t=this.turn("view");var z=t[0]||t[1],v=e.length-1,y={pageZ:{},partZ:{},pageV:{}},E=function(O){O=s.turn("view",O),O[0]&&(y.pageV[O[0]]=!0),O[1]&&(y.pageV[O[1]]=!0)};for(t=0;t<=v;t++)a=e[t],r=d.pages[a].data().f.opts.next,n=d.pagePlace[a],E(a),E(r),a=d.pagePlace[r]==r?r:a,y.pageZ[a]=d.totalPages-Math.abs(z-a),y.partZ[n]=2*d.totalPages-v+t;return y},update:function(){var e,t=this.data();if(this.turn("animating")&&t.pageMv[0]!==0){var a,r=this.turn("calculateZ",t.pageMv),n=this.turn("corner"),s=this.turn("view"),d=this.turn("view",t.tpage);for(e in t.pageWrap)G(e,t.pageWrap)&&(a=t.pageObjs[e].hasClass("fixed"),t.pageWrap[e].css({display:r.pageV[e]||a?"":"none",zIndex:(t.pageObjs[e].hasClass("hard")?r.partZ[e]:r.pageZ[e])||(a?-1:0)}),a=t.pages[e])&&(a.flip("z",r.partZ[e]||null),r.pageV[e]&&a.flip("resize"),t.tpage?a.flip("hover",!1).flip("disable",u.inArray(parseInt(e,10),t.pageMv)==-1&&e!=d[0]&&e!=d[1]):a.flip("hover",n===!1).flip("disable",e!=s[0]&&e!=s[1]))}else for(e in t.pageWrap)G(e,t.pageWrap)&&(r=l._setPageLoc.call(this,e),t.pages[e]&&t.pages[e].flip("disable",t.disabled||r!=1).flip("hover",!0).flip("z",null));return this},_updateShadow:function(){var e,t,a=this.data(),r=this.width(),n=this.height(),s=a.display=="single"?r:r/2;e=this.turn("view"),a.shadow||(a.shadow=u("<div />",{class:"shadow",css:W(0,0,0).css}).appendTo(this));for(var d=0;d<a.pageMv.length&&e[0]&&e[1];d++)e=this.turn("view",a.pages[a.pageMv[d]].data().f.opts.next),t=this.turn("view",a.pageMv[d]),e[0]=e[0]&&t[0],e[1]=e[1]&&t[1];switch(e[0]?e[1]?3:a.direction=="ltr"?2:1:a.direction=="ltr"?1:2){case 1:a.shadow.css({width:s,height:n,top:0,left:s});break;case 2:a.shadow.css({width:s,height:n,top:0,left:0});break;case 3:a.shadow.css({width:r,height:n,top:0,left:0})}},_setPageLoc:function(e){var t=this.data(),a=this.turn("view"),r=0;if(e==a[0]||e==a[1]?r=1:(t.display=="single"&&e==a[0]+1||t.display=="double"&&e==a[0]-2||e==a[1]+2)&&(r=2),!this.turn("animating"))switch(r){case 1:t.pageWrap[e].css({zIndex:t.totalPages,display:""});break;case 2:t.pageWrap[e].css({zIndex:t.totalPages-1,display:""});break;case 0:t.pageWrap[e].css({zIndex:0,display:t.pageObjs[e].hasClass("fixed")?"":"none"})}return r},options:function(e){if(e===void 0)return this.data().opts;var t=this.data();if(u.extend(t.opts,e),e.pages&&this.turn("pages",e.pages),e.page&&this.turn("page",e.page),e.display&&this.turn("display",e.display),e.direction&&this.turn("direction",e.direction),e.width&&e.height&&this.turn("size",e.width,e.height),e.when)for(var a in e.when)G(a,e.when)&&this.unbind(a).bind(a,e.when[a]);return this},version:function(){return"4.1.0"}},p={init:function(e){return this.data({f:{disabled:!1,hover:!1,effect:this.hasClass("hard")?"hard":"sheet"}}),this.flip("options",e),p._addPageWrapper.call(this),this},setData:function(e){var t=this.data();return t.f=u.extend(t.f,e),this},options:function(e){var t=this.data().f;return e?(p.setData.call(this,{opts:u.extend({},t.opts||Tt,e)}),this):t.opts},z:function(e){var t=this.data().f;return t.opts["z-index"]=e,t.fwrapper&&t.fwrapper.css({zIndex:e||parseInt(t.parent.css("z-index"),10)||0}),this},_cAllowed:function(){var e=this.data().f,t=e.opts.page,a=e.opts.turn.data(),r=t%2;return e.effect=="hard"?a.direction=="ltr"?[r?"r":"l"]:[r?"l":"r"]:a.display=="single"?t==1?a.direction=="ltr"?U.forward:U.backward:t==a.totalPages?a.direction=="ltr"?U.backward:U.forward:U.all:a.direction=="ltr"?U[r?"forward":"backward"]:U[r?"backward":"forward"]},_cornerActivated:function(n){var t=this.data().f,a=this.width(),r=this.height(),n={x:n.x,y:n.y,corner:""},s=t.opts.cornerSize;if(0>=n.x||0>=n.y||n.x>=a||n.y>=r)return!1;var d=p._cAllowed.call(this);switch(t.effect){case"hard":if(n.x>a-s)n.corner="r";else if(n.x<s)n.corner="l";else return!1;break;case"sheet":if(n.y<s)n.corner+="t";else if(n.y>=r-s)n.corner+="b";else return!1;if(n.x<=s)n.corner+="l";else if(n.x>=a-s)n.corner+="r";else return!1}return!n.corner||u.inArray(n.corner,d)==-1?!1:n},_isIArea:function(a){var t=this.data().f.parent.offset(),a=m&&a.originalEvent?a.originalEvent.touches[0]:a;return p._cornerActivated.call(this,{x:a.pageX-t.left,y:a.pageY-t.top})},_c:function(e,t){switch(t=t||0,e){case"tl":return _(t,t);case"tr":return _(this.width()-t,t);case"bl":return _(t,this.height()-t);case"br":return _(this.width()-t,this.height()-t);case"l":return _(t,0);case"r":return _(this.width()-t,0)}},_c2:function(e){switch(e){case"tl":return _(2*this.width(),0);case"tr":return _(-this.width(),0);case"bl":return _(2*this.width(),this.height());case"br":return _(-this.width(),this.height());case"l":return _(2*this.width(),0);case"r":return _(-this.width(),0)}},_foldingPage:function(){var e=this.data().f;if(e){var t=e.opts;if(t.turn)return e=t.turn.data(),e.display=="single"?1<t.next||1<t.page?e.pageObjs[0]:null:e.pageObjs[t.next]}},_backGradient:function(){var e=this.data().f,t=e.opts.turn.data();return(t=t.opts.gradients&&(t.display=="single"||e.opts.page!=2&&e.opts.page!=t.totalPages-1))&&!e.bshadow&&(e.bshadow=u("<div/>",W(0,0,1)).css({position:"",width:this.width(),height:this.height()}).appendTo(e.parent)),t},type:function(){return this.data().f.effect},resize:function(e){var t=this.data().f,a=t.opts.turn.data(),r=this.width(),n=this.height();switch(t.effect){case"hard":e&&(t.wrapper.css({width:r,height:n}),t.fpage.css({width:r,height:n}),a.opts.gradients&&(t.ashadow.css({width:r,height:n}),t.bshadow.css({width:r,height:n})));break;case"sheet":e&&(e=Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(n,2))),t.wrapper.css({width:e,height:e}),t.fwrapper.css({width:e,height:e}).children(":first-child").css({width:r,height:n}),t.fpage.css({width:r,height:n}),a.opts.gradients&&t.ashadow.css({width:r,height:n}),p._backGradient.call(this)&&t.bshadow.css({width:r,height:n})),t.parent.is(":visible")&&(a=c(t.parent[0]),t.fwrapper.css({top:a.top,left:a.left}),a=c(t.opts.turn[0]),t.fparent.css({top:-a.top,left:-a.left})),this.flip("z",t.opts["z-index"])}},_addPageWrapper:function(){var e=this.data().f,t=e.opts.turn.data(),a=this.parent();if(e.parent=a,!e.wrapper)switch(e.effect){case"hard":var r={};r[nt+"transform-style"]="preserve-3d",r[nt+"backface-visibility"]="hidden",e.wrapper=u("<div/>",W(0,0,2)).css(r).appendTo(a).prepend(this),e.fpage=u("<div/>",W(0,0,1)).css(r).appendTo(a),t.opts.gradients&&(e.ashadow=u("<div/>",W(0,0,0)).hide().appendTo(a),e.bshadow=u("<div/>",W(0,0,0)));break;case"sheet":var r=this.width(),n=this.height();Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(n,2))),e.fparent=e.opts.turn.data().fparent,e.fparent||(r=u("<div/>",{css:{"pointer-events":"none"}}).hide(),r.data().flips=0,r.css(W(0,0,"auto","visible").css).appendTo(e.opts.turn),e.opts.turn.data().fparent=r,e.fparent=r),this.css({position:"absolute",top:0,left:0,bottom:"auto",right:"auto"}),e.wrapper=u("<div/>",W(0,0,this.css("z-index"))).appendTo(a).prepend(this),e.fwrapper=u("<div/>",W(a.offset().top,a.offset().left)).hide().appendTo(e.fparent),e.fpage=u("<div/>",W(0,0,0,"visible")).css({cursor:"default"}).appendTo(e.fwrapper),t.opts.gradients&&(e.ashadow=u("<div/>",W(0,0,1)).appendTo(e.fpage)),p.setData.call(this,e)}p.resize.call(this,!0)},_fold:function(e){var t=this.data().f,a=t.opts.turn.data(),r=p._c.call(this,e.corner),n=this.width(),s=this.height();switch(t.effect){case"hard":e.x=e.corner=="l"?Math.min(Math.max(e.x,0),2*n):Math.max(Math.min(e.x,n),-n);var d,z,v,y,E,V=a.totalPages,O=t.opts["z-index"]||V,jt={overflow:"visible"},tt=r.x?(r.x-e.x)/n:e.x/n,mt=90*tt,zt=90>mt;switch(e.corner){case"l":y="0% 50%",E="100% 50%",zt?(d=0,z=0<t.opts.next-1,v=1):(d="100%",z=t.opts.page+1<V,v=0);break;case"r":y="100% 50%",E="0% 50%",mt=-mt,n=-n,zt?(d=0,z=t.opts.next+1<V,v=0):(d="-100%",z=t.opts.page!=1,v=1)}jt[nt+"perspective-origin"]=E,t.wrapper.transform("rotateY("+mt+"deg)translate3d(0px, 0px, "+(this.attr("depth")||0)+"px)",E),t.fpage.transform("translateX("+n+"px) rotateY("+(180+mt)+"deg)",y),t.parent.css(jt),zt?(tt=-tt+1,t.wrapper.css({zIndex:O+1}),t.fpage.css({zIndex:O})):(tt-=1,t.wrapper.css({zIndex:O}),t.fpage.css({zIndex:O+1})),a.opts.gradients&&(z?t.ashadow.css({display:"",left:d,backgroundColor:"rgba(0,0,0,"+.5*tt+")"}).transform("rotateY(0deg)"):t.ashadow.hide(),t.bshadow.css({opacity:-tt+1}),zt?t.bshadow.parent()[0]!=t.wrapper[0]&&t.bshadow.appendTo(t.wrapper):t.bshadow.parent()[0]!=t.fpage[0]&&t.bshadow.appendTo(t.fpage),K(t.bshadow,_(100*v,0),_(100*(-v+1),0),[[0,"rgba(0,0,0,0.3)"],[1,"rgba(0,0,0,0)"]],2));break;case"sheet":var x=this,wt=0,ut,ot,lt,xt,B,Et,Dt,Q=_(0,0),kt=_(0,0),C=_(0,0),Xt=p._foldingPage.call(this);Math.tan(0);var yt=a.opts.acceleration,bt=t.wrapper.height(),ht=e.corner.substr(0,1)=="t",dt=e.corner.substr(1,1)=="l",_t=function Pt(){var P=_(0,0),H=_(0,0);P.x=r.x?r.x-e.x:e.x,P.y=Wt?r.y?r.y-e.y:e.y:0,H.x=dt?n-P.x/2:e.x+P.x/2,H.y=P.y/2;var j=Y-Math.atan2(P.y,P.x),F=j-Math.atan2(H.y,H.x),F=Math.max(0,Math.sin(F)*Math.sqrt(Math.pow(H.x,2)+Math.pow(H.y,2)));return wt=180*(j/St),C=_(F*Math.sin(j),F*Math.cos(j)),j>Y&&(C.x+=Math.abs(C.y*P.y/P.x),C.y=0,Math.round(C.x*Math.tan(St-j))<s)?(e.y=Math.sqrt(Math.pow(s,2)+2*H.x*P.x),ht&&(e.y=s-e.y),Pt()):(j>Y&&(P=St-j,H=bt-s/Math.sin(P),Q=_(Math.round(H*Math.cos(P)),Math.round(H*Math.sin(P))),dt&&(Q.x=-Q.x),ht)&&(Q.y=-Q.y),ut=Math.round(C.y/Math.tan(j)+C.x),P=n-ut,H=P*Math.cos(2*j),F=P*Math.sin(2*j),kt=_(Math.round(dt?P-H:ut+H),Math.round(ht?F:s-F)),a.opts.gradients&&(B=P*Math.sin(j),P=p._c2.call(x,e.corner),P=Math.sqrt(Math.pow(P.x-e.x,2)+Math.pow(P.y-e.y,2))/n,Dt=Math.sin(Y*(1<P?2-P:P)),Et=Math.min(P,1),xt=100<B?(B-100)/B:0,ot=_(100*(B*Math.sin(j)/n),100*(B*Math.cos(j)/s)),p._backGradient.call(x)&&(lt=_(100*(1.2*B*Math.sin(j)/n),100*(1.2*B*Math.cos(j)/s)),dt||(lt.x=100-lt.x),!ht))&&(lt.y=100-lt.y),C.x=Math.round(C.x),C.y=Math.round(C.y),!0)};switch(d=function(P,Z,j,F){var S=["0","auto"],Mt=(n-bt)*j[0]/100,$=(s-bt)*j[1]/100,Z={left:S[Z[0]],top:S[Z[1]],right:S[Z[2]],bottom:S[Z[3]]},S={},f=F!=90&&F!=-90?dt?-1:1:0,et=j[0]+"% "+j[1]+"%";x.css(Z).transform(D(F)+pt(P.x+f,P.y,yt),et),t.fpage.css(Z).transform(D(F)+pt(P.x+kt.x-Q.x-n*j[0]/100,P.y+kt.y-Q.y-s*j[1]/100,yt)+D((180/F-2)*F),et),t.wrapper.transform(pt(-P.x+Mt-f,-P.y+$,yt)+D(-F),et),t.fwrapper.transform(pt(-P.x+Q.x+Mt,-P.y+Q.y+$,yt)+D(-F),et),a.opts.gradients&&(j[0]&&(ot.x=100-ot.x),j[1]&&(ot.y=100-ot.y),S["box-shadow"]="0 0 20px rgba(0,0,0,"+.5*Dt+")",Xt.css(S),K(t.ashadow,_(dt?100:0,ht?0:100),_(ot.x,ot.y),[[xt,"rgba(0,0,0,0)"],[.8*(1-xt)+xt,"rgba(0,0,0,"+.2*Et+")"],[1,"rgba(255,255,255,"+.2*Et+")"]],3,0),p._backGradient.call(x)&&K(t.bshadow,_(dt?0:100,ht?0:100),_(lt.x,lt.y),[[.6,"rgba(0,0,0,0)"],[.8,"rgba(0,0,0,"+.3*Et+")"],[1,"rgba(0,0,0,0)"]],3))},e.corner){case"tl":e.x=Math.max(e.x,1),_t(),d(C,[1,0,0,1],[100,0],wt);break;case"tr":e.x=Math.min(e.x,n-1),_t(),d(_(-C.x,C.y),[0,0,0,1],[0,0],-wt);break;case"bl":e.x=Math.max(e.x,1),_t(),d(_(C.x,-C.y),[1,1,0,0],[100,100],-wt);break;case"br":e.x=Math.min(e.x,n-1),_t(),d(_(-C.x,-C.y),[0,1,1,0],[0,100],wt)}}t.point=e},_moveFoldingPage:function(e){var t=this.data().f;if(t){var a=t.opts.turn,r=a.data(),n=r.pagePlace;e?(r=t.opts.next,n[r]!=t.opts.page&&(t.folding&&p._moveFoldingPage.call(this,!1),p._foldingPage.call(this).appendTo(t.fpage),n[r]=t.opts.page,t.folding=r),a.turn("update")):t.folding&&(r.pages[t.folding]?(a=r.pages[t.folding].data().f,r.pageObjs[t.folding].appendTo(a.wrapper)):r.pageWrap[t.folding]&&r.pageObjs[t.folding].appendTo(r.pageWrap[t.folding]),t.folding in n&&(n[t.folding]=t.folding),delete t.folding)}},_showFoldedPage:function(e,t){var a=p._foldingPage.call(this),r=this.data(),n=r.f,s=n.visible;if(a){if((!s||!n.point||n.point.corner!=e.corner)&&(a=n.status=="hover"||n.status=="peel"||n.opts.turn.data().mouseAction?e.corner:null,s=!1,w("start",this,[n.opts,a])=="prevented"))return!1;if(t){var d=this,r=n.point&&n.point.corner==e.corner?n.point:p._c.call(this,e.corner,1);this.animatef({from:[r.x,r.y],to:[e.x,e.y],duration:500,frame:function(y){e.x=Math.round(y[0]),e.y=Math.round(y[1]),p._fold.call(d,e)}})}else p._fold.call(this,e),r.effect&&!r.effect.turning&&this.animatef(!1);if(!s)switch(n.effect){case"hard":n.visible=!0,p._moveFoldingPage.call(this,!0),n.fpage.show(),n.opts.shadows&&n.bshadow.show();break;case"sheet":n.visible=!0,n.fparent.show().data().flips++,p._moveFoldingPage.call(this,!0),n.fwrapper.show(),n.bshadow&&n.bshadow.show()}return!0}return!1},hide:function(){var e=this.data().f,t=e.opts.turn.data(),a=p._foldingPage.call(this);switch(e.effect){case"hard":t.opts.gradients&&(e.bshadowLoc=0,e.bshadow.remove(),e.ashadow.hide()),e.wrapper.transform(""),e.fpage.hide();break;case"sheet":--e.fparent.data().flips===0&&e.fparent.hide(),this.css({left:0,top:0,right:"auto",bottom:"auto"}).transform(""),e.wrapper.transform(""),e.fwrapper.hide(),e.bshadow&&e.bshadow.hide(),a.transform("")}return e.visible=!1,this},hideFoldedPage:function(e){var t=this.data().f;if(t.point){var a=this,r=t.point,n=function(){t.point=null,t.status="",a.flip("hide"),a.trigger("end",[t.opts,!1])};if(e){var s=p._c.call(this,r.corner),e=r.corner.substr(0,1)=="t"?Math.min(0,r.y-s.y)/2:Math.max(0,r.y-s.y)/2,d=_(r.x,r.y+e),z=_(s.x,s.y-e);this.animatef({from:0,to:1,frame:function(E){E=It(r,d,z,s,E),r.x=E.x,r.y=E.y,p._fold.call(a,r)},complete:n,duration:800,hiding:!0})}else this.animatef(!1),n()}},turnPage:function(n){var t=this,a=this.data().f,r=a.opts.turn.data(),n={corner:a.corner?a.corner.corner:n||p._cAllowed.call(this)[0]},s=a.point||p._c.call(this,n.corner,a.opts.turn?r.opts.elevation:0),d=p._c2.call(this,n.corner);this.trigger("flip").animatef({from:0,to:1,frame:function(v){v=It(s,s,d,d,v),n.x=v.x,n.y=v.y,p._showFoldedPage.call(t,n)},complete:function(){t.trigger("end",[a.opts,!0])},duration:r.opts.duration,turning:!0}),a.corner=null},moving:function(){return"effect"in this.data()},isTurning:function(){return this.flip("moving")&&this.data().effect.turning},corner:function(){return this.data().f.corner},_eventStart:function(e){var t=this.data().f,a=t.opts.turn;if(!t.corner&&!t.disabled&&!this.flip("isTurning")&&t.opts.page==a.data().pagePlace[t.opts.page]){if(t.corner=p._isIArea.call(this,e),t.corner&&p._foldingPage.call(this))return this.trigger("pressed",[t.point]),p._showFoldedPage.call(this,t.corner),!1;t.corner=null}},_eventMove:function(e){var t=this.data().f;if(!t.disabled)if(e=m?e.originalEvent.touches:[e],t.corner){var a=t.parent.offset();t.corner.x=e[0].pageX-a.left,t.corner.y=e[0].pageY-a.top,p._showFoldedPage.call(this,t.corner)}else t.hover&&!this.data().effect&&this.is(":visible")&&((e=p._isIArea.call(this,e[0]))?(t.effect=="sheet"&&e.corner.length==2||t.effect=="hard")&&(t.status="hover",t=p._c.call(this,e.corner,t.opts.cornerSize/2),e.x=t.x,e.y=t.y,p._showFoldedPage.call(this,e,!0)):t.status=="hover"&&(t.status="",p.hideFoldedPage.call(this,!0)))},_eventEnd:function(){var e=this.data().f,t=e.corner;!e.disabled&&t&&w("released",this,[e.point||t])!="prevented"&&p.hideFoldedPage.call(this,!0),e.corner=null},disable:function(e){return p.setData.call(this,{disabled:e}),this},hover:function(e){return p.setData.call(this,{hover:e}),this},peel:function(e,t){var a=this.data().f;if(e){if(u.inArray(e,U.all)==-1)throw rt("Corner "+e+" is not permitted");if(u.inArray(e,p._cAllowed.call(this))!=-1){var r=p._c.call(this,e,a.opts.cornerSize/2);a.status="peel",p._showFoldedPage.call(this,{corner:e,x:r.x,y:r.y},t)}}else a.status="",p.hideFoldedPage.call(this,t);return this}};window.requestAnim=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)},u.extend(u.fn,{flip:function(){return At(u(this[0]),p,arguments)},turn:function(){return At(u(this[0]),l,arguments)},transform:function(e,t){var a={};return t&&(a[nt+"transform-origin"]=t),a[nt+"transform"]=e,this.css(a)},animatef:function(e){var t=this.data();if(t.effect&&t.effect.stop(),e){e.to.length||(e.to=[e.to]),e.from.length||(e.from=[e.from]);for(var a=[],r=e.to.length,n=!0,s=this,d=new Date().getTime(),z=function y(){if(t.effect&&n){for(var E=[],V=Math.min(e.duration,new Date().getTime()-d),O=0;O<r;O++)E.push(t.effect.easing(1,V,e.from[O],a[O],e.duration));e.frame(r==1?E[0]:E),V==e.duration?(delete t.effect,s.data(t),e.complete&&e.complete()):window.requestAnim(y)}},v=0;v<r;v++)a.push(e.to[v]-e.from[v]);t.effect=u.extend({stop:function(){n=!1},easing:function(E,V,O,jt,tt){return jt*Math.sqrt(1-(V=V/tt-1)*V)+O}},e),this.data(t),z()}else delete t.effect}}),u.isTouch=m,u.mouseEvents=it,u.cssPrefix=gt,u.cssTransitionEnd=function(){var i,e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MSTransition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(i in t)if(e.style[i]!==void 0)return t[i]},u.findPos=c})(b)},72701:function(Jt,Zt,I){"use strict";I.r(Zt),I.d(Zt,{default:function(){return St}});var b=I(67294),Ot=I(38416),u=I.n(Ot),At=I(42122),W=I.n(At),It=I(861),_=I.n(It),pt=I(27424),D=I.n(pt);function G(Y){var m=`<?xml version="1.0" encoding="UTF-8"?>
  <svg xmlns="http://www.w3.org/2000/svg" width="1440" height="2048">
    <defs>
      <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#1b1e24"/>
        <stop offset="100%" stop-color="#2b2f37"/>
      </linearGradient>
    </defs>
    <rect width="100%" height="100%" fill="url(#g)"/>
    <text x="50%" y="45%" dominant-baseline="middle" text-anchor="middle" font-size="220" fill="#ffffff" font-family="Inter, PingFang SC, Arial">`.concat(Y,`</text>
    <text x="50%" y="60%" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="#9aa0a6" font-family="Inter, PingFang SC, Arial">\u793A\u4F8B\u9875\u9762</text>
  </svg>`);return"data:image/svg+xml;utf8,".concat(encodeURIComponent(m))}var gt=Array.from({length:20}).map(function(Y,m){return{id:m+1,title:"\u7B2C".concat(m+1,"\u9875"),src:"https://malloss.gree.com/gree-mall-v3/pdf/PDF%E5%9B%BE%E7%89%87%E6%8F%90%E5%8F%96-1763720835913/".concat(m+1,".webp")}}),K=I(13692),w={viewer:"viewer___Bx6Iz",gradient:"gradient___T8SrD",topBar:"topBar___VEUlJ",iconBtn:"iconBtn___SnTSK",hidden:"hidden___VTsCy",topBarLeft:"topBarLeft___iNkML",topBarRight:"topBarRight___VPeRh",topBarCenter:"topBarCenter___ucIah",stageWrap:"stageWrap___omAdB",stage:"stage___kchgc",flipbook:"flipbook____aVPw",page:"page___Kdllo",hard:"hard___hKec2",controls:"controls___Kuo3w",controlsLeft:"controlsLeft___RRUim",controlsCenter:"controlsCenter___jIx4h",controlsRight:"controlsRight___JwPpr",pageDisplay:"pageDisplay___w2div",pageInput:"pageInput___RwddY",zoomDisplay:"zoomDisplay___gDE7O",zoomWrap:"zoomWrap___ZULuY",progressOverlay:"progressOverlay___Wa8zs",loader:"loader___W5Yn3",bar:"bar___Zl0tF",barInner:"barInner___A2ZfV",loaderText:"loaderText___wGuJM",rightEdge:"rightEdge___Q6aMp",leftEdge:"leftEdge___efBja",pageLoader:"pageLoader___Rnljh",retryBtn:"retryBtn___OvmNj",loaderSpinner:"loaderSpinner___BmXCN",spin:"spin___Qqo26"},rt=I(72655),c=I(85893),N=I(19755);function Wt(Y,m){var it=(0,b.useState)({width:0,height:0,display:"double"}),U=D()(it,2),k=U[0],ft=U[1];return(0,b.useEffect)(function(){var vt=function(){if(Y){var l=window.innerWidth-80,p=window.innerHeight-140,i=p>l,e=Y.width>Y.height,t=m||(i||e?"single":"double"),a=Y.width/Y.height,r=t==="double"?a*2:a,n=l/p,s=p,d=p*r;n<r&&(d=l,s=l/r),ft({width:d,height:s,display:t})}};return vt(),window.addEventListener("resize",vt),function(){return window.removeEventListener("resize",vt)}},[Y,m]),k}function nt(){var Y=(0,b.useRef)(null),m=(0,b.useRef)(null),it=(0,b.useState)(1),U=D()(it,2),k=U[0],ft=U[1],vt=(0,b.useState)(1),Tt=D()(vt,2),l=Tt[0],p=Tt[1],i=(0,b.useState)([]),e=D()(i,2),t=e[0],a=e[1],r=t.length>0&&t.slice(0,2).every(function(h){return h.status==="loaded"||h.status==="error"}),n=(0,b.useState)(!0),s=D()(n,2),d=s[0],z=s[1],v=(0,b.useRef)(null),y=(0,b.useState)(),E=D()(y,2),V=E[0],O=E[1],jt=(0,b.useState)(),tt=D()(jt,2),mt=tt[0],zt=tt[1],x=Wt(V,mt),wt=k>1,ut=(0,b.useRef)(),ot=function(){var o=x.display==="single"?"double":"single";zt(o)},lt=(0,b.useState)({left:0,right:10}),xt=D()(lt,2),B=xt[0],Et=xt[1],Dt=(0,b.useState)(!1),Q=D()(Dt,2),kt=Q[0],C=Q[1],Xt=(0,b.useState)(""),yt=D()(Xt,2),bt=yt[0],ht=yt[1],dt=(0,b.useState)({x:0,y:0}),_t=D()(dt,2),Pt=_t[0],P=_t[1],H=(0,b.useState)(0),j=D()(H,2),F=j[0],Mt=j[1],$=(0,b.useRef)({isPanning:!1,startX:0,startY:0,startPanX:0,startPanY:0}),Z=(0,b.useRef)(1),S=(0,b.useRef)({tracking:!1,direction:null,startX:0,startY:0});(0,b.useEffect)(function(){k<=1&&P({x:0,y:0})},[k]);var f=gt.length,et=(0,b.useCallback)(function(h,o){var g=Math.min(h+o,f);a(function(T){for(var M=_()(T),X=function(R){var J=M[R];if(J&&(J.status==="unloaded"||J.status==="error")){M[R]=W()(W()({},M[R]),{},{status:"loading"});var L=new Image;L.onload=function(){a(function(st){var at=_()(st);return at[R]&&(at[R]=W()(W()({},at[R]),{},{status:"loaded"})),at})},L.onerror=function(){console.error("Failed to load page image",{pageIndex:R,src:J.page.src}),a(function(st){var at=_()(st);return at[R]&&(at[R]=W()(W()({},at[R]),{},{status:"error"})),at})},L.src=J.page.src}},q=h;q<g;q++)X(q);return M})},[f]),Ht=(0,b.useCallback)(function(h){et(h,1)},[et]);(0,b.useEffect)(function(){if(x.display==="double"){var h=10,o=Math.max(1,l),g=Math.max(0,h*(1-o/f)),T=h-g;Et({left:T,right:g})}},[l,f,x.display]);var $t=function(){z(!0),v.current&&clearTimeout(v.current),v.current=setTimeout(function(){z(!1)},3e3)};(0,b.useEffect)(function(){return window.addEventListener("mousemove",$t),function(){window.removeEventListener("mousemove",$t),v.current&&clearTimeout(v.current)}},[]);var Rt=function(o){var g=N(m.current);g&&g.turn&&g.turn("page",o)},Gt=function(){ht(String(l)),C(!0)},Qt=function(o){if(o.key==="Enter"){var g=parseInt(bt,10);!isNaN(g)&&g>=1&&g<=f&&Rt(g),C(!1)}o.key==="Escape"&&C(!1)},te=function(){var o=parseInt(bt,10);!isNaN(o)&&o>=1&&o<=f&&Rt(o),C(!1)},ee=function(){return Rt(1)},Nt=function(){var o=N(m.current);o&&o.turn&&o.turn("previous")},Bt=function(){var o=N(m.current);o&&o.turn&&o.turn("next")},ae=function(){return Rt(f)},qt=function(o){if(!(k<=1)){o.stopPropagation(),$.current.isPanning=!0;var g="touches"in o.nativeEvent?o.nativeEvent.touches[0]:o.nativeEvent;$.current.startX=g.clientX,$.current.startY=g.clientY,$.current.startPanX=Pt.x,$.current.startPanY=Pt.y,o.currentTarget.style.cursor="grabbing"}},Kt=function(o){if(!(!$.current.isPanning||k<=1)){o.preventDefault(),o.stopPropagation();var g="touches"in o.nativeEvent?o.nativeEvent.touches[0]:o.nativeEvent,T=g.clientX-$.current.startX,M=g.clientY-$.current.startY;P({x:$.current.startPanX+T,y:$.current.startPanY+M})}},Vt=function(o){$.current.isPanning&&(o.stopPropagation(),$.current.isPanning=!1,o.currentTarget.style.cursor="grab")},Lt=function(){S.current.tracking=!1,S.current.direction=null},re=function(o){if(o.button===0){if(k>1){qt(o);return}o.stopPropagation(),S.current.tracking=!0,S.current.direction=null,S.current.startX=o.clientX,S.current.startY=o.clientY}},ne=function(o){if(k>1){Kt(o);return}if(S.current.tracking){var g=o.clientX-S.current.startX,T=o.clientY-S.current.startY,M=Math.abs(g)>Math.abs(T)*1.5;M&&Math.abs(g)>30&&(S.current.direction=g>0?"right":"left",o.preventDefault(),o.stopPropagation())}},ie=function(o){if(k>1){Vt(o);return}if(S.current.tracking){var g=S.current.direction;Lt(),g&&(g==="left"?Bt():Nt())}},se=function(o){if(k>1){Vt(o);return}Lt()},oe=function(o){if(k>1){qt(o);return}if(o.touches.length!==1){Lt();return}var g=o.touches[0];S.current.tracking=!0,S.current.direction=null,S.current.startX=g.clientX,S.current.startY=g.clientY},le=function(o){if(k>1){Kt(o);return}if(!(!S.current.tracking||o.touches.length!==1)){var g=o.touches[0],T=g.clientX-S.current.startX,M=g.clientY-S.current.startY,X=Math.abs(T)>Math.abs(M)*1.5;X&&Math.abs(T)>30&&(S.current.direction=T>0?"right":"left",o.preventDefault())}},Ut=function(o){if(k>1){Vt(o);return}if(S.current.tracking){var g=S.current.direction;Lt(),g&&(g==="left"?Bt():Nt())}};(0,b.useEffect)(function(){if(!(!r||!m.current||!x.width||!x.height||!f||f===0)){var h=N(m.current),o=Z.current;if(h.turn("is")){var g=h.turn("page");o=Math.max(1,Math.min(g||Z.current,f))}else o=Math.max(1,Math.min(Z.current,f));Z.current=o;var T=Math.max(1,o-2),M=Math.min(f,o+2),X=T-1,q=M-X;q>0&&et(X,q);var A,R,J,L=0,st=100,at=function ct(){if(!f||f===0){L<st?(L++,A=requestAnimationFrame(ct)):console.error("Cannot initialize: total is 0 or invalid");return}if(t.length!==f){L<st?(L++,L%10===0&&console.log("Waiting for pagesWithStatus... (retry ".concat(L,"/").concat(st,", state: ").concat(t.length,"/").concat(f,")")),A=requestAnimationFrame(ct)):console.error("Cannot initialize: pagesWithStatus not ready",{pagesWithStatusLength:t.length,total:f});return}if(!m.current){L<st?(L++,A=requestAnimationFrame(ct)):console.error("Cannot initialize: flipbookRef.current is null");return}var pe=N(m.current),Ct=pe.children();if(Ct.length!==f&&L<st){L++,L%10===0&&console.log("Waiting for page elements in DOM... (retry ".concat(L,"/").concat(st,", found ").concat(Ct.length,"/").concat(f,")")),A=requestAnimationFrame(ct);return}if(Ct.length===0){console.error("No page elements found when initializing turn.js",{retryCount:L,total:f,pagesWithStatusLength:t.length,flipbookRefExists:!!m.current,pageElementsLength:Ct.length,flipbookHTML:m.current.innerHTML.substring(0,200)}),Mt(function(Yt){return Yt+1});return}Ct.length!==f&&console.warn("Page count mismatch: expected ".concat(f,", found ").concat(Ct.length,". Continuing anyway.")),R=requestAnimationFrame(function(){requestAnimationFrame(function(){J=setTimeout(function(){if(!(!m.current||!f||f===0)){var Yt=N(m.current),Ft=Yt.children();if(Ft.length===0){console.error("Page elements disappeared before turn.js initialization",{total:f,pagesWithStatusLength:t.length});return}Ft.length!==f&&console.warn("Expected ".concat(f," pages but found ").concat(Ft.length,". Initializing anyway."));try{Yt.turn({width:x.width,height:x.height,autoCenter:!0,duration:800,gradients:!0,elevation:60,acceleration:!0,display:x.display,page:o,pages:f}),Z.current=o,p(o),console.log("turn.js initialized successfully with ".concat(Ft.length," pages"))}catch(ge){console.error("Error initializing turn.js:",ge,{total:f,pageElementsLength:Ft.length,pagesWithStatusLength:t.length,layout:x})}}},150)})})};return A=requestAnimationFrame(function(){requestAnimationFrame(function(){requestAnimationFrame(at)})}),function(){A&&cancelAnimationFrame(A),R&&cancelAnimationFrame(R),J&&clearTimeout(J);var ct=N(m.current);ct&&ct.turn("is")&&ct.turn("destroy")}}},[r,f,et,F]),(0,b.useEffect)(function(){if(!(!r||!m.current)){var h=null,o=null,g=function T(){if(m.current){var M=N(m.current);if(!M.turn||!M.turn("is")){h=requestAnimationFrame(T);return}var X=function(R,J){Z.current=J,p(J)},q=function(){if(M.turn("is")){var R=M.turn("page"),J=M.turn("display")==="double";M.removeClass("shadow first-page-shadow last-page-shadow"),J?R===1?M.addClass("first-page-shadow"):R===f?M.addClass("last-page-shadow"):M.addClass("shadow"):M.addClass("shadow")}};M.on("turning",X),M.on("turned",q),q(),o=function(){M.off("turning",X),M.off("turned",q)}}};return g(),function(){h&&cancelAnimationFrame(h),o&&o()}}},[r,f,x.display,F]),(0,b.useEffect)(function(){if(m.current){var h=N(m.current);h.turn("is")&&h.turn("size",x.width,x.height)}},[x.width,x.height]),(0,b.useEffect)(function(){if(!(!r||!m.current)){var h=N(m.current);if(h.turn&&h.turn("is"))try{h.turn("display",x.display);var o=Math.max(1,Math.min(Z.current,f));h.turn("page",o)}catch(g){console.error("Failed to adjust display mode. Reinitializing...",g),Mt(function(T){return T+1})}else r&&Mt(function(g){return g+1})}},[x.display,r,f]),(0,b.useEffect)(function(){if(!r){ut.current=x.display;return}ut.current&&ut.current!==x.display&&Mt(function(h){return h+1}),ut.current=x.display},[x.display,r]),(0,b.useLayoutEffect)(function(){if(r&&x.display==="single"&&m.current){var h=null,o=null,g=function(){if(m.current){var X=N(m.current);if(!(!X.turn||!X.turn("is"))){var q=X.data().turn;if(q){var A=m.current.querySelector(".page.p-temporal");A||(A=document.createElement("div"),A.className="page p-temporal",m.current.insertBefore(A,m.current.firstChild)),A.style.width="".concat(x.width,"px"),A.style.height="".concat(x.height,"px"),q.pageObjs[0]=N(A)}}}},T=function M(){if(m.current){var X=N(m.current);if(!X.turn||!X.turn("is")){o=requestAnimationFrame(M);return}g(),h=new MutationObserver(function(){if(m.current){var q=m.current.querySelector(".page.p-temporal");q||g()}}),h.observe(m.current,{childList:!0})}};return T(),function(){var M;o&&cancelAnimationFrame(o),(M=h)===null||M===void 0||M.disconnect()}}},[r,x.display,x.width,x.height,F]),(0,b.useEffect)(function(){if(gt.length>0){var h=gt[0],o=new Image;o.onload=function(){O({width:o.naturalWidth,height:o.naturalHeight})},o.src=h.src,a(gt.map(function(g){return{page:g,status:"unloaded"}})),Z.current=1}},[]),(0,b.useEffect)(function(){if(f&&t.length===f){var h=Math.max(1,l-2),o=Math.min(f,l+2),g=h-1,T=o-g;T>0&&et(g,T)}},[l,f,et,t.length]);var he=(0,b.useMemo)(function(){return t.map(function(h,o){var g;return h.status==="loaded"?g=(0,c.jsx)("img",{src:h.page.src,alt:h.page.title,draggable:!1}):h.status==="error"?g=(0,c.jsxs)("div",{className:w.pageLoader,children:[(0,c.jsx)("div",{className:w.loaderText,children:"\u52A0\u8F7D\u5931\u8D25"}),(0,c.jsx)("button",{className:w.retryBtn,onClick:function(){return Ht(o)},children:"\u91CD\u8BD5"})]}):g=(0,c.jsx)("div",{className:w.pageLoader,children:(0,c.jsx)("div",{className:w.loaderSpinner})}),(0,c.jsxs)("div",{className:"".concat(w.page," ").concat(o===0||o===f-1?w.hard:""," whh"),children:[g,(0,c.jsx)("div",{className:w.gradient})]},h.page.id)})},[t,f,Ht]),de=(0,b.useMemo)(function(){var h={width:B.left,display:x.display==="double"&&l>2?"block":"none"};return l===f?h.left=x.width/4-B.left:h.left=-B.left,h},[l,f,x,B.left]),ue=(0,b.useMemo)(function(){var h={width:B.right,display:x.display==="double"&&l<f&&l>1?"block":"none"};return l===1?h.right=x.width/4-B.right:h.right=-B.right,h},[l,f,x,B.right]),ce=(0,b.useMemo)(function(){if(x.display==="double"){if(l===1)return"1";if(l===f)return"".concat(f);var h=l%2===0?l:l-1,o=h+1;return"".concat(h,"-").concat(o)}return String(l)},[l,f,x.display]);return(0,c.jsxs)("div",{className:"".concat(w.viewer," ").concat(d?"":w.controlsHidden),children:[(0,c.jsxs)("div",{className:"".concat(w.topBar," ").concat(d?"":w.hidden),"data-zoomed":wt,children:[(0,c.jsxs)("div",{className:w.topBarLeft,children:[(0,c.jsx)("button",{className:w.iconBtn,onClick:Nt,"aria-label":"\u4E0A\u4E00\u9875",children:(0,c.jsx)(K.YFh,{})}),(0,c.jsx)("button",{className:w.iconBtn,onClick:Bt,"aria-label":"\u4E0B\u4E00\u9875",children:(0,c.jsx)(K.Tfp,{})})]}),(0,c.jsxs)("div",{className:w.topBarCenter,children:[(0,c.jsx)("button",{className:w.iconBtn,onClick:function(){return ft(Math.max(.5,k-.1))},children:(0,c.jsx)(K.gjP,{})}),(0,c.jsxs)("div",{className:w.zoomDisplay,children:[Math.round(k*100),"%"]}),(0,c.jsx)("button",{className:w.iconBtn,onClick:function(){return ft(Math.min(3,k+.1))},children:(0,c.jsx)(K.SJS,{})}),(0,c.jsx)("button",{className:w.iconBtn,onClick:function(){return ft(1)},children:(0,c.jsx)(K.ABE,{})}),(0,c.jsx)("button",{className:w.iconBtn,onClick:ot,children:(0,c.jsx)(K.hbr,{})})]}),(0,c.jsx)("div",{className:w.topBarRight})]}),(0,c.jsx)("div",{className:w.stageWrap,onMouseDownCapture:re,onMouseMoveCapture:ne,onMouseUpCapture:ie,onMouseLeave:se,onTouchStart:oe,onTouchMove:le,onTouchEnd:Ut,onTouchCancel:Ut,style:{cursor:k>1?"grab":"default"},children:(0,c.jsx)("div",{ref:Y,className:w.stage,style:u()({width:x.width,height:x.height},"--zoom",k),children:(0,c.jsxs)("div",{style:{transform:"translate(".concat(Pt.x,"px, ").concat(Pt.y,"px)")},children:[!r&&(0,c.jsx)("div",{className:w.progressOverlay,children:(0,c.jsx)("div",{className:w.loader,children:(0,c.jsx)("div",{className:w.loaderText,children:"\u52A0\u8F7D\u4E2D..."})})}),(0,c.jsx)("div",{className:w.leftEdge,style:de}),(0,c.jsx)("div",{ref:m,className:"".concat(w.flipbook," ").concat(x.display==="double"?"double":"single"),children:he},F),(0,c.jsx)("div",{className:w.rightEdge,style:ue})]})})}),(0,c.jsxs)("div",{className:"".concat(w.controls," ").concat(d?"":w.hidden),children:[(0,c.jsx)("div",{}),(0,c.jsxs)("div",{className:w.controlsCenter,children:[(0,c.jsx)("button",{className:w.iconBtn,onClick:ee,children:(0,c.jsx)(K.JHF,{})}),(0,c.jsx)("button",{className:w.iconBtn,onClick:Nt,children:(0,c.jsx)(K.YFh,{})}),(0,c.jsx)("div",{className:w.pageDisplay,children:kt?(0,c.jsx)("input",{type:"text",className:w.pageInput,value:bt,onChange:function(o){return ht(o.target.value)},onKeyDown:Qt,onBlur:te,autoFocus:!0}):(0,c.jsxs)("span",{onClick:Gt,children:[ce," / ",f]})}),(0,c.jsx)("button",{className:w.iconBtn,onClick:Bt,children:(0,c.jsx)(K.Tfp,{})}),(0,c.jsx)("button",{className:w.iconBtn,onClick:ae,children:(0,c.jsx)(K.qhs,{})})]}),(0,c.jsx)("div",{})]})]})}function St(){return(0,c.jsx)("div",{className:"app-root",children:(0,c.jsx)(nt,{})})}}}]);
