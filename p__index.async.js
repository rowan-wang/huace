(self.webpackChunkhuace_viewer=self.webpackChunkhuace_viewer||[]).push([[866],{72655:function(Gt,Zt,W){var b=W(19755),Ot=W(18698).default;(function(d){function At(i,e,t){if(!t[0]||Ot(t[0])=="object")return e.init.apply(i,t);if(e[t[0]])return e[t[0]].apply(i,Array.prototype.slice.call(t,1));throw rt(t[0]+" is not a method or property")}function D(i,e,t,a){return{css:{position:"absolute",top:i,left:e,overflow:a||"hidden",zIndex:t||"auto"}}}function It(i,e,t,a,r){var n=1-r,s=n*n*n,u=r*r*r;return _(Math.round(s*i.x+3*r*n*n*e.x+3*r*r*n*t.x+u*a.x),Math.round(s*i.y+3*r*n*n*e.y+3*r*r*n*t.y+u*a.y))}function _(i,e){return{x:i,y:e}}function pt(i,e,t){return B&&t?" translate3d("+i+"px,"+e+"px, 0px) ":" translate("+i+"px, "+e+"px) "}function R(i){return" rotate("+i+"deg) "}function G(i,e){return Object.prototype.hasOwnProperty.call(e,i)}function gt(){for(var i=["Moz","Webkit","Khtml","O","ms"],e=i.length,t="";e--;)i[e]+"Transform"in document.body.style&&(t="-"+i[e].toLowerCase()+"-");return t}function U(i,e,t,a,r){var n,s=[];if(nt=="-webkit-"){for(n=0;n<r;n++)s.push("color-stop("+a[n][0]+", "+a[n][1]+")");i.css({"background-image":"-webkit-gradient(linear, "+e.x+"% "+e.y+"%,"+t.x+"% "+t.y+"%, "+s.join(",")+" )"})}else{var e={x:e.x/100*i.width(),y:e.y/100*i.height()},t={x:t.x/100*i.width(),y:t.y/100*i.height()},v=t.x-e.x;n=t.y-e.y;var u=Math.atan2(n,v),j=u-Math.PI/2,j=Math.abs(i.width()*Math.sin(j))+Math.abs(i.height()*Math.cos(j)),v=Math.sqrt(n*n+v*v),t=_(t.x<e.x?i.width():0,t.y<e.y?i.height():0),x=Math.tan(u);for(n=-1/x,x=(n*t.x-t.y-x*e.x+e.y)/(n-x),t=n*x-n*t.x+t.y,e=Math.sqrt(Math.pow(x-e.x,2)+Math.pow(t-e.y,2)),n=0;n<r;n++)s.push(" "+a[n][1]+" "+100*(e+v*a[n][0])/j+"%");i.css({"background-image":nt+"linear-gradient("+-u+"rad,"+s.join(",")+")"})}}function w(i,e,t){return i=d.Event(i),e.trigger(i,t),i.isDefaultPrevented()?"prevented":i.isPropagationStopped()?"stopped":""}function rt(i){function e(t){this.name="TurnJsError",this.message=t}return e.prototype=Error(),e.prototype.constructor=e,new e(i)}function p(i){var e={top:0,left:0};do e.left+=i.offsetLeft,e.top+=i.offsetTop;while(i=i.offsetParent);return e}var B,Wt,nt="",St=Math.PI,Z=St/2,f="ontouchstart"in window,it=f?{down:"touchstart",move:"touchmove",up:"touchend",over:"touchstart",out:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup",over:"mouseover",out:"mouseout"},J={backward:["bl","tl"],forward:["br","tr"],all:"tl bl tr br l r".split(" ")},F=["single","double"],ft=["ltr","rtl"],vt={acceleration:!0,display:"double",duration:600,page:1,gradients:!0,turnCorners:"bl,br",when:null},Tt={cornerSize:100},h={init:function(s){B="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style;var t;Wt=(t=/AppleWebkit\/([0-9\.]+)/i.exec(navigator.userAgent))?534.3<parseFloat(t[1]):!0,nt=gt();var a;t=0;var r=this.data(),n=this.children(),s=d.extend({width:this.width(),height:this.height(),direction:this.attr("dir")||this.css("direction")||"ltr"},vt,s);if(r.opts=s,r.pageObjs={},r.pages={},r.pageWrap={},r.pageZoom={},r.pagePlace={},r.pageMv=[],r.zoom=1,r.totalPages=s.pages||0,r.eventHandlers={touchStart:d.proxy(h._touchStart,this),touchMove:d.proxy(h._touchMove,this),touchEnd:d.proxy(h._touchEnd,this),start:d.proxy(h._eventStart,this)},s.when)for(a in s.when)G(a,s.when)&&this.bind(a,s.when[a]);for(this.css({position:"relative",width:s.width,height:s.height}),this.turn("display",s.display),s.direction!==""&&this.turn("direction",s.direction),B&&!f&&s.acceleration&&this.transform(pt(0,0,!0)),a=0;a<n.length;a++)d(n[a]).attr("ignore")!="1"&&this.turn("addPage",n[a],++t);return d(this).bind(it.down,r.eventHandlers.touchStart).bind("end",h._eventEnd).bind("pressed",h._eventPressed).bind("released",h._eventReleased).bind("flip",h._flip),d(this).parent().bind("start",r.eventHandlers.start),d(document).bind(it.move,r.eventHandlers.touchMove).bind(it.up,r.eventHandlers.touchEnd),this.turn("page",s.page),r.done=!0,this},addPage:function(e,t){var a,r=!1,n=this.data(),s=n.totalPages+1;if(n.destroying)return!1;if((a=/\bp([0-9]+)\b/.exec(d(e).attr("class")))&&(t=parseInt(a[1],10)),t){if(t==s)r=!0;else if(t>s)throw rt('Page "'+t+'" cannot be inserted')}else t=s,r=!0;return 1<=t&&t<=s&&(a=n.display=="double"?t%2?" odd":" even":"",n.done&&this.turn("stop"),t in n.pageObjs&&h._movePages.call(this,t,1),r&&(n.totalPages=s),n.pageObjs[t]=d(e).css({float:"left"}).addClass("page p"+t+a),navigator.userAgent.indexOf("MSIE 9.0")!=-1&&n.pageObjs[t].hasClass("hard")&&n.pageObjs[t].removeClass("hard"),h._addPage.call(this,t),h._removeFromDOM.call(this)),this},_addPage:function(e){var t=this.data(),a=t.pageObjs[e];if(a)if(h._necessPage.call(this,e)){if(!t.pageWrap[e]){t.pageWrap[e]=d("<div/>",{class:"page-wrapper",page:e,css:{position:"absolute",overflow:"hidden"}}),this.append(t.pageWrap[e]),t.pagePlace[e]||(t.pagePlace[e]=e,t.pageObjs[e].appendTo(t.pageWrap[e]));var r=h._pageSize.call(this,e,!0);a.css({width:r.width,height:r.height}),t.pageWrap[e].css(r)}t.pagePlace[e]==e&&h._makeFlip.call(this,e)}else t.pagePlace[e]=0,t.pageObjs[e]&&t.pageObjs[e].remove()},hasPage:function(e){return G(e,this.data().pageObjs)},center:function(e){var t=this.data(),a=d(this).turn("size"),r=0;return t.noCenter||(t.display=="double"&&(e=this.turn("view",e||t.tpage||t.page),t.direction=="ltr"?e[0]?e[1]||(r+=a.width/4):r-=a.width/4:e[0]?e[1]||(r-=a.width/4):r+=a.width/4),d(this).css({marginLeft:r})),this},destroy:function(){var e=this,t=this.data(),a="end first flip last pressed released start turning turned zooming missing".split(" ");if(w("destroying",this)!="prevented"){for(t.destroying=!0,d.each(a,function(r,n){e.unbind(n)}),this.parent().unbind("start",t.eventHandlers.start),d(document).unbind(it.move,t.eventHandlers.touchMove).unbind(it.up,t.eventHandlers.touchEnd);t.totalPages!==0;)this.turn("removePage",t.totalPages);return t.fparent&&t.fparent.remove(),t.shadow&&t.shadow.remove(),this.removeData(),t=null,this}},is:function(){return Ot(this.data().pages)=="object"},zoom:function(e){var t=this.data();if(typeof e=="number"){if(.001>e||100<e)throw rt(e+" is not a value for zoom");if(w("zooming",this,[e,t.zoom])=="prevented")return this;var s=this.turn("size"),a=this.turn("view"),r=1/t.zoom,n=Math.round(s.width*r*e),s=Math.round(s.height*r*e);for(t.zoom=e,d(this).turn("stop").turn("size",n,s),t.opts.autoCenter&&this.turn("center"),h._updateShadow.call(this),e=0;e<a.length;e++)a[e]&&t.pageZoom[a[e]]!=t.zoom&&(this.trigger("zoomed",[a[e],a,t.pageZoom[a[e]],t.zoom]),t.pageZoom[a[e]]=t.zoom);return this}return t.zoom},_pageSize:function(e,t){var a=this.data(),r={};if(a.display=="single")r.width=this.width(),r.height=this.height(),t&&(r.top=0,r.left=0,r.right="auto");else{var n=this.width()/2,s=this.height();if(a.pageObjs[e].hasClass("own-size")?(r.width=a.pageObjs[e].width(),r.height=a.pageObjs[e].height()):(r.width=n,r.height=s),t){var u=e%2;r.top=(s-r.height)/2,a.direction=="ltr"?(r[u?"right":"left"]=n-r.width,r[u?"left":"right"]="auto"):(r[u?"left":"right"]=n-r.width,r[u?"right":"left"]="auto")}}return r},_makeFlip:function(e){var t=this.data();if(!t.pages[e]&&t.pagePlace[e]==e){var a=t.display=="single",r=e%2;t.pages[e]=t.pageObjs[e].css(h._pageSize.call(this,e)).flip({page:e,next:r||a?e+1:e-1,turn:this}).flip("disable",t.disabled),h._setPageLoc.call(this,e),t.pageZoom[e]=t.zoom}return t.pages[e]},_makeRange:function(){var e,t;if(!(1>this.data().totalPages))for(t=this.turn("range"),e=t[0];e<=t[1];e++)h._addPage.call(this,e)},range:function(s){var t,a,r,n=this.data(),s=s||n.tpage||n.page||1;if(r=h._view.call(this,s),1>s||s>n.totalPages)throw rt('"'+s+'" is not a valid page');return r[1]=r[1]||r[0],1<=r[0]&&r[1]<=n.totalPages?(s=Math.floor(2),n.totalPages-r[1]>r[0]?(t=Math.min(r[0]-1,s),a=2*s-t):(a=Math.min(n.totalPages-r[1],s),t=2*s-a)):a=t=5,[Math.max(1,r[0]-t),Math.min(n.totalPages,r[1]+a)]},_necessPage:function(e){if(e===0)return!0;var t=this.turn("range");return this.data().pageObjs[e].hasClass("fixed")||e>=t[0]&&e<=t[1]},_removeFromDOM:function(){var e,t=this.data();for(e in t.pageWrap)G(e,t.pageWrap)&&!h._necessPage.call(this,e)&&h._removePageFromDOM.call(this,e)},_removePageFromDOM:function(e){var t=this.data();if(t.pages[e]){var a=t.pages[e].data();g._moveFoldingPage.call(t.pages[e],!1),a.f&&a.f.fwrapper&&a.f.fwrapper.remove(),t.pages[e].removeData(),t.pages[e].remove(),delete t.pages[e]}t.pageObjs[e]&&t.pageObjs[e].remove(),t.pageWrap[e]&&(t.pageWrap[e].remove(),delete t.pageWrap[e]),h._removeMv.call(this,e),delete t.pagePlace[e],delete t.pageZoom[e]},removePage:function(e){var t=this.data();if(e=="*")for(;t.totalPages!==0;)this.turn("removePage",t.totalPages);else{if(1>e||e>t.totalPages)throw rt("The page "+e+" doesn't exist");t.pageObjs[e]&&(this.turn("stop"),h._removePageFromDOM.call(this,e),delete t.pageObjs[e]),h._movePages.call(this,e,-1),t.totalPages-=1,t.page>t.totalPages?(t.page=null,h._fitPage.call(this,t.totalPages)):(h._makeRange.call(this),this.turn("update"))}return this},_movePages:function(e,t){var a,r=this,n=this.data(),s=n.display=="single",u=function(v){var x=v+t,T=x%2,V=T?" odd ":" even ";n.pageObjs[v]&&(n.pageObjs[x]=n.pageObjs[v].removeClass("p"+v+" odd even").addClass("p"+x+V)),n.pagePlace[v]&&n.pageWrap[v]&&(n.pagePlace[x]=x,n.pageWrap[x]=n.pageObjs[x].hasClass("fixed")?n.pageWrap[v].attr("page",x):n.pageWrap[v].css(h._pageSize.call(r,x,!0)).attr("page",x),n.pages[v]&&(n.pages[x]=n.pages[v].flip("options",{page:x,next:s||T?x+1:x-1})),t&&(delete n.pages[v],delete n.pagePlace[v],delete n.pageZoom[v],delete n.pageObjs[v],delete n.pageWrap[v]))};if(0<t)for(a=n.totalPages;a>=e;a--)u(a);else for(a=e;a<=n.totalPages;a++)u(a)},display:function(e){var t=this.data(),a=t.display;if(e===void 0)return a;if(d.inArray(e,F)==-1)throw rt('"'+e+'" is not a value for display');switch(e){case"single":t.pageObjs[0]||(this.turn("stop").css({overflow:"hidden"}),t.pageObjs[0]=d("<div />",{class:"page p-temporal"}).css({width:this.width(),height:this.height()}).appendTo(this)),this.addClass("shadow");break;case"double":t.pageObjs[0]&&(this.turn("stop").css({overflow:""}),t.pageObjs[0].remove(),delete t.pageObjs[0]),this.removeClass("shadow")}return t.display=e,a&&(e=this.turn("size"),h._movePages.call(this,1,0),this.turn("size",e.width,e.height).turn("update")),this},direction:function(e){var t=this.data();if(e===void 0)return t.direction;if(e=e.toLowerCase(),d.inArray(e,ft)==-1)throw rt('"'+e+'" is not a value for direction');return e=="rtl"&&d(this).attr("dir","ltr").css({direction:"ltr"}),t.direction=e,t.done&&this.turn("size",d(this).width(),d(this).height()),this},animating:function(){return 0<this.data().pageMv.length},corner:function(){var e,t,a=this.data();for(t in a.pages)if(G(t,a.pages)&&(e=a.pages[t].flip("corner")))return e;return!1},data:function(){return this.data()},disable:function(e){var t,a=this.data(),r=this.turn("view");a.disabled=e===void 0||e===!0;for(t in a.pages)G(t,a.pages)&&a.pages[t].flip("disable",a.disabled?!0:d.inArray(parseInt(t,10),r)==-1);return this},disabled:function(e){return e===void 0?this.data().disabled===!0:this.turn("disable",e)},size:function(e,t){if(e===void 0||t===void 0)return{width:this.width(),height:this.height()};this.turn("stop");var a,r,n=this.data();r=n.display=="double"?e/2:e,this.css({width:e,height:t}),n.pageObjs[0]&&n.pageObjs[0].css({width:r,height:t});for(a in n.pageWrap)G(a,n.pageWrap)&&(r=h._pageSize.call(this,a,!0),n.pageObjs[a].css({width:r.width,height:r.height}),n.pageWrap[a].css(r),n.pages[a]&&n.pages[a].css({width:r.width,height:r.height}));return this.turn("resize"),this},resize:function(){var e,t=this.data();for(t.pages[0]&&(t.pageWrap[0].css({left:-this.width()}),t.pages[0].flip("resize",!0)),e=1;e<=t.totalPages;e++)t.pages[e]&&t.pages[e].flip("resize",!0);h._updateShadow.call(this),t.opts.autoCenter&&this.turn("center")},_removeMv:function(e){var t,a=this.data();for(t=0;t<a.pageMv.length;t++)if(a.pageMv[t]==e)return a.pageMv.splice(t,1),!0;return!1},_addMv:function(e){var t=this.data();h._removeMv.call(this,e),t.pageMv.push(e)},_view:function(a){var t=this.data(),a=a||t.page;return t.display=="double"?a%2?[a-1,a]:[a,a+1]:[a]},view:function(a){var t=this.data(),a=h._view.call(this,a);return t.display=="double"?[0<a[0]?a[0]:0,a[1]<=t.totalPages?a[1]:0]:[0<a[0]&&a[0]<=t.totalPages?a[0]:0]},stop:function(e,t){if(this.turn("animating")){var a,r,n,s=this.data();for(s.tpage&&(s.page=s.tpage,delete s.tpage),a=0;a<s.pageMv.length;a++)s.pageMv[a]&&s.pageMv[a]!==e&&(n=s.pages[s.pageMv[a]],r=n.data().f.opts,n.flip("hideFoldedPage",t),t||g._moveFoldingPage.call(n,!1),r.force&&(r.next=r.page%2===0?r.page-1:r.page+1,delete r.force))}return this.turn("update"),this},pages:function(e){var t=this.data();if(e){if(e<t.totalPages)for(var a=t.totalPages;a>e;a--)this.turn("removePage",a);return t.totalPages=e,h._fitPage.call(this,t.page),this}return t.totalPages},_missing:function(e){var t=this.data();if(!(1>t.totalPages)){for(var a=this.turn("range",e),r=[],e=a[0];e<=a[1];e++)t.pageObjs[e]||r.push(e);0<r.length&&this.trigger("missing",[r])}},_fitPage:function(e){var t=this.data(),a=this.turn("view",e);if(h._missing.call(this,e),t.pageObjs[e]){t.page=e,this.turn("stop");for(var r=0;r<a.length;r++)a[r]&&t.pageZoom[a[r]]!=t.zoom&&(this.trigger("zoomed",[a[r],a,t.pageZoom[a[r]],t.zoom]),t.pageZoom[a[r]]=t.zoom);h._removeFromDOM.call(this),h._makeRange.call(this),h._updateShadow.call(this),this.trigger("turned",[e,a]),this.turn("update"),t.opts.autoCenter&&this.turn("center")}},_turnPage:function(e){var t,a,r=this.data(),n=r.pagePlace[e],s=this.turn("view"),u=this.turn("view",e);if(r.page!=e){var j=r.page;if(w("turning",this,[e,u])=="prevented"){j==r.page&&d.inArray(n,r.pageMv)!=-1&&r.pages[n].flip("hideFoldedPage",!0);return}d.inArray(1,u)!=-1&&this.trigger("first"),d.inArray(r.totalPages,u)!=-1&&this.trigger("last")}r.display=="single"?(t=s[0],a=u[0]):s[1]&&e>s[1]?(t=s[1],a=u[0]):s[0]&&e<s[0]&&(t=s[0],a=u[1]),n=r.opts.turnCorners.split(","),s=r.pages[t].data().f,u=s.opts,j=s.point,h._missing.call(this,e),r.pageObjs[e]&&(this.turn("stop"),r.page=e,h._makeRange.call(this),r.tpage=a,u.next!=a&&(u.next=a,u.force=!0),this.turn("update"),s.point=j,s.effect=="hard"?r.direction=="ltr"?r.pages[t].flip("turnPage",e>t?"r":"l"):r.pages[t].flip("turnPage",e>t?"l":"r"):r.direction=="ltr"?r.pages[t].flip("turnPage",n[e>t?1:0]):r.pages[t].flip("turnPage",n[e>t?0:1]))},page:function(e){var t=this.data();if(e===void 0)return t.page;if(!t.disabled&&!t.destroying){if(e=parseInt(e,10),0<e&&e<=t.totalPages)return e!=t.page&&(!t.done||d.inArray(e,this.turn("view"))!=-1?h._fitPage.call(this,e):h._turnPage.call(this,e)),this;throw rt("The page "+e+" does not exist")}},next:function(){return this.turn("page",Math.min(this.data().totalPages,h._view.call(this,this.data().page).pop()+1))},previous:function(){return this.turn("page",Math.max(1,h._view.call(this,this.data().page).shift()-1))},peel:function(e,n){var a=this.data(),r=this.turn("view"),n=n===void 0?!0:n===!0;return e===!1?this.turn("stop",null,n):a.display=="single"?a.pages[a.page].flip("peel",e,n):(r=a.direction=="ltr"?e.indexOf("l")!=-1?r[0]:r[1]:e.indexOf("l")!=-1?r[1]:r[0],a.pages[r]&&a.pages[r].flip("peel",e,n)),this},_addMotionPage:function(){var e=d(this).data().f.opts,t=e.turn;t.data(),h._addMv.call(t,e.page)},_eventStart:function(e,t,a){var r=t.turn.data(),n=r.pageZoom[t.page];e.isDefaultPrevented()||(n&&n!=r.zoom&&(t.turn.trigger("zoomed",[t.page,t.turn.turn("view",t.page),n,r.zoom]),r.pageZoom[t.page]=r.zoom),r.display=="single"&&a&&(a.charAt(1)=="l"&&r.direction=="ltr"||a.charAt(1)=="r"&&r.direction=="rtl"?(t.next=t.next<t.page?t.next:t.page-1,t.force=!0):t.next=t.next>t.page?t.next:t.page+1),h._addMotionPage.call(e.target)),h._updateShadow.call(t.turn)},_eventEnd:function(r,t,a){d(r.target).data();var r=t.turn,n=r.data();a?(a=n.tpage||n.page,(a==t.next||a==t.page)&&(delete n.tpage,h._fitPage.call(r,a||t.next,!0))):(h._removeMv.call(r,t.page),h._updateShadow.call(r),r.turn("update"))},_eventPressed:function(t){var t=d(t.target).data().f,a=t.opts.turn;return a.data().mouseAction=!0,a.turn("update"),t.time=new Date().getTime()},_eventReleased:function(e,t){var a;a=d(e.target);var r=a.data().f,n=r.opts.turn,s=n.data();a=s.display=="single"?t.corner=="br"||t.corner=="tr"?t.x<a.width()/2:t.x>a.width()/2:0>t.x||t.x>a.width(),(200>new Date().getTime()-r.time||a)&&(e.preventDefault(),h._turnPage.call(n,r.opts.next)),s.mouseAction=!1},_flip:function(e){e.stopPropagation(),e=d(e.target).data().f.opts,e.turn.trigger("turn",[e.next]),e.turn.data().opts.autoCenter&&e.turn.turn("center",e.next)},_touchStart:function(){var e=this.data(),t;for(t in e.pages)if(G(t,e.pages)&&g._eventStart.apply(e.pages[t],arguments)===!1)return!1},_touchMove:function(){var e=this.data(),t;for(t in e.pages)G(t,e.pages)&&g._eventMove.apply(e.pages[t],arguments)},_touchEnd:function(){var e=this.data(),t;for(t in e.pages)G(t,e.pages)&&g._eventEnd.apply(e.pages[t],arguments)},calculateZ:function(e){var t,a,r,n,s=this,u=this.data();t=this.turn("view");var j=t[0]||t[1],v=e.length-1,x={pageZ:{},partZ:{},pageV:{}},T=function(A){A=s.turn("view",A),A[0]&&(x.pageV[A[0]]=!0),A[1]&&(x.pageV[A[1]]=!0)};for(t=0;t<=v;t++)a=e[t],r=u.pages[a].data().f.opts.next,n=u.pagePlace[a],T(a),T(r),a=u.pagePlace[r]==r?r:a,x.pageZ[a]=u.totalPages-Math.abs(j-a),x.partZ[n]=2*u.totalPages-v+t;return x},update:function(){var e,t=this.data();if(this.turn("animating")&&t.pageMv[0]!==0){var a,r=this.turn("calculateZ",t.pageMv),n=this.turn("corner"),s=this.turn("view"),u=this.turn("view",t.tpage);for(e in t.pageWrap)G(e,t.pageWrap)&&(a=t.pageObjs[e].hasClass("fixed"),t.pageWrap[e].css({display:r.pageV[e]||a?"":"none",zIndex:(t.pageObjs[e].hasClass("hard")?r.partZ[e]:r.pageZ[e])||(a?-1:0)}),a=t.pages[e])&&(a.flip("z",r.partZ[e]||null),r.pageV[e]&&a.flip("resize"),t.tpage?a.flip("hover",!1).flip("disable",d.inArray(parseInt(e,10),t.pageMv)==-1&&e!=u[0]&&e!=u[1]):a.flip("hover",n===!1).flip("disable",e!=s[0]&&e!=s[1]))}else for(e in t.pageWrap)G(e,t.pageWrap)&&(r=h._setPageLoc.call(this,e),t.pages[e]&&t.pages[e].flip("disable",t.disabled||r!=1).flip("hover",!0).flip("z",null));return this},_updateShadow:function(){var e,t,a=this.data(),r=this.width(),n=this.height(),s=a.display=="single"?r:r/2;e=this.turn("view"),a.shadow||(a.shadow=d("<div />",{class:"shadow",css:D(0,0,0).css}).appendTo(this));for(var u=0;u<a.pageMv.length&&e[0]&&e[1];u++)e=this.turn("view",a.pages[a.pageMv[u]].data().f.opts.next),t=this.turn("view",a.pageMv[u]),e[0]=e[0]&&t[0],e[1]=e[1]&&t[1];switch(e[0]?e[1]?3:a.direction=="ltr"?2:1:a.direction=="ltr"?1:2){case 1:a.shadow.css({width:s,height:n,top:0,left:s});break;case 2:a.shadow.css({width:s,height:n,top:0,left:0});break;case 3:a.shadow.css({width:r,height:n,top:0,left:0})}},_setPageLoc:function(e){var t=this.data(),a=this.turn("view"),r=0;if(e==a[0]||e==a[1]?r=1:(t.display=="single"&&e==a[0]+1||t.display=="double"&&e==a[0]-2||e==a[1]+2)&&(r=2),!this.turn("animating"))switch(r){case 1:t.pageWrap[e].css({zIndex:t.totalPages,display:""});break;case 2:t.pageWrap[e].css({zIndex:t.totalPages-1,display:""});break;case 0:t.pageWrap[e].css({zIndex:0,display:t.pageObjs[e].hasClass("fixed")?"":"none"})}return r},options:function(e){if(e===void 0)return this.data().opts;var t=this.data();if(d.extend(t.opts,e),e.pages&&this.turn("pages",e.pages),e.page&&this.turn("page",e.page),e.display&&this.turn("display",e.display),e.direction&&this.turn("direction",e.direction),e.width&&e.height&&this.turn("size",e.width,e.height),e.when)for(var a in e.when)G(a,e.when)&&this.unbind(a).bind(a,e.when[a]);return this},version:function(){return"4.1.0"}},g={init:function(e){return this.data({f:{disabled:!1,hover:!1,effect:this.hasClass("hard")?"hard":"sheet"}}),this.flip("options",e),g._addPageWrapper.call(this),this},setData:function(e){var t=this.data();return t.f=d.extend(t.f,e),this},options:function(e){var t=this.data().f;return e?(g.setData.call(this,{opts:d.extend({},t.opts||Tt,e)}),this):t.opts},z:function(e){var t=this.data().f;return t.opts["z-index"]=e,t.fwrapper&&t.fwrapper.css({zIndex:e||parseInt(t.parent.css("z-index"),10)||0}),this},_cAllowed:function(){var e=this.data().f,t=e.opts.page,a=e.opts.turn.data(),r=t%2;return e.effect=="hard"?a.direction=="ltr"?[r?"r":"l"]:[r?"l":"r"]:a.display=="single"?t==1?a.direction=="ltr"?J.forward:J.backward:t==a.totalPages?a.direction=="ltr"?J.backward:J.forward:J.all:a.direction=="ltr"?J[r?"forward":"backward"]:J[r?"backward":"forward"]},_cornerActivated:function(n){var t=this.data().f,a=this.width(),r=this.height(),n={x:n.x,y:n.y,corner:""},s=t.opts.cornerSize;if(0>=n.x||0>=n.y||n.x>=a||n.y>=r)return!1;var u=g._cAllowed.call(this);switch(t.effect){case"hard":if(n.x>a-s)n.corner="r";else if(n.x<s)n.corner="l";else return!1;break;case"sheet":if(n.y<s)n.corner+="t";else if(n.y>=r-s)n.corner+="b";else return!1;if(n.x<=s)n.corner+="l";else if(n.x>=a-s)n.corner+="r";else return!1}return!n.corner||d.inArray(n.corner,u)==-1?!1:n},_isIArea:function(a){var t=this.data().f.parent.offset(),a=f&&a.originalEvent?a.originalEvent.touches[0]:a;return g._cornerActivated.call(this,{x:a.pageX-t.left,y:a.pageY-t.top})},_c:function(e,t){switch(t=t||0,e){case"tl":return _(t,t);case"tr":return _(this.width()-t,t);case"bl":return _(t,this.height()-t);case"br":return _(this.width()-t,this.height()-t);case"l":return _(t,0);case"r":return _(this.width()-t,0)}},_c2:function(e){switch(e){case"tl":return _(2*this.width(),0);case"tr":return _(-this.width(),0);case"bl":return _(2*this.width(),this.height());case"br":return _(-this.width(),this.height());case"l":return _(2*this.width(),0);case"r":return _(-this.width(),0)}},_foldingPage:function(){var e=this.data().f;if(e){var t=e.opts;if(t.turn)return e=t.turn.data(),e.display=="single"?1<t.next||1<t.page?e.pageObjs[0]:null:e.pageObjs[t.next]}},_backGradient:function(){var e=this.data().f,t=e.opts.turn.data();return(t=t.opts.gradients&&(t.display=="single"||e.opts.page!=2&&e.opts.page!=t.totalPages-1))&&!e.bshadow&&(e.bshadow=d("<div/>",D(0,0,1)).css({position:"",width:this.width(),height:this.height()}).appendTo(e.parent)),t},type:function(){return this.data().f.effect},resize:function(e){var t=this.data().f,a=t.opts.turn.data(),r=this.width(),n=this.height();switch(t.effect){case"hard":e&&(t.wrapper.css({width:r,height:n}),t.fpage.css({width:r,height:n}),a.opts.gradients&&(t.ashadow.css({width:r,height:n}),t.bshadow.css({width:r,height:n})));break;case"sheet":e&&(e=Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(n,2))),t.wrapper.css({width:e,height:e}),t.fwrapper.css({width:e,height:e}).children(":first-child").css({width:r,height:n}),t.fpage.css({width:r,height:n}),a.opts.gradients&&t.ashadow.css({width:r,height:n}),g._backGradient.call(this)&&t.bshadow.css({width:r,height:n})),t.parent.is(":visible")&&(a=p(t.parent[0]),t.fwrapper.css({top:a.top,left:a.left}),a=p(t.opts.turn[0]),t.fparent.css({top:-a.top,left:-a.left})),this.flip("z",t.opts["z-index"])}},_addPageWrapper:function(){var e=this.data().f,t=e.opts.turn.data(),a=this.parent();if(e.parent=a,!e.wrapper)switch(e.effect){case"hard":var r={};r[nt+"transform-style"]="preserve-3d",r[nt+"backface-visibility"]="hidden",e.wrapper=d("<div/>",D(0,0,2)).css(r).appendTo(a).prepend(this),e.fpage=d("<div/>",D(0,0,1)).css(r).appendTo(a),t.opts.gradients&&(e.ashadow=d("<div/>",D(0,0,0)).hide().appendTo(a),e.bshadow=d("<div/>",D(0,0,0)));break;case"sheet":var r=this.width(),n=this.height();Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(n,2))),e.fparent=e.opts.turn.data().fparent,e.fparent||(r=d("<div/>",{css:{"pointer-events":"none"}}).hide(),r.data().flips=0,r.css(D(0,0,"auto","visible").css).appendTo(e.opts.turn),e.opts.turn.data().fparent=r,e.fparent=r),this.css({position:"absolute",top:0,left:0,bottom:"auto",right:"auto"}),e.wrapper=d("<div/>",D(0,0,this.css("z-index"))).appendTo(a).prepend(this),e.fwrapper=d("<div/>",D(a.offset().top,a.offset().left)).hide().appendTo(e.fparent),e.fpage=d("<div/>",D(0,0,0,"visible")).css({cursor:"default"}).appendTo(e.fwrapper),t.opts.gradients&&(e.ashadow=d("<div/>",D(0,0,1)).appendTo(e.fpage)),g.setData.call(this,e)}g.resize.call(this,!0)},_fold:function(e){var t=this.data().f,a=t.opts.turn.data(),r=g._c.call(this,e.corner),n=this.width(),s=this.height();switch(t.effect){case"hard":e.x=e.corner=="l"?Math.min(Math.max(e.x,0),2*n):Math.max(Math.min(e.x,n),-n);var u,j,v,x,T,V=a.totalPages,A=t.opts["z-index"]||V,jt={overflow:"visible"},tt=r.x?(r.x-e.x)/n:e.x/n,mt=90*tt,Et=90>mt;switch(e.corner){case"l":x="0% 50%",T="100% 50%",Et?(u=0,j=0<t.opts.next-1,v=1):(u="100%",j=t.opts.page+1<V,v=0);break;case"r":x="100% 50%",T="0% 50%",mt=-mt,n=-n,Et?(u=0,j=t.opts.next+1<V,v=0):(u="-100%",j=t.opts.page!=1,v=1)}jt[nt+"perspective-origin"]=T,t.wrapper.transform("rotateY("+mt+"deg)translate3d(0px, 0px, "+(this.attr("depth")||0)+"px)",T),t.fpage.transform("translateX("+n+"px) rotateY("+(180+mt)+"deg)",x),t.parent.css(jt),Et?(tt=-tt+1,t.wrapper.css({zIndex:A+1}),t.fpage.css({zIndex:A})):(tt-=1,t.wrapper.css({zIndex:A}),t.fpage.css({zIndex:A+1})),a.opts.gradients&&(j?t.ashadow.css({display:"",left:u,backgroundColor:"rgba(0,0,0,"+.5*tt+")"}).transform("rotateY(0deg)"):t.ashadow.hide(),t.bshadow.css({opacity:-tt+1}),Et?t.bshadow.parent()[0]!=t.wrapper[0]&&t.bshadow.appendTo(t.wrapper):t.bshadow.parent()[0]!=t.fpage[0]&&t.bshadow.appendTo(t.fpage),U(t.bshadow,_(100*v,0),_(100*(-v+1),0),[[0,"rgba(0,0,0,0.3)"],[1,"rgba(0,0,0,0)"]],2));break;case"sheet":var y=this,wt=0,dt,ot,lt,xt,L,zt,Dt,Q=_(0,0),kt=_(0,0),k=_(0,0),Xt=g._foldingPage.call(this);Math.tan(0);var yt=a.opts.acceleration,bt=t.wrapper.height(),ht=e.corner.substr(0,1)=="t",ut=e.corner.substr(1,1)=="l",_t=function Pt(){var P=_(0,0),$=_(0,0);P.x=r.x?r.x-e.x:e.x,P.y=Wt?r.y?r.y-e.y:e.y:0,$.x=ut?n-P.x/2:e.x+P.x/2,$.y=P.y/2;var E=Z-Math.atan2(P.y,P.x),O=E-Math.atan2($.y,$.x),O=Math.max(0,Math.sin(O)*Math.sqrt(Math.pow($.x,2)+Math.pow($.y,2)));return wt=180*(E/St),k=_(O*Math.sin(E),O*Math.cos(E)),E>Z&&(k.x+=Math.abs(k.y*P.y/P.x),k.y=0,Math.round(k.x*Math.tan(St-E))<s)?(e.y=Math.sqrt(Math.pow(s,2)+2*$.x*P.x),ht&&(e.y=s-e.y),Pt()):(E>Z&&(P=St-E,$=bt-s/Math.sin(P),Q=_(Math.round($*Math.cos(P)),Math.round($*Math.sin(P))),ut&&(Q.x=-Q.x),ht)&&(Q.y=-Q.y),dt=Math.round(k.y/Math.tan(E)+k.x),P=n-dt,$=P*Math.cos(2*E),O=P*Math.sin(2*E),kt=_(Math.round(ut?P-$:dt+$),Math.round(ht?O:s-O)),a.opts.gradients&&(L=P*Math.sin(E),P=g._c2.call(y,e.corner),P=Math.sqrt(Math.pow(P.x-e.x,2)+Math.pow(P.y-e.y,2))/n,Dt=Math.sin(Z*(1<P?2-P:P)),zt=Math.min(P,1),xt=100<L?(L-100)/L:0,ot=_(100*(L*Math.sin(E)/n),100*(L*Math.cos(E)/s)),g._backGradient.call(y)&&(lt=_(100*(1.2*L*Math.sin(E)/n),100*(1.2*L*Math.cos(E)/s)),ut||(lt.x=100-lt.x),!ht))&&(lt.y=100-lt.y),k.x=Math.round(k.x),k.y=Math.round(k.y),!0)};switch(u=function(P,X,E,O){var S=["0","auto"],Mt=(n-bt)*E[0]/100,q=(s-bt)*E[1]/100,X={left:S[X[0]],top:S[X[1]],right:S[X[2]],bottom:S[X[3]]},S={},m=O!=90&&O!=-90?ut?-1:1:0,et=E[0]+"% "+E[1]+"%";y.css(X).transform(R(O)+pt(P.x+m,P.y,yt),et),t.fpage.css(X).transform(R(O)+pt(P.x+kt.x-Q.x-n*E[0]/100,P.y+kt.y-Q.y-s*E[1]/100,yt)+R((180/O-2)*O),et),t.wrapper.transform(pt(-P.x+Mt-m,-P.y+q,yt)+R(-O),et),t.fwrapper.transform(pt(-P.x+Q.x+Mt,-P.y+Q.y+q,yt)+R(-O),et),a.opts.gradients&&(E[0]&&(ot.x=100-ot.x),E[1]&&(ot.y=100-ot.y),S["box-shadow"]="0 0 20px rgba(0,0,0,"+.5*Dt+")",Xt.css(S),U(t.ashadow,_(ut?100:0,ht?0:100),_(ot.x,ot.y),[[xt,"rgba(0,0,0,0)"],[.8*(1-xt)+xt,"rgba(0,0,0,"+.2*zt+")"],[1,"rgba(255,255,255,"+.2*zt+")"]],3,0),g._backGradient.call(y)&&U(t.bshadow,_(ut?0:100,ht?0:100),_(lt.x,lt.y),[[.6,"rgba(0,0,0,0)"],[.8,"rgba(0,0,0,"+.3*zt+")"],[1,"rgba(0,0,0,0)"]],3))},e.corner){case"tl":e.x=Math.max(e.x,1),_t(),u(k,[1,0,0,1],[100,0],wt);break;case"tr":e.x=Math.min(e.x,n-1),_t(),u(_(-k.x,k.y),[0,0,0,1],[0,0],-wt);break;case"bl":e.x=Math.max(e.x,1),_t(),u(_(k.x,-k.y),[1,1,0,0],[100,100],-wt);break;case"br":e.x=Math.min(e.x,n-1),_t(),u(_(-k.x,-k.y),[0,1,1,0],[0,100],wt)}}t.point=e},_moveFoldingPage:function(e){var t=this.data().f;if(t){var a=t.opts.turn,r=a.data(),n=r.pagePlace;e?(r=t.opts.next,n[r]!=t.opts.page&&(t.folding&&g._moveFoldingPage.call(this,!1),g._foldingPage.call(this).appendTo(t.fpage),n[r]=t.opts.page,t.folding=r),a.turn("update")):t.folding&&(r.pages[t.folding]?(a=r.pages[t.folding].data().f,r.pageObjs[t.folding].appendTo(a.wrapper)):r.pageWrap[t.folding]&&r.pageObjs[t.folding].appendTo(r.pageWrap[t.folding]),t.folding in n&&(n[t.folding]=t.folding),delete t.folding)}},_showFoldedPage:function(e,t){var a=g._foldingPage.call(this),r=this.data(),n=r.f,s=n.visible;if(a){if((!s||!n.point||n.point.corner!=e.corner)&&(a=n.status=="hover"||n.status=="peel"||n.opts.turn.data().mouseAction?e.corner:null,s=!1,w("start",this,[n.opts,a])=="prevented"))return!1;if(t){var u=this,r=n.point&&n.point.corner==e.corner?n.point:g._c.call(this,e.corner,1);this.animatef({from:[r.x,r.y],to:[e.x,e.y],duration:500,frame:function(x){e.x=Math.round(x[0]),e.y=Math.round(x[1]),g._fold.call(u,e)}})}else g._fold.call(this,e),r.effect&&!r.effect.turning&&this.animatef(!1);if(!s)switch(n.effect){case"hard":n.visible=!0,g._moveFoldingPage.call(this,!0),n.fpage.show(),n.opts.shadows&&n.bshadow.show();break;case"sheet":n.visible=!0,n.fparent.show().data().flips++,g._moveFoldingPage.call(this,!0),n.fwrapper.show(),n.bshadow&&n.bshadow.show()}return!0}return!1},hide:function(){var e=this.data().f,t=e.opts.turn.data(),a=g._foldingPage.call(this);switch(e.effect){case"hard":t.opts.gradients&&(e.bshadowLoc=0,e.bshadow.remove(),e.ashadow.hide()),e.wrapper.transform(""),e.fpage.hide();break;case"sheet":--e.fparent.data().flips===0&&e.fparent.hide(),this.css({left:0,top:0,right:"auto",bottom:"auto"}).transform(""),e.wrapper.transform(""),e.fwrapper.hide(),e.bshadow&&e.bshadow.hide(),a.transform("")}return e.visible=!1,this},hideFoldedPage:function(e){var t=this.data().f;if(t.point){var a=this,r=t.point,n=function(){t.point=null,t.status="",a.flip("hide"),a.trigger("end",[t.opts,!1])};if(e){var s=g._c.call(this,r.corner),e=r.corner.substr(0,1)=="t"?Math.min(0,r.y-s.y)/2:Math.max(0,r.y-s.y)/2,u=_(r.x,r.y+e),j=_(s.x,s.y-e);this.animatef({from:0,to:1,frame:function(T){T=It(r,u,j,s,T),r.x=T.x,r.y=T.y,g._fold.call(a,r)},complete:n,duration:800,hiding:!0})}else this.animatef(!1),n()}},turnPage:function(n){var t=this,a=this.data().f,r=a.opts.turn.data(),n={corner:a.corner?a.corner.corner:n||g._cAllowed.call(this)[0]},s=a.point||g._c.call(this,n.corner,a.opts.turn?r.opts.elevation:0),u=g._c2.call(this,n.corner);this.trigger("flip").animatef({from:0,to:1,frame:function(v){v=It(s,s,u,u,v),n.x=v.x,n.y=v.y,g._showFoldedPage.call(t,n)},complete:function(){t.trigger("end",[a.opts,!0])},duration:r.opts.duration,turning:!0}),a.corner=null},moving:function(){return"effect"in this.data()},isTurning:function(){return this.flip("moving")&&this.data().effect.turning},corner:function(){return this.data().f.corner},_eventStart:function(e){var t=this.data().f,a=t.opts.turn;if(!t.corner&&!t.disabled&&!this.flip("isTurning")&&t.opts.page==a.data().pagePlace[t.opts.page]){if(t.corner=g._isIArea.call(this,e),t.corner&&g._foldingPage.call(this))return this.trigger("pressed",[t.point]),g._showFoldedPage.call(this,t.corner),!1;t.corner=null}},_eventMove:function(e){var t=this.data().f;if(!t.disabled)if(e=f?e.originalEvent.touches:[e],t.corner){var a=t.parent.offset();t.corner.x=e[0].pageX-a.left,t.corner.y=e[0].pageY-a.top,g._showFoldedPage.call(this,t.corner)}else t.hover&&!this.data().effect&&this.is(":visible")&&((e=g._isIArea.call(this,e[0]))?(t.effect=="sheet"&&e.corner.length==2||t.effect=="hard")&&(t.status="hover",t=g._c.call(this,e.corner,t.opts.cornerSize/2),e.x=t.x,e.y=t.y,g._showFoldedPage.call(this,e,!0)):t.status=="hover"&&(t.status="",g.hideFoldedPage.call(this,!0)))},_eventEnd:function(){var e=this.data().f,t=e.corner;!e.disabled&&t&&w("released",this,[e.point||t])!="prevented"&&g.hideFoldedPage.call(this,!0),e.corner=null},disable:function(e){return g.setData.call(this,{disabled:e}),this},hover:function(e){return g.setData.call(this,{hover:e}),this},peel:function(e,t){var a=this.data().f;if(e){if(d.inArray(e,J.all)==-1)throw rt("Corner "+e+" is not permitted");if(d.inArray(e,g._cAllowed.call(this))!=-1){var r=g._c.call(this,e,a.opts.cornerSize/2);a.status="peel",g._showFoldedPage.call(this,{corner:e,x:r.x,y:r.y},t)}}else a.status="",g.hideFoldedPage.call(this,t);return this}};window.requestAnim=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)},d.extend(d.fn,{flip:function(){return At(d(this[0]),g,arguments)},turn:function(){return At(d(this[0]),h,arguments)},transform:function(e,t){var a={};return t&&(a[nt+"transform-origin"]=t),a[nt+"transform"]=e,this.css(a)},animatef:function(e){var t=this.data();if(t.effect&&t.effect.stop(),e){e.to.length||(e.to=[e.to]),e.from.length||(e.from=[e.from]);for(var a=[],r=e.to.length,n=!0,s=this,u=new Date().getTime(),j=function x(){if(t.effect&&n){for(var T=[],V=Math.min(e.duration,new Date().getTime()-u),A=0;A<r;A++)T.push(t.effect.easing(1,V,e.from[A],a[A],e.duration));e.frame(r==1?T[0]:T),V==e.duration?(delete t.effect,s.data(t),e.complete&&e.complete()):window.requestAnim(x)}},v=0;v<r;v++)a.push(e.to[v]-e.from[v]);t.effect=d.extend({stop:function(){n=!1},easing:function(T,V,A,jt,tt){return jt*Math.sqrt(1-(V=V/tt-1)*V)+A}},e),this.data(t),j()}else delete t.effect}}),d.isTouch=f,d.mouseEvents=it,d.cssPrefix=gt,d.cssTransitionEnd=function(){var i,e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MSTransition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(i in t)if(e.style[i]!==void 0)return t[i]},d.findPos=p})(b)},72701:function(Gt,Zt,W){"use strict";W.r(Zt),W.d(Zt,{default:function(){return St}});var b=W(67294),Ot=W(38416),d=W.n(Ot),At=W(42122),D=W.n(At),It=W(861),_=W.n(It),pt=W(27424),R=W.n(pt);function G(Z){var f=`<?xml version="1.0" encoding="UTF-8"?>
  <svg xmlns="http://www.w3.org/2000/svg" width="1440" height="2048">
    <defs>
      <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#1b1e24"/>
        <stop offset="100%" stop-color="#2b2f37"/>
      </linearGradient>
    </defs>
    <rect width="100%" height="100%" fill="url(#g)"/>
    <text x="50%" y="45%" dominant-baseline="middle" text-anchor="middle" font-size="220" fill="#ffffff" font-family="Inter, PingFang SC, Arial">`.concat(Z,`</text>
    <text x="50%" y="60%" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="#9aa0a6" font-family="Inter, PingFang SC, Arial">\u793A\u4F8B\u9875\u9762</text>
  </svg>`);return"data:image/svg+xml;utf8,".concat(encodeURIComponent(f))}var gt=Array.from({length:20}).map(function(Z,f){return{id:f+1,title:"\u7B2C".concat(f+1,"\u9875"),src:"https://malloss.gree.com/gree-mall-v3/pdf/PDF%E5%9B%BE%E7%89%87%E6%8F%90%E5%8F%96-1763720835913/".concat(f+1,".webp")}}),U=W(13692),w={viewer:"viewer___Bx6Iz",gradient:"gradient___T8SrD",topBar:"topBar___VEUlJ",iconBtn:"iconBtn___SnTSK",hidden:"hidden___VTsCy",topBarLeft:"topBarLeft___iNkML",topBarRight:"topBarRight___VPeRh",topBarCenter:"topBarCenter___ucIah",stageWrap:"stageWrap___omAdB",stage:"stage___kchgc",flipbook:"flipbook____aVPw",page:"page___Kdllo",hard:"hard___hKec2",controls:"controls___Kuo3w",controlsLeft:"controlsLeft___RRUim",controlsCenter:"controlsCenter___jIx4h",controlsRight:"controlsRight___JwPpr",pageDisplay:"pageDisplay___w2div",pageInput:"pageInput___RwddY",zoomDisplay:"zoomDisplay___gDE7O",zoomWrap:"zoomWrap___ZULuY",progressOverlay:"progressOverlay___Wa8zs",loader:"loader___W5Yn3",bar:"bar___Zl0tF",barInner:"barInner___A2ZfV",loaderText:"loaderText___wGuJM",rightEdge:"rightEdge___Q6aMp",leftEdge:"leftEdge___efBja",pageLoader:"pageLoader___Rnljh",retryBtn:"retryBtn___OvmNj",loaderSpinner:"loaderSpinner___BmXCN",spin:"spin___Qqo26"},rt=W(72655),p=W(85893),B=W(19755);function Wt(Z,f){var it=(0,b.useState)({width:0,height:0,display:"double"}),J=R()(it,2),F=J[0],ft=J[1];return(0,b.useEffect)(function(){var vt=function(){if(Z){var h=window.innerWidth<=640||window.innerHeight<=500&&window.innerWidth>window.innerHeight,g=h?20:140,i=h?0:80,e=window.innerWidth-i,t=window.innerHeight-g,a=t>e,r=Z.width>Z.height,n=f||(a||r?"single":"double"),s=Z.width/Z.height,u=n==="double"?s*2:s,j=e/t,v=t,x=t*u;j<u&&(x=e,v=e/u),ft({width:x,height:v,display:n})}};return vt(),window.addEventListener("resize",vt),function(){return window.removeEventListener("resize",vt)}},[Z,f]),F}function nt(){var Z=(0,b.useRef)(null),f=(0,b.useRef)(null),it=(0,b.useState)(1),J=R()(it,2),F=J[0],ft=J[1],vt=(0,b.useState)(1),Tt=R()(vt,2),h=Tt[0],g=Tt[1],i=(0,b.useState)([]),e=R()(i,2),t=e[0],a=e[1],r=t.length>0&&t.slice(0,2).every(function(l){return l.status==="loaded"||l.status==="error"}),n=(0,b.useState)(!0),s=R()(n,2),u=s[0],j=s[1],v=(0,b.useRef)(null),x=(0,b.useState)(),T=R()(x,2),V=T[0],A=T[1],jt=(0,b.useState)(),tt=R()(jt,2),mt=tt[0],Et=tt[1],y=Wt(V,mt),wt=F>1,dt=(0,b.useRef)(),ot=function(){var o=y.display==="single"?"double":"single";Et(o)},lt=(0,b.useState)({left:0,right:10}),xt=R()(lt,2),L=xt[0],zt=xt[1],Dt=(0,b.useState)(!1),Q=R()(Dt,2),kt=Q[0],k=Q[1],Xt=(0,b.useState)(""),yt=R()(Xt,2),bt=yt[0],ht=yt[1],ut=(0,b.useState)({x:0,y:0}),_t=R()(ut,2),Pt=_t[0],P=_t[1],$=(0,b.useState)(0),E=R()($,2),O=E[0],Mt=E[1],q=(0,b.useRef)({isPanning:!1,startX:0,startY:0,startPanX:0,startPanY:0}),X=(0,b.useRef)(1),S=(0,b.useRef)({tracking:!1,direction:null,startX:0,startY:0});(0,b.useEffect)(function(){F<=1&&P({x:0,y:0})},[F]);var m=gt.length,et=(0,b.useCallback)(function(l,o){var c=Math.min(l+o,m);a(function(C){for(var M=_()(C),H=function(I){var N=M[I];if(N&&(N.status==="unloaded"||N.status==="error")){M[I]=D()(D()({},M[I]),{},{status:"loading"});var Y=new Image;Y.onload=function(){a(function(st){var at=_()(st);return at[I]&&(at[I]=D()(D()({},at[I]),{},{status:"loaded"})),at})},Y.onerror=function(){console.error("Failed to load page image",{pageIndex:I,src:N.page.src}),a(function(st){var at=_()(st);return at[I]&&(at[I]=D()(D()({},at[I]),{},{status:"error"})),at})},Y.src=N.page.src}},K=l;K<c;K++)H(K);return M})},[m]),Vt=(0,b.useCallback)(function(l){et(l,1)},[et]);(0,b.useEffect)(function(){if(y.display==="double"){var l=10,o=Math.max(1,h),c=Math.max(0,l*(1-o/m)),C=l-c;zt({left:C,right:c})}},[h,m,y.display]);var $t=function(){j(!0),v.current&&clearTimeout(v.current),v.current=setTimeout(function(){j(!1)},3e3)};(0,b.useEffect)(function(){return window.addEventListener("mousemove",$t),function(){window.removeEventListener("mousemove",$t),v.current&&clearTimeout(v.current)}},[]);var Rt=function(o){var c=B(f.current);c&&c.turn&&c.turn("page",o)},Qt=function(){ht(String(h)),k(!0)},te=function(o){if(o.key==="Enter"){var c=parseInt(bt,10);!isNaN(c)&&c>=1&&c<=m&&Rt(c),k(!1)}o.key==="Escape"&&k(!1)},ee=function(){var o=parseInt(bt,10);!isNaN(o)&&o>=1&&o<=m&&Rt(o),k(!1)},ae=function(){return Rt(1)},Nt=function(){var o=B(f.current);o&&o.turn&&o.turn("previous")},Bt=function(){var o=B(f.current);o&&o.turn&&o.turn("next")},re=function(){return Rt(m)},qt=function(o){if(!(F<=1)){o.stopPropagation(),q.current.isPanning=!0;var c="touches"in o.nativeEvent?o.nativeEvent.touches[0]:o.nativeEvent;q.current.startX=c.clientX,q.current.startY=c.clientY,q.current.startPanX=Pt.x,q.current.startPanY=Pt.y,o.currentTarget.style.cursor="grabbing"}},Kt=function(o){if(console.log("handlePanMove"),!(!q.current.isPanning||F<=1)){o.preventDefault(),o.stopPropagation();var c="touches"in o.nativeEvent?o.nativeEvent.touches[0]:o.nativeEvent,C=c.clientX-q.current.startX,M=c.clientY-q.current.startY;P({x:q.current.startPanX+C,y:q.current.startPanY+M})}},Ht=function(o){q.current.isPanning&&(o.stopPropagation(),q.current.isPanning=!1,o.currentTarget.style.cursor="grab")},Lt=function(){S.current.tracking=!1,S.current.direction=null},Ut=function(o){if(!f.current)return!1;var c=f.current.getBoundingClientRect(),C=Math.min(c.height*.15,150);return o<c.top+C||o>c.bottom-C},ne=function(o){if(o.button===0){if(F>1){qt(o);return}Ut(o.clientY)||(o.stopPropagation(),S.current.tracking=!0,S.current.direction=null,S.current.startX=o.clientX,S.current.startY=o.clientY)}},ie=function(o){if(F>1){Kt(o);return}if(S.current.tracking){var c=o.clientX-S.current.startX,C=o.clientY-S.current.startY,M=Math.abs(c)>Math.abs(C)*1.5;M&&Math.abs(c)>30&&(S.current.direction=c>0?"right":"left",o.preventDefault(),o.stopPropagation())}},se=function(o){if(F>1){Ht(o);return}if(S.current.tracking){var c=S.current.direction;Lt(),c&&(c==="left"?Bt():Nt())}},oe=function(o){if(F>1){Ht(o);return}Lt()},le=function(o){if(F>1){qt(o);return}if(o.touches.length!==1){Lt();return}var c=o.touches[0];Ut(c.clientY)||(S.current.tracking=!0,S.current.direction=null,S.current.startX=c.clientX,S.current.startY=c.clientY)},he=function(o){if(F>1){Kt(o);return}if(!(!S.current.tracking||o.touches.length!==1)){var c=o.touches[0],C=c.clientX-S.current.startX,M=c.clientY-S.current.startY,H=Math.abs(C)>Math.abs(M)*1.5;H&&Math.abs(C)>30&&(S.current.direction=C>0?"right":"left",o.preventDefault())}},Jt=function(o){if(F>1){Ht(o);return}if(S.current.tracking){var c=S.current.direction;Lt(),c&&(c==="left"?Bt():Nt())}};(0,b.useEffect)(function(){if(!(!r||!f.current||!y.width||!y.height||!m||m===0)){var l=B(f.current),o=X.current;if(l.turn("is")){var c=l.turn("page");o=Math.max(1,Math.min(c||X.current,m))}else o=Math.max(1,Math.min(X.current,m));X.current=o;var C=Math.max(1,o-2),M=Math.min(m,o+2),H=C-1,K=M-H;K>0&&et(H,K);var z,I,N,Y=0,st=100,at=function ct(){if(!m||m===0){Y<st?(Y++,z=requestAnimationFrame(ct)):console.error("Cannot initialize: total is 0 or invalid");return}if(t.length!==m){Y<st?(Y++,Y%10===0&&console.log("Waiting for pagesWithStatus... (retry ".concat(Y,"/").concat(st,", state: ").concat(t.length,"/").concat(m,")")),z=requestAnimationFrame(ct)):console.error("Cannot initialize: pagesWithStatus not ready",{pagesWithStatusLength:t.length,total:m});return}if(!f.current){Y<st?(Y++,z=requestAnimationFrame(ct)):console.error("Cannot initialize: flipbookRef.current is null");return}var ge=B(f.current),Ct=ge.children();if(Ct.length!==m&&Y<st){Y++,Y%10===0&&console.log("Waiting for page elements in DOM... (retry ".concat(Y,"/").concat(st,", found ").concat(Ct.length,"/").concat(m,")")),z=requestAnimationFrame(ct);return}if(Ct.length===0){console.error("No page elements found when initializing turn.js",{retryCount:Y,total:m,pagesWithStatusLength:t.length,flipbookRefExists:!!f.current,pageElementsLength:Ct.length,flipbookHTML:f.current.innerHTML.substring(0,200)}),Mt(function(Yt){return Yt+1});return}Ct.length!==m&&console.warn("Page count mismatch: expected ".concat(m,", found ").concat(Ct.length,". Continuing anyway.")),I=requestAnimationFrame(function(){requestAnimationFrame(function(){N=setTimeout(function(){if(!(!f.current||!m||m===0)){var Yt=B(f.current),Ft=Yt.children();if(Ft.length===0){console.error("Page elements disappeared before turn.js initialization",{total:m,pagesWithStatusLength:t.length});return}Ft.length!==m&&console.warn("Expected ".concat(m," pages but found ").concat(Ft.length,". Initializing anyway."));try{Yt.turn({width:y.width,height:y.height,autoCenter:!0,duration:800,gradients:!0,elevation:60,acceleration:!0,display:y.display,page:o,pages:m}),X.current=o,g(o),console.log("turn.js initialized successfully with ".concat(Ft.length," pages"))}catch(fe){console.error("Error initializing turn.js:",fe,{total:m,pageElementsLength:Ft.length,pagesWithStatusLength:t.length,layout:y})}}},150)})})};return z=requestAnimationFrame(function(){requestAnimationFrame(function(){requestAnimationFrame(at)})}),function(){z&&cancelAnimationFrame(z),I&&cancelAnimationFrame(I),N&&clearTimeout(N);var ct=B(f.current);ct&&ct.turn("is")&&ct.turn("destroy")}}},[r,m,et,O]),(0,b.useEffect)(function(){if(!(!r||!f.current)){var l=null,o=null,c=function C(){if(f.current){var M=B(f.current);if(!M.turn||!M.turn("is")){l=requestAnimationFrame(C);return}var H=function(I,N){X.current=N,g(N)},K=function(){if(M.turn("is")){var I=M.turn("page"),N=M.turn("display")==="double";M.removeClass("shadow first-page-shadow last-page-shadow"),N?I===1?M.addClass("first-page-shadow"):I===m?M.addClass("last-page-shadow"):M.addClass("shadow"):M.addClass("shadow")}};M.on("turning",H),M.on("turned",K),K(),o=function(){M.off("turning",H),M.off("turned",K)}}};return c(),function(){l&&cancelAnimationFrame(l),o&&o()}}},[r,m,y.display,O]),(0,b.useEffect)(function(){if(f.current){var l=B(f.current);l.turn("is")&&l.turn("size",y.width,y.height)}},[y.width,y.height]),(0,b.useEffect)(function(){if(!(!r||!f.current)){var l=B(f.current);if(l.turn&&l.turn("is"))try{l.turn("display",y.display);var o=Math.max(1,Math.min(X.current,m));l.turn("page",o)}catch(c){console.error("Failed to adjust display mode. Reinitializing...",c),Mt(function(C){return C+1})}else r&&Mt(function(c){return c+1})}},[y.display,r,m]),(0,b.useEffect)(function(){if(!r){dt.current=y.display;return}dt.current&&dt.current!==y.display&&Mt(function(l){return l+1}),dt.current=y.display},[y.display,r]),(0,b.useLayoutEffect)(function(){if(r&&y.display==="single"&&f.current){var l=null,o=null,c=function(){if(f.current){var H=B(f.current);if(!(!H.turn||!H.turn("is"))){var K=H.data().turn;if(K){var z=f.current.querySelector(".page.p-temporal"),I=!z||z===f.current||z.contains(f.current)||z.parentElement!==f.current;if(I){var N;(N=z)!==null&&N!==void 0&&N.parentElement&&z.parentElement.removeChild(z),z=document.createElement("div"),z.className="page p-temporal"}z&&(z.parentElement!==f.current&&f.current.insertBefore(z,f.current.firstChild),z.style.width="".concat(y.width,"px"),z.style.height="".concat(y.height,"px"),K.pageObjs[0]=B(z))}}}},C=function M(){if(f.current){var H=B(f.current);if(!H.turn||!H.turn("is")){o=requestAnimationFrame(M);return}c(),l=new MutationObserver(function(){if(f.current){var K=f.current.querySelector(".page.p-temporal");K||c()}}),l.observe(f.current,{childList:!0})}};return C(),function(){var M;o&&cancelAnimationFrame(o),(M=l)===null||M===void 0||M.disconnect()}}},[r,y.display,y.width,y.height,O]),(0,b.useEffect)(function(){if(gt.length>0){var l=gt[0],o=new Image;o.onload=function(){A({width:o.naturalWidth,height:o.naturalHeight})},o.src=l.src,a(gt.map(function(c){return{page:c,status:"unloaded"}})),X.current=1}},[]),(0,b.useEffect)(function(){if(m&&t.length===m){var l=Math.max(1,h-2),o=Math.min(m,h+2),c=l-1,C=o-c;C>0&&et(c,C)}},[h,m,et,t.length]);var ue=(0,b.useMemo)(function(){return t.map(function(l,o){var c;return l.status==="loaded"?c=(0,p.jsx)("img",{src:l.page.src,alt:l.page.title,draggable:!1}):l.status==="error"?c=(0,p.jsxs)("div",{className:w.pageLoader,children:[(0,p.jsx)("div",{className:w.loaderText,children:"\u52A0\u8F7D\u5931\u8D25"}),(0,p.jsx)("button",{className:w.retryBtn,onClick:function(){return Vt(o)},children:"\u91CD\u8BD5"})]}):c=(0,p.jsx)("div",{className:w.pageLoader,children:(0,p.jsx)("div",{className:w.loaderSpinner})}),(0,p.jsxs)("div",{className:"".concat(w.page," ").concat(o===0||o===m-1?w.hard:""," whh"),children:[c,(0,p.jsx)("div",{className:w.gradient})]},l.page.id)})},[t,m,Vt]),de=(0,b.useMemo)(function(){var l={width:L.left,display:y.display==="double"&&h>2?"block":"none"};return h===m?l.left=y.width/4-L.left:l.left=-L.left,l},[h,m,y,L.left]),ce=(0,b.useMemo)(function(){var l={width:L.right,display:y.display==="double"&&h<m&&h>1?"block":"none"};return h===1?l.right=y.width/4-L.right:l.right=-L.right,l},[h,m,y,L.right]),pe=(0,b.useMemo)(function(){if(y.display==="double"){if(h===1)return"1";if(h===m)return"".concat(m);var l=h%2===0?h:h-1,o=l+1;return"".concat(l,"-").concat(o)}return String(h)},[h,m,y.display]);return(0,p.jsxs)("div",{className:"".concat(w.viewer," ").concat(u?"":w.controlsHidden),children:[(0,p.jsxs)("div",{className:"".concat(w.topBar," ").concat(u?"":w.hidden),"data-zoomed":wt,children:[(0,p.jsxs)("div",{className:w.topBarLeft,children:[(0,p.jsx)("button",{className:w.iconBtn,onClick:Nt,"aria-label":"\u4E0A\u4E00\u9875",children:(0,p.jsx)(U.YFh,{})}),(0,p.jsx)("button",{className:w.iconBtn,onClick:Bt,"aria-label":"\u4E0B\u4E00\u9875",children:(0,p.jsx)(U.Tfp,{})})]}),(0,p.jsxs)("div",{className:w.topBarCenter,children:[(0,p.jsx)("button",{className:w.iconBtn,onClick:function(){return ft(Math.max(.5,F-.1))},children:(0,p.jsx)(U.gjP,{})}),(0,p.jsxs)("div",{className:w.zoomDisplay,children:[Math.round(F*100),"%"]}),(0,p.jsx)("button",{className:w.iconBtn,onClick:function(){return ft(Math.min(3,F+.1))},children:(0,p.jsx)(U.SJS,{})}),(0,p.jsx)("button",{className:w.iconBtn,onClick:function(){return ft(1)},children:(0,p.jsx)(U.ABE,{})}),(0,p.jsx)("button",{className:w.iconBtn,onClick:ot,children:(0,p.jsx)(U.hbr,{})})]}),(0,p.jsx)("div",{className:w.topBarRight})]}),(0,p.jsx)("div",{className:w.stageWrap,onMouseDownCapture:ne,onMouseMoveCapture:ie,onMouseUpCapture:se,onMouseLeave:oe,onTouchStart:le,onTouchMove:he,onTouchEnd:Jt,onTouchCancel:Jt,style:{cursor:F>1?"grab":"default"},children:(0,p.jsx)("div",{ref:Z,className:w.stage,style:d()({width:y.width,height:y.height},"--zoom",F),children:(0,p.jsxs)("div",{style:{transform:"translate(".concat(Pt.x,"px, ").concat(Pt.y,"px)")},children:[!r&&(0,p.jsx)("div",{className:w.progressOverlay,children:(0,p.jsx)("div",{className:w.loader,children:(0,p.jsx)("div",{className:w.loaderText,children:"\u52A0\u8F7D\u4E2D..."})})}),(0,p.jsx)("div",{className:w.leftEdge,style:de}),(0,p.jsx)("div",{ref:f,className:"".concat(w.flipbook," ").concat(y.display==="double"?"double":"single"),children:ue},O),(0,p.jsx)("div",{className:w.rightEdge,style:ce})]})})}),(0,p.jsxs)("div",{className:"".concat(w.controls," ").concat(u?"":w.hidden),children:[(0,p.jsx)("div",{}),(0,p.jsxs)("div",{className:w.controlsCenter,children:[(0,p.jsx)("button",{className:w.iconBtn,onClick:ae,children:(0,p.jsx)(U.JHF,{})}),(0,p.jsx)("button",{className:w.iconBtn,onClick:Nt,children:(0,p.jsx)(U.YFh,{})}),(0,p.jsx)("div",{className:w.pageDisplay,children:kt?(0,p.jsx)("input",{type:"text",className:w.pageInput,value:bt,onChange:function(o){return ht(o.target.value)},onKeyDown:te,onBlur:ee,autoFocus:!0}):(0,p.jsxs)("span",{onClick:Qt,children:[pe," / ",m]})}),(0,p.jsx)("button",{className:w.iconBtn,onClick:Bt,children:(0,p.jsx)(U.Tfp,{})}),(0,p.jsx)("button",{className:w.iconBtn,onClick:re,children:(0,p.jsx)(U.qhs,{})})]}),(0,p.jsx)("div",{})]})]})}function St(){return(0,p.jsx)("div",{className:"app-root",children:(0,p.jsx)(nt,{})})}}}]);
