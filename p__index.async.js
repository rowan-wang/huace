(self.webpackChunkhuace_viewer=self.webpackChunkhuace_viewer||[]).push([[866],{72655:function(ae,$t,R){var b=R(19755),Dt=R(18698).default;(function(u){function Rt(i,t,e){if(!e[0]||Dt(e[0])=="object")return t.init.apply(i,e);if(t[e[0]])return t[e[0]].apply(i,Array.prototype.slice.call(e,1));throw rt(e[0]+" is not a method or property")}function N(i,t,e,a){return{css:{position:"absolute",top:i,left:t,overflow:a||"hidden",zIndex:e||"auto"}}}function Nt(i,t,e,a,r){var n=1-r,s=n*n*n,l=r*r*r;return _(Math.round(s*i.x+3*r*n*n*t.x+3*r*r*n*e.x+l*a.x),Math.round(s*i.y+3*r*n*n*t.y+3*r*r*n*e.y+l*a.y))}function _(i,t){return{x:i,y:t}}function vt(i,t,e){return Z&&e?" translate3d("+i+"px,"+t+"px, 0px) ":" translate("+i+"px, "+t+"px) "}function B(i){return" rotate("+i+"deg) "}function U(i,t){return Object.prototype.hasOwnProperty.call(t,i)}function mt(){for(var i=["Moz","Webkit","Khtml","O","ms"],t=i.length,e="";t--;)i[t]+"Transform"in document.body.style&&(e="-"+i[t].toLowerCase()+"-");return e}function K(i,t,e,a,r){var n,s=[];if(nt=="-webkit-"){for(n=0;n<r;n++)s.push("color-stop("+a[n][0]+", "+a[n][1]+")");i.css({"background-image":"-webkit-gradient(linear, "+t.x+"% "+t.y+"%,"+e.x+"% "+e.y+"%, "+s.join(",")+" )"})}else{var t={x:t.x/100*i.width(),y:t.y/100*i.height()},e={x:e.x/100*i.width(),y:e.y/100*i.height()},v=e.x-t.x;n=e.y-t.y;var l=Math.atan2(n,v),z=l-Math.PI/2,z=Math.abs(i.width()*Math.sin(z))+Math.abs(i.height()*Math.cos(z)),v=Math.sqrt(n*n+v*v),e=_(e.x<t.x?i.width():0,e.y<t.y?i.height():0),m=Math.tan(l);for(n=-1/m,m=(n*e.x-e.y-m*t.x+t.y)/(n-m),e=n*m-n*e.x+e.y,t=Math.sqrt(Math.pow(m-t.x,2)+Math.pow(e-t.y,2)),n=0;n<r;n++)s.push(" "+a[n][1]+" "+100*(t+v*a[n][0])/z+"%");i.css({"background-image":nt+"linear-gradient("+-l+"rad,"+s.join(",")+")"})}}function x(i,t,e){return i=u.Event(i),t.trigger(i,e),i.isDefaultPrevented()?"prevented":i.isPropagationStopped()?"stopped":""}function rt(i){function t(e){this.name="TurnJsError",this.message=e}return t.prototype=Error(),t.prototype.constructor=t,new t(i)}function c(i){var t={top:0,left:0};do t.left+=i.offsetLeft,t.top+=i.offsetTop;while(i=i.offsetParent);return t}var Z,kt,nt="",Pt=Math.PI,Mt=Pt/2,wt="ontouchstart"in window,ht=wt?{down:"touchstart",move:"touchmove",up:"touchend",over:"touchstart",out:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup",over:"mouseover",out:"mouseout"},P={backward:["bl","tl"],forward:["br","tr"],all:"tl bl tr br l r".split(" ")},f=["single","double"],tt=["ltr","rtl"],et={acceleration:!0,display:"double",duration:600,page:1,gradients:!0,turnCorners:"bl,br",when:null},E={cornerSize:100},h={init:function(s){Z="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style;var e;kt=(e=/AppleWebkit\/([0-9\.]+)/i.exec(navigator.userAgent))?534.3<parseFloat(e[1]):!0,nt=mt();var a;e=0;var r=this.data(),n=this.children(),s=u.extend({width:this.width(),height:this.height(),direction:this.attr("dir")||this.css("direction")||"ltr"},et,s);if(r.opts=s,r.pageObjs={},r.pages={},r.pageWrap={},r.pageZoom={},r.pagePlace={},r.pageMv=[],r.zoom=1,r.totalPages=s.pages||0,r.eventHandlers={touchStart:u.proxy(h._touchStart,this),touchMove:u.proxy(h._touchMove,this),touchEnd:u.proxy(h._touchEnd,this),start:u.proxy(h._eventStart,this)},s.when)for(a in s.when)U(a,s.when)&&this.bind(a,s.when[a]);for(this.css({position:"relative",width:s.width,height:s.height}),this.turn("display",s.display),s.direction!==""&&this.turn("direction",s.direction),Z&&!wt&&s.acceleration&&this.transform(vt(0,0,!0)),a=0;a<n.length;a++)u(n[a]).attr("ignore")!="1"&&this.turn("addPage",n[a],++e);return u(this).bind(ht.down,r.eventHandlers.touchStart).bind("end",h._eventEnd).bind("pressed",h._eventPressed).bind("released",h._eventReleased).bind("flip",h._flip),u(this).parent().bind("start",r.eventHandlers.start),u(document).bind(ht.move,r.eventHandlers.touchMove).bind(ht.up,r.eventHandlers.touchEnd),this.turn("page",s.page),r.done=!0,this},addPage:function(t,e){var a,r=!1,n=this.data(),s=n.totalPages+1;if(n.destroying)return!1;if((a=/\bp([0-9]+)\b/.exec(u(t).attr("class")))&&(e=parseInt(a[1],10)),e){if(e==s)r=!0;else if(e>s)throw rt('Page "'+e+'" cannot be inserted')}else e=s,r=!0;return 1<=e&&e<=s&&(a=n.display=="double"?e%2?" odd":" even":"",n.done&&this.turn("stop"),e in n.pageObjs&&h._movePages.call(this,e,1),r&&(n.totalPages=s),n.pageObjs[e]=u(t).css({float:"left"}).addClass("page p"+e+a),navigator.userAgent.indexOf("MSIE 9.0")!=-1&&n.pageObjs[e].hasClass("hard")&&n.pageObjs[e].removeClass("hard"),h._addPage.call(this,e),h._removeFromDOM.call(this)),this},_addPage:function(t){var e=this.data(),a=e.pageObjs[t];if(a)if(h._necessPage.call(this,t)){if(!e.pageWrap[t]){e.pageWrap[t]=u("<div/>",{class:"page-wrapper",page:t,css:{position:"absolute",overflow:"hidden"}}),this.append(e.pageWrap[t]),e.pagePlace[t]||(e.pagePlace[t]=t,e.pageObjs[t].appendTo(e.pageWrap[t]));var r=h._pageSize.call(this,t,!0);a.css({width:r.width,height:r.height}),e.pageWrap[t].css(r)}e.pagePlace[t]==t&&h._makeFlip.call(this,t)}else e.pagePlace[t]=0,e.pageObjs[t]&&e.pageObjs[t].remove()},hasPage:function(t){return U(t,this.data().pageObjs)},center:function(t){var e=this.data(),a=u(this).turn("size"),r=0;return e.noCenter||(e.display=="double"&&(t=this.turn("view",t||e.tpage||e.page),e.direction=="ltr"?t[0]?t[1]||(r+=a.width/4):r-=a.width/4:t[0]?t[1]||(r-=a.width/4):r+=a.width/4),u(this).css({marginLeft:r})),this},destroy:function(){var t=this,e=this.data(),a="end first flip last pressed released start turning turned zooming missing".split(" ");if(x("destroying",this)!="prevented"){for(e.destroying=!0,u.each(a,function(r,n){t.unbind(n)}),this.parent().unbind("start",e.eventHandlers.start),u(document).unbind(ht.move,e.eventHandlers.touchMove).unbind(ht.up,e.eventHandlers.touchEnd);e.totalPages!==0;)this.turn("removePage",e.totalPages);return e.fparent&&e.fparent.remove(),e.shadow&&e.shadow.remove(),this.removeData(),e=null,this}},is:function(){return Dt(this.data().pages)=="object"},zoom:function(t){var e=this.data();if(typeof t=="number"){if(.001>t||100<t)throw rt(t+" is not a value for zoom");if(x("zooming",this,[t,e.zoom])=="prevented")return this;var s=this.turn("size"),a=this.turn("view"),r=1/e.zoom,n=Math.round(s.width*r*t),s=Math.round(s.height*r*t);for(e.zoom=t,u(this).turn("stop").turn("size",n,s),e.opts.autoCenter&&this.turn("center"),h._updateShadow.call(this),t=0;t<a.length;t++)a[t]&&e.pageZoom[a[t]]!=e.zoom&&(this.trigger("zoomed",[a[t],a,e.pageZoom[a[t]],e.zoom]),e.pageZoom[a[t]]=e.zoom);return this}return e.zoom},_pageSize:function(t,e){var a=this.data(),r={};if(a.display=="single")r.width=this.width(),r.height=this.height(),e&&(r.top=0,r.left=0,r.right="auto");else{var n=this.width()/2,s=this.height();if(a.pageObjs[t].hasClass("own-size")?(r.width=a.pageObjs[t].width(),r.height=a.pageObjs[t].height()):(r.width=n,r.height=s),e){var l=t%2;r.top=(s-r.height)/2,a.direction=="ltr"?(r[l?"right":"left"]=n-r.width,r[l?"left":"right"]="auto"):(r[l?"left":"right"]=n-r.width,r[l?"right":"left"]="auto")}}return r},_makeFlip:function(t){var e=this.data();if(!e.pages[t]&&e.pagePlace[t]==t){var a=e.display=="single",r=t%2;e.pages[t]=e.pageObjs[t].css(h._pageSize.call(this,t)).flip({page:t,next:r||a?t+1:t-1,turn:this}).flip("disable",e.disabled),h._setPageLoc.call(this,t),e.pageZoom[t]=e.zoom}return e.pages[t]},_makeRange:function(){var t,e;if(!(1>this.data().totalPages))for(e=this.turn("range"),t=e[0];t<=e[1];t++)h._addPage.call(this,t)},range:function(s){var e,a,r,n=this.data(),s=s||n.tpage||n.page||1;if(r=h._view.call(this,s),1>s||s>n.totalPages)throw rt('"'+s+'" is not a valid page');return r[1]=r[1]||r[0],1<=r[0]&&r[1]<=n.totalPages?(s=Math.floor(2),n.totalPages-r[1]>r[0]?(e=Math.min(r[0]-1,s),a=2*s-e):(a=Math.min(n.totalPages-r[1],s),e=2*s-a)):a=e=5,[Math.max(1,r[0]-e),Math.min(n.totalPages,r[1]+a)]},_necessPage:function(t){if(t===0)return!0;var e=this.turn("range");return this.data().pageObjs[t].hasClass("fixed")||t>=e[0]&&t<=e[1]},_removeFromDOM:function(){var t,e=this.data();for(t in e.pageWrap)U(t,e.pageWrap)&&!h._necessPage.call(this,t)&&h._removePageFromDOM.call(this,t)},_removePageFromDOM:function(t){var e=this.data();if(e.pages[t]){var a=e.pages[t].data();g._moveFoldingPage.call(e.pages[t],!1),a.f&&a.f.fwrapper&&a.f.fwrapper.remove(),e.pages[t].removeData(),e.pages[t].remove(),delete e.pages[t]}e.pageObjs[t]&&e.pageObjs[t].remove(),e.pageWrap[t]&&(e.pageWrap[t].remove(),delete e.pageWrap[t]),h._removeMv.call(this,t),delete e.pagePlace[t],delete e.pageZoom[t]},removePage:function(t){var e=this.data();if(t=="*")for(;e.totalPages!==0;)this.turn("removePage",e.totalPages);else{if(1>t||t>e.totalPages)throw rt("The page "+t+" doesn't exist");e.pageObjs[t]&&(this.turn("stop"),h._removePageFromDOM.call(this,t),delete e.pageObjs[t]),h._movePages.call(this,t,-1),e.totalPages-=1,e.page>e.totalPages?(e.page=null,h._fitPage.call(this,e.totalPages)):(h._makeRange.call(this),this.turn("update"))}return this},_movePages:function(t,e){var a,r=this,n=this.data(),s=n.display=="single",l=function(v){var m=v+e,k=m%2,F=k?" odd ":" even ";n.pageObjs[v]&&(n.pageObjs[m]=n.pageObjs[v].removeClass("p"+v+" odd even").addClass("p"+m+F)),n.pagePlace[v]&&n.pageWrap[v]&&(n.pagePlace[m]=m,n.pageWrap[m]=n.pageObjs[m].hasClass("fixed")?n.pageWrap[v].attr("page",m):n.pageWrap[v].css(h._pageSize.call(r,m,!0)).attr("page",m),n.pages[v]&&(n.pages[m]=n.pages[v].flip("options",{page:m,next:s||k?m+1:m-1})),e&&(delete n.pages[v],delete n.pagePlace[v],delete n.pageZoom[v],delete n.pageObjs[v],delete n.pageWrap[v]))};if(0<e)for(a=n.totalPages;a>=t;a--)l(a);else for(a=t;a<=n.totalPages;a++)l(a)},display:function(t){var e=this.data(),a=e.display;if(t===void 0)return a;if(u.inArray(t,f)==-1)throw rt('"'+t+'" is not a value for display');switch(t){case"single":e.pageObjs[0]||(this.turn("stop").css({overflow:"hidden"}),e.pageObjs[0]=u("<div />",{class:"page p-temporal"}).css({width:this.width(),height:this.height()}).appendTo(this)),this.addClass("shadow");break;case"double":e.pageObjs[0]&&(this.turn("stop").css({overflow:""}),e.pageObjs[0].remove(),delete e.pageObjs[0]),this.removeClass("shadow")}return e.display=t,a&&(t=this.turn("size"),h._movePages.call(this,1,0),this.turn("size",t.width,t.height).turn("update")),this},direction:function(t){var e=this.data();if(t===void 0)return e.direction;if(t=t.toLowerCase(),u.inArray(t,tt)==-1)throw rt('"'+t+'" is not a value for direction');return t=="rtl"&&u(this).attr("dir","ltr").css({direction:"ltr"}),e.direction=t,e.done&&this.turn("size",u(this).width(),u(this).height()),this},animating:function(){return 0<this.data().pageMv.length},corner:function(){var t,e,a=this.data();for(e in a.pages)if(U(e,a.pages)&&(t=a.pages[e].flip("corner")))return t;return!1},data:function(){return this.data()},disable:function(t){var e,a=this.data(),r=this.turn("view");a.disabled=t===void 0||t===!0;for(e in a.pages)U(e,a.pages)&&a.pages[e].flip("disable",a.disabled?!0:u.inArray(parseInt(e,10),r)==-1);return this},disabled:function(t){return t===void 0?this.data().disabled===!0:this.turn("disable",t)},size:function(t,e){if(t===void 0||e===void 0)return{width:this.width(),height:this.height()};this.turn("stop");var a,r,n=this.data();r=n.display=="double"?t/2:t,this.css({width:t,height:e}),n.pageObjs[0]&&n.pageObjs[0].css({width:r,height:e});for(a in n.pageWrap)U(a,n.pageWrap)&&(r=h._pageSize.call(this,a,!0),n.pageObjs[a].css({width:r.width,height:r.height}),n.pageWrap[a].css(r),n.pages[a]&&n.pages[a].css({width:r.width,height:r.height}));return this.turn("resize"),this},resize:function(){var t,e=this.data();for(e.pages[0]&&(e.pageWrap[0].css({left:-this.width()}),e.pages[0].flip("resize",!0)),t=1;t<=e.totalPages;t++)e.pages[t]&&e.pages[t].flip("resize",!0);h._updateShadow.call(this),e.opts.autoCenter&&this.turn("center")},_removeMv:function(t){var e,a=this.data();for(e=0;e<a.pageMv.length;e++)if(a.pageMv[e]==t)return a.pageMv.splice(e,1),!0;return!1},_addMv:function(t){var e=this.data();h._removeMv.call(this,t),e.pageMv.push(t)},_view:function(a){var e=this.data(),a=a||e.page;return e.display=="double"?a%2?[a-1,a]:[a,a+1]:[a]},view:function(a){var e=this.data(),a=h._view.call(this,a);return e.display=="double"?[0<a[0]?a[0]:0,a[1]<=e.totalPages?a[1]:0]:[0<a[0]&&a[0]<=e.totalPages?a[0]:0]},stop:function(t,e){if(this.turn("animating")){var a,r,n,s=this.data();for(s.tpage&&(s.page=s.tpage,delete s.tpage),a=0;a<s.pageMv.length;a++)s.pageMv[a]&&s.pageMv[a]!==t&&(n=s.pages[s.pageMv[a]],r=n.data().f.opts,n.flip("hideFoldedPage",e),e||g._moveFoldingPage.call(n,!1),r.force&&(r.next=r.page%2===0?r.page-1:r.page+1,delete r.force))}return this.turn("update"),this},pages:function(t){var e=this.data();if(t){if(t<e.totalPages)for(var a=e.totalPages;a>t;a--)this.turn("removePage",a);return e.totalPages=t,h._fitPage.call(this,e.page),this}return e.totalPages},_missing:function(t){var e=this.data();if(!(1>e.totalPages)){for(var a=this.turn("range",t),r=[],t=a[0];t<=a[1];t++)e.pageObjs[t]||r.push(t);0<r.length&&this.trigger("missing",[r])}},_fitPage:function(t){var e=this.data(),a=this.turn("view",t);if(h._missing.call(this,t),e.pageObjs[t]){e.page=t,this.turn("stop");for(var r=0;r<a.length;r++)a[r]&&e.pageZoom[a[r]]!=e.zoom&&(this.trigger("zoomed",[a[r],a,e.pageZoom[a[r]],e.zoom]),e.pageZoom[a[r]]=e.zoom);h._removeFromDOM.call(this),h._makeRange.call(this),h._updateShadow.call(this),this.trigger("turned",[t,a]),this.turn("update"),e.opts.autoCenter&&this.turn("center")}},_turnPage:function(t){var e,a,r=this.data(),n=r.pagePlace[t],s=this.turn("view"),l=this.turn("view",t);if(r.page!=t){var z=r.page;if(x("turning",this,[t,l])=="prevented"){z==r.page&&u.inArray(n,r.pageMv)!=-1&&r.pages[n].flip("hideFoldedPage",!0);return}u.inArray(1,l)!=-1&&this.trigger("first"),u.inArray(r.totalPages,l)!=-1&&this.trigger("last")}r.display=="single"?(e=s[0],a=l[0]):s[1]&&t>s[1]?(e=s[1],a=l[0]):s[0]&&t<s[0]&&(e=s[0],a=l[1]),n=r.opts.turnCorners.split(","),s=r.pages[e].data().f,l=s.opts,z=s.point,h._missing.call(this,t),r.pageObjs[t]&&(this.turn("stop"),r.page=t,h._makeRange.call(this),r.tpage=a,l.next!=a&&(l.next=a,l.force=!0),this.turn("update"),s.point=z,s.effect=="hard"?r.direction=="ltr"?r.pages[e].flip("turnPage",t>e?"r":"l"):r.pages[e].flip("turnPage",t>e?"l":"r"):r.direction=="ltr"?r.pages[e].flip("turnPage",n[t>e?1:0]):r.pages[e].flip("turnPage",n[t>e?0:1]))},page:function(t){var e=this.data();if(t===void 0)return e.page;if(!e.disabled&&!e.destroying){if(t=parseInt(t,10),0<t&&t<=e.totalPages)return t!=e.page&&(!e.done||u.inArray(t,this.turn("view"))!=-1?h._fitPage.call(this,t):h._turnPage.call(this,t)),this;throw rt("The page "+t+" does not exist")}},next:function(){return this.turn("page",Math.min(this.data().totalPages,h._view.call(this,this.data().page).pop()+1))},previous:function(){return this.turn("page",Math.max(1,h._view.call(this,this.data().page).shift()-1))},peel:function(t,n){var a=this.data(),r=this.turn("view"),n=n===void 0?!0:n===!0;return t===!1?this.turn("stop",null,n):a.display=="single"?a.pages[a.page].flip("peel",t,n):(r=a.direction=="ltr"?t.indexOf("l")!=-1?r[0]:r[1]:t.indexOf("l")!=-1?r[1]:r[0],a.pages[r]&&a.pages[r].flip("peel",t,n)),this},_addMotionPage:function(){var t=u(this).data().f.opts,e=t.turn;e.data(),h._addMv.call(e,t.page)},_eventStart:function(t,e,a){var r=e.turn.data(),n=r.pageZoom[e.page];t.isDefaultPrevented()||(n&&n!=r.zoom&&(e.turn.trigger("zoomed",[e.page,e.turn.turn("view",e.page),n,r.zoom]),r.pageZoom[e.page]=r.zoom),r.display=="single"&&a&&(a.charAt(1)=="l"&&r.direction=="ltr"||a.charAt(1)=="r"&&r.direction=="rtl"?(e.next=e.next<e.page?e.next:e.page-1,e.force=!0):e.next=e.next>e.page?e.next:e.page+1),h._addMotionPage.call(t.target)),h._updateShadow.call(e.turn)},_eventEnd:function(r,e,a){u(r.target).data();var r=e.turn,n=r.data();a?(a=n.tpage||n.page,(a==e.next||a==e.page)&&(delete n.tpage,h._fitPage.call(r,a||e.next,!0))):(h._removeMv.call(r,e.page),h._updateShadow.call(r),r.turn("update"))},_eventPressed:function(e){var e=u(e.target).data().f,a=e.opts.turn;return a.data().mouseAction=!0,a.turn("update"),e.time=new Date().getTime()},_eventReleased:function(t,e){var a;a=u(t.target);var r=a.data().f,n=r.opts.turn,s=n.data();a=s.display=="single"?e.corner=="br"||e.corner=="tr"?e.x<a.width()/2:e.x>a.width()/2:0>e.x||e.x>a.width(),(200>new Date().getTime()-r.time||a)&&(t.preventDefault(),h._turnPage.call(n,r.opts.next)),s.mouseAction=!1},_flip:function(t){t.stopPropagation(),t=u(t.target).data().f.opts,t.turn.trigger("turn",[t.next]),t.turn.data().opts.autoCenter&&t.turn.turn("center",t.next)},_touchStart:function(){var t=this.data(),e;for(e in t.pages)if(U(e,t.pages)&&g._eventStart.apply(t.pages[e],arguments)===!1)return!1},_touchMove:function(){var t=this.data(),e;for(e in t.pages)U(e,t.pages)&&g._eventMove.apply(t.pages[e],arguments)},_touchEnd:function(){var t=this.data(),e;for(e in t.pages)U(e,t.pages)&&g._eventEnd.apply(t.pages[e],arguments)},calculateZ:function(t){var e,a,r,n,s=this,l=this.data();e=this.turn("view");var z=e[0]||e[1],v=t.length-1,m={pageZ:{},partZ:{},pageV:{}},k=function(T){T=s.turn("view",T),T[0]&&(m.pageV[T[0]]=!0),T[1]&&(m.pageV[T[1]]=!0)};for(e=0;e<=v;e++)a=t[e],r=l.pages[a].data().f.opts.next,n=l.pagePlace[a],k(a),k(r),a=l.pagePlace[r]==r?r:a,m.pageZ[a]=l.totalPages-Math.abs(z-a),m.partZ[n]=2*l.totalPages-v+e;return m},update:function(){var t,e=this.data();if(this.turn("animating")&&e.pageMv[0]!==0){var a,r=this.turn("calculateZ",e.pageMv),n=this.turn("corner"),s=this.turn("view"),l=this.turn("view",e.tpage);for(t in e.pageWrap)U(t,e.pageWrap)&&(a=e.pageObjs[t].hasClass("fixed"),e.pageWrap[t].css({display:r.pageV[t]||a?"":"none",zIndex:(e.pageObjs[t].hasClass("hard")?r.partZ[t]:r.pageZ[t])||(a?-1:0)}),a=e.pages[t])&&(a.flip("z",r.partZ[t]||null),r.pageV[t]&&a.flip("resize"),e.tpage?a.flip("hover",!1).flip("disable",u.inArray(parseInt(t,10),e.pageMv)==-1&&t!=l[0]&&t!=l[1]):a.flip("hover",n===!1).flip("disable",t!=s[0]&&t!=s[1]))}else for(t in e.pageWrap)U(t,e.pageWrap)&&(r=h._setPageLoc.call(this,t),e.pages[t]&&e.pages[t].flip("disable",e.disabled||r!=1).flip("hover",!0).flip("z",null));return this},_updateShadow:function(){var t,e,a=this.data(),r=this.width(),n=this.height(),s=a.display=="single"?r:r/2;t=this.turn("view"),a.shadow||(a.shadow=u("<div />",{class:"shadow",css:N(0,0,0).css}).appendTo(this));for(var l=0;l<a.pageMv.length&&t[0]&&t[1];l++)t=this.turn("view",a.pages[a.pageMv[l]].data().f.opts.next),e=this.turn("view",a.pageMv[l]),t[0]=t[0]&&e[0],t[1]=t[1]&&e[1];switch(t[0]?t[1]?3:a.direction=="ltr"?2:1:a.direction=="ltr"?1:2){case 1:a.shadow.css({width:s,height:n,top:0,left:s});break;case 2:a.shadow.css({width:s,height:n,top:0,left:0});break;case 3:a.shadow.css({width:r,height:n,top:0,left:0})}},_setPageLoc:function(t){var e=this.data(),a=this.turn("view"),r=0;if(t==a[0]||t==a[1]?r=1:(e.display=="single"&&t==a[0]+1||e.display=="double"&&t==a[0]-2||t==a[1]+2)&&(r=2),!this.turn("animating"))switch(r){case 1:e.pageWrap[t].css({zIndex:e.totalPages,display:""});break;case 2:e.pageWrap[t].css({zIndex:e.totalPages-1,display:""});break;case 0:e.pageWrap[t].css({zIndex:0,display:e.pageObjs[t].hasClass("fixed")?"":"none"})}return r},options:function(t){if(t===void 0)return this.data().opts;var e=this.data();if(u.extend(e.opts,t),t.pages&&this.turn("pages",t.pages),t.page&&this.turn("page",t.page),t.display&&this.turn("display",t.display),t.direction&&this.turn("direction",t.direction),t.width&&t.height&&this.turn("size",t.width,t.height),t.when)for(var a in t.when)U(a,t.when)&&this.unbind(a).bind(a,t.when[a]);return this},version:function(){return"4.1.0"}},g={init:function(t){return this.data({f:{disabled:!1,hover:!1,effect:this.hasClass("hard")?"hard":"sheet"}}),this.flip("options",t),g._addPageWrapper.call(this),this},setData:function(t){var e=this.data();return e.f=u.extend(e.f,t),this},options:function(t){var e=this.data().f;return t?(g.setData.call(this,{opts:u.extend({},e.opts||E,t)}),this):e.opts},z:function(t){var e=this.data().f;return e.opts["z-index"]=t,e.fwrapper&&e.fwrapper.css({zIndex:t||parseInt(e.parent.css("z-index"),10)||0}),this},_cAllowed:function(){var t=this.data().f,e=t.opts.page,a=t.opts.turn.data(),r=e%2;return t.effect=="hard"?a.direction=="ltr"?[r?"r":"l"]:[r?"l":"r"]:a.display=="single"?e==1?a.direction=="ltr"?P.forward:P.backward:e==a.totalPages?a.direction=="ltr"?P.backward:P.forward:P.all:a.direction=="ltr"?P[r?"forward":"backward"]:P[r?"backward":"forward"]},_cornerActivated:function(n){var e=this.data().f,a=this.width(),r=this.height(),n={x:n.x,y:n.y,corner:""},s=e.opts.cornerSize;if(0>=n.x||0>=n.y||n.x>=a||n.y>=r)return!1;var l=g._cAllowed.call(this);switch(e.effect){case"hard":if(n.x>a-s)n.corner="r";else if(n.x<s)n.corner="l";else return!1;break;case"sheet":if(n.y<s)n.corner+="t";else if(n.y>=r-s)n.corner+="b";else return!1;if(n.x<=s)n.corner+="l";else if(n.x>=a-s)n.corner+="r";else return!1}return!n.corner||u.inArray(n.corner,l)==-1?!1:n},_isIArea:function(a){var e=this.data().f.parent.offset(),a=wt&&a.originalEvent?a.originalEvent.touches[0]:a;return g._cornerActivated.call(this,{x:a.pageX-e.left,y:a.pageY-e.top})},_c:function(t,e){switch(e=e||0,t){case"tl":return _(e,e);case"tr":return _(this.width()-e,e);case"bl":return _(e,this.height()-e);case"br":return _(this.width()-e,this.height()-e);case"l":return _(e,0);case"r":return _(this.width()-e,0)}},_c2:function(t){switch(t){case"tl":return _(2*this.width(),0);case"tr":return _(-this.width(),0);case"bl":return _(2*this.width(),this.height());case"br":return _(-this.width(),this.height());case"l":return _(2*this.width(),0);case"r":return _(-this.width(),0)}},_foldingPage:function(){var t=this.data().f;if(t){var e=t.opts;if(e.turn)return t=e.turn.data(),t.display=="single"?1<e.next||1<e.page?t.pageObjs[0]:null:t.pageObjs[e.next]}},_backGradient:function(){var t=this.data().f,e=t.opts.turn.data();return(e=e.opts.gradients&&(e.display=="single"||t.opts.page!=2&&t.opts.page!=e.totalPages-1))&&!t.bshadow&&(t.bshadow=u("<div/>",N(0,0,1)).css({position:"",width:this.width(),height:this.height()}).appendTo(t.parent)),e},type:function(){return this.data().f.effect},resize:function(t){var e=this.data().f,a=e.opts.turn.data(),r=this.width(),n=this.height();switch(e.effect){case"hard":t&&(e.wrapper.css({width:r,height:n}),e.fpage.css({width:r,height:n}),a.opts.gradients&&(e.ashadow.css({width:r,height:n}),e.bshadow.css({width:r,height:n})));break;case"sheet":t&&(t=Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(n,2))),e.wrapper.css({width:t,height:t}),e.fwrapper.css({width:t,height:t}).children(":first-child").css({width:r,height:n}),e.fpage.css({width:r,height:n}),a.opts.gradients&&e.ashadow.css({width:r,height:n}),g._backGradient.call(this)&&e.bshadow.css({width:r,height:n})),e.parent.is(":visible")&&(a=c(e.parent[0]),e.fwrapper.css({top:a.top,left:a.left}),a=c(e.opts.turn[0]),e.fparent.css({top:-a.top,left:-a.left})),this.flip("z",e.opts["z-index"])}},_addPageWrapper:function(){var t=this.data().f,e=t.opts.turn.data(),a=this.parent();if(t.parent=a,!t.wrapper)switch(t.effect){case"hard":var r={};r[nt+"transform-style"]="preserve-3d",r[nt+"backface-visibility"]="hidden",t.wrapper=u("<div/>",N(0,0,2)).css(r).appendTo(a).prepend(this),t.fpage=u("<div/>",N(0,0,1)).css(r).appendTo(a),e.opts.gradients&&(t.ashadow=u("<div/>",N(0,0,0)).hide().appendTo(a),t.bshadow=u("<div/>",N(0,0,0)));break;case"sheet":var r=this.width(),n=this.height();Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(n,2))),t.fparent=t.opts.turn.data().fparent,t.fparent||(r=u("<div/>",{css:{"pointer-events":"none"}}).hide(),r.data().flips=0,r.css(N(0,0,"auto","visible").css).appendTo(t.opts.turn),t.opts.turn.data().fparent=r,t.fparent=r),this.css({position:"absolute",top:0,left:0,bottom:"auto",right:"auto"}),t.wrapper=u("<div/>",N(0,0,this.css("z-index"))).appendTo(a).prepend(this),t.fwrapper=u("<div/>",N(a.offset().top,a.offset().left)).hide().appendTo(t.fparent),t.fpage=u("<div/>",N(0,0,0,"visible")).css({cursor:"default"}).appendTo(t.fwrapper),e.opts.gradients&&(t.ashadow=u("<div/>",N(0,0,1)).appendTo(t.fpage)),g.setData.call(this,t)}g.resize.call(this,!0)},_fold:function(t){var e=this.data().f,a=e.opts.turn.data(),r=g._c.call(this,t.corner),n=this.width(),s=this.height();switch(e.effect){case"hard":t.x=t.corner=="l"?Math.min(Math.max(t.x,0),2*n):Math.max(Math.min(t.x,n),-n);var l,z,v,m,k,F=a.totalPages,T=e.opts["z-index"]||F,xt={overflow:"visible"},it=r.x?(r.x-t.x)/n:t.x/n,yt=90*it,St=90>yt;switch(t.corner){case"l":m="0% 50%",k="100% 50%",St?(l=0,z=0<e.opts.next-1,v=1):(l="100%",z=e.opts.page+1<F,v=0);break;case"r":m="100% 50%",k="0% 50%",yt=-yt,n=-n,St?(l=0,z=e.opts.next+1<F,v=0):(l="-100%",z=e.opts.page!=1,v=1)}xt[nt+"perspective-origin"]=k,e.wrapper.transform("rotateY("+yt+"deg)translate3d(0px, 0px, "+(this.attr("depth")||0)+"px)",k),e.fpage.transform("translateX("+n+"px) rotateY("+(180+yt)+"deg)",m),e.parent.css(xt),St?(it=-it+1,e.wrapper.css({zIndex:T+1}),e.fpage.css({zIndex:T})):(it-=1,e.wrapper.css({zIndex:T}),e.fpage.css({zIndex:T+1})),a.opts.gradients&&(z?e.ashadow.css({display:"",left:l,backgroundColor:"rgba(0,0,0,"+.5*it+")"}).transform("rotateY(0deg)"):e.ashadow.hide(),e.bshadow.css({opacity:-it+1}),St?e.bshadow.parent()[0]!=e.wrapper[0]&&e.bshadow.appendTo(e.wrapper):e.bshadow.parent()[0]!=e.fpage[0]&&e.bshadow.appendTo(e.fpage),K(e.bshadow,_(100*v,0),_(100*(-v+1),0),[[0,"rgba(0,0,0,0.3)"],[1,"rgba(0,0,0,0)"]],2));break;case"sheet":var bt=this,_t=0,Tt,y,dt,ut,st,jt,Ft,L=_(0,0),Ot=_(0,0),I=_(0,0),Bt=g._foldingPage.call(this);Math.tan(0);var zt=a.opts.acceleration,ct=e.wrapper.height(),pt=t.corner.substr(0,1)=="t",ot=t.corner.substr(1,1)=="l",gt=function It(){var M=_(0,0),X=_(0,0);M.x=r.x?r.x-t.x:t.x,M.y=kt?r.y?r.y-t.y:t.y:0,X.x=ot?n-M.x/2:t.x+M.x/2,X.y=M.y/2;var j=Mt-Math.atan2(M.y,M.x),D=j-Math.atan2(X.y,X.x),D=Math.max(0,Math.sin(D)*Math.sqrt(Math.pow(X.x,2)+Math.pow(X.y,2)));return _t=180*(j/Pt),I=_(D*Math.sin(j),D*Math.cos(j)),j>Mt&&(I.x+=Math.abs(I.y*M.y/M.x),I.y=0,Math.round(I.x*Math.tan(Pt-j))<s)?(t.y=Math.sqrt(Math.pow(s,2)+2*X.x*M.x),pt&&(t.y=s-t.y),It()):(j>Mt&&(M=Pt-j,X=ct-s/Math.sin(M),L=_(Math.round(X*Math.cos(M)),Math.round(X*Math.sin(M))),ot&&(L.x=-L.x),pt)&&(L.y=-L.y),Tt=Math.round(I.y/Math.tan(j)+I.x),M=n-Tt,X=M*Math.cos(2*j),D=M*Math.sin(2*j),Ot=_(Math.round(ot?M-X:Tt+X),Math.round(pt?D:s-D)),a.opts.gradients&&(st=M*Math.sin(j),M=g._c2.call(bt,t.corner),M=Math.sqrt(Math.pow(M.x-t.x,2)+Math.pow(M.y-t.y,2))/n,Ft=Math.sin(Mt*(1<M?2-M:M)),jt=Math.min(M,1),ut=100<st?(st-100)/st:0,y=_(100*(st*Math.sin(j)/n),100*(st*Math.cos(j)/s)),g._backGradient.call(bt)&&(dt=_(100*(1.2*st*Math.sin(j)/n),100*(1.2*st*Math.cos(j)/s)),ot||(dt.x=100-dt.x),!pt))&&(dt.y=100-dt.y),I.x=Math.round(I.x),I.y=Math.round(I.y),!0)};switch(l=function(M,G,j,D){var Q=["0","auto"],Lt=(n-ct)*j[0]/100,At=(s-ct)*j[1]/100,G={left:Q[G[0]],top:Q[G[1]],right:Q[G[2]],bottom:Q[G[3]]},Q={},$=D!=90&&D!=-90?ot?-1:1:0,J=j[0]+"% "+j[1]+"%";bt.css(G).transform(B(D)+vt(M.x+$,M.y,zt),J),e.fpage.css(G).transform(B(D)+vt(M.x+Ot.x-L.x-n*j[0]/100,M.y+Ot.y-L.y-s*j[1]/100,zt)+B((180/D-2)*D),J),e.wrapper.transform(vt(-M.x+Lt-$,-M.y+At,zt)+B(-D),J),e.fwrapper.transform(vt(-M.x+L.x+Lt,-M.y+L.y+At,zt)+B(-D),J),a.opts.gradients&&(j[0]&&(y.x=100-y.x),j[1]&&(y.y=100-y.y),Q["box-shadow"]="0 0 20px rgba(0,0,0,"+.5*Ft+")",Bt.css(Q),K(e.ashadow,_(ot?100:0,pt?0:100),_(y.x,y.y),[[ut,"rgba(0,0,0,0)"],[.8*(1-ut)+ut,"rgba(0,0,0,"+.2*jt+")"],[1,"rgba(255,255,255,"+.2*jt+")"]],3,0),g._backGradient.call(bt)&&K(e.bshadow,_(ot?0:100,pt?0:100),_(dt.x,dt.y),[[.6,"rgba(0,0,0,0)"],[.8,"rgba(0,0,0,"+.3*jt+")"],[1,"rgba(0,0,0,0)"]],3))},t.corner){case"tl":t.x=Math.max(t.x,1),gt(),l(I,[1,0,0,1],[100,0],_t);break;case"tr":t.x=Math.min(t.x,n-1),gt(),l(_(-I.x,I.y),[0,0,0,1],[0,0],-_t);break;case"bl":t.x=Math.max(t.x,1),gt(),l(_(I.x,-I.y),[1,1,0,0],[100,100],-_t);break;case"br":t.x=Math.min(t.x,n-1),gt(),l(_(-I.x,-I.y),[0,1,1,0],[0,100],_t)}}e.point=t},_moveFoldingPage:function(t){var e=this.data().f;if(e){var a=e.opts.turn,r=a.data(),n=r.pagePlace;t?(r=e.opts.next,n[r]!=e.opts.page&&(e.folding&&g._moveFoldingPage.call(this,!1),g._foldingPage.call(this).appendTo(e.fpage),n[r]=e.opts.page,e.folding=r),a.turn("update")):e.folding&&(r.pages[e.folding]?(a=r.pages[e.folding].data().f,r.pageObjs[e.folding].appendTo(a.wrapper)):r.pageWrap[e.folding]&&r.pageObjs[e.folding].appendTo(r.pageWrap[e.folding]),e.folding in n&&(n[e.folding]=e.folding),delete e.folding)}},_showFoldedPage:function(t,e){var a=g._foldingPage.call(this),r=this.data(),n=r.f,s=n.visible;if(a){if((!s||!n.point||n.point.corner!=t.corner)&&(a=n.status=="hover"||n.status=="peel"||n.opts.turn.data().mouseAction?t.corner:null,s=!1,x("start",this,[n.opts,a])=="prevented"))return!1;if(e){var l=this,r=n.point&&n.point.corner==t.corner?n.point:g._c.call(this,t.corner,1);this.animatef({from:[r.x,r.y],to:[t.x,t.y],duration:500,frame:function(m){t.x=Math.round(m[0]),t.y=Math.round(m[1]),g._fold.call(l,t)}})}else g._fold.call(this,t),r.effect&&!r.effect.turning&&this.animatef(!1);if(!s)switch(n.effect){case"hard":n.visible=!0,g._moveFoldingPage.call(this,!0),n.fpage.show(),n.opts.shadows&&n.bshadow.show();break;case"sheet":n.visible=!0,n.fparent.show().data().flips++,g._moveFoldingPage.call(this,!0),n.fwrapper.show(),n.bshadow&&n.bshadow.show()}return!0}return!1},hide:function(){var t=this.data().f,e=t.opts.turn.data(),a=g._foldingPage.call(this);switch(t.effect){case"hard":e.opts.gradients&&(t.bshadowLoc=0,t.bshadow.remove(),t.ashadow.hide()),t.wrapper.transform(""),t.fpage.hide();break;case"sheet":--t.fparent.data().flips===0&&t.fparent.hide(),this.css({left:0,top:0,right:"auto",bottom:"auto"}).transform(""),t.wrapper.transform(""),t.fwrapper.hide(),t.bshadow&&t.bshadow.hide(),a.transform("")}return t.visible=!1,this},hideFoldedPage:function(t){var e=this.data().f;if(e.point){var a=this,r=e.point,n=function(){e.point=null,e.status="",a.flip("hide"),a.trigger("end",[e.opts,!1])};if(t){var s=g._c.call(this,r.corner),t=r.corner.substr(0,1)=="t"?Math.min(0,r.y-s.y)/2:Math.max(0,r.y-s.y)/2,l=_(r.x,r.y+t),z=_(s.x,s.y-t);this.animatef({from:0,to:1,frame:function(k){k=Nt(r,l,z,s,k),r.x=k.x,r.y=k.y,g._fold.call(a,r)},complete:n,duration:800,hiding:!0})}else this.animatef(!1),n()}},turnPage:function(n){var e=this,a=this.data().f,r=a.opts.turn.data(),n={corner:a.corner?a.corner.corner:n||g._cAllowed.call(this)[0]},s=a.point||g._c.call(this,n.corner,a.opts.turn?r.opts.elevation:0),l=g._c2.call(this,n.corner);this.trigger("flip").animatef({from:0,to:1,frame:function(v){v=Nt(s,s,l,l,v),n.x=v.x,n.y=v.y,g._showFoldedPage.call(e,n)},complete:function(){e.trigger("end",[a.opts,!0])},duration:r.opts.duration,turning:!0}),a.corner=null},moving:function(){return"effect"in this.data()},isTurning:function(){return this.flip("moving")&&this.data().effect.turning},corner:function(){return this.data().f.corner},_eventStart:function(t){var e=this.data().f,a=e.opts.turn;if(!e.corner&&!e.disabled&&!this.flip("isTurning")&&e.opts.page==a.data().pagePlace[e.opts.page]){if(e.corner=g._isIArea.call(this,t),e.corner&&g._foldingPage.call(this))return this.trigger("pressed",[e.point]),g._showFoldedPage.call(this,e.corner),!1;e.corner=null}},_eventMove:function(t){var e=this.data().f;if(!e.disabled)if(t=wt?t.originalEvent.touches:[t],e.corner){var a=e.parent.offset();e.corner.x=t[0].pageX-a.left,e.corner.y=t[0].pageY-a.top,g._showFoldedPage.call(this,e.corner)}else e.hover&&!this.data().effect&&this.is(":visible")&&((t=g._isIArea.call(this,t[0]))?(e.effect=="sheet"&&t.corner.length==2||e.effect=="hard")&&(e.status="hover",e=g._c.call(this,t.corner,e.opts.cornerSize/2),t.x=e.x,t.y=e.y,g._showFoldedPage.call(this,t,!0)):e.status=="hover"&&(e.status="",g.hideFoldedPage.call(this,!0)))},_eventEnd:function(){var t=this.data().f,e=t.corner;!t.disabled&&e&&x("released",this,[t.point||e])!="prevented"&&g.hideFoldedPage.call(this,!0),t.corner=null},disable:function(t){return g.setData.call(this,{disabled:t}),this},hover:function(t){return g.setData.call(this,{hover:t}),this},peel:function(t,e){var a=this.data().f;if(t){if(u.inArray(t,P.all)==-1)throw rt("Corner "+t+" is not permitted");if(u.inArray(t,g._cAllowed.call(this))!=-1){var r=g._c.call(this,t,a.opts.cornerSize/2);a.status="peel",g._showFoldedPage.call(this,{corner:t,x:r.x,y:r.y},e)}}else a.status="",g.hideFoldedPage.call(this,e);return this}};window.requestAnim=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)},u.extend(u.fn,{flip:function(){return Rt(u(this[0]),g,arguments)},turn:function(){return Rt(u(this[0]),h,arguments)},transform:function(t,e){var a={};return e&&(a[nt+"transform-origin"]=e),a[nt+"transform"]=t,this.css(a)},animatef:function(t){var e=this.data();if(e.effect&&e.effect.stop(),t){t.to.length||(t.to=[t.to]),t.from.length||(t.from=[t.from]);for(var a=[],r=t.to.length,n=!0,s=this,l=new Date().getTime(),z=function m(){if(e.effect&&n){for(var k=[],F=Math.min(t.duration,new Date().getTime()-l),T=0;T<r;T++)k.push(e.effect.easing(1,F,t.from[T],a[T],t.duration));t.frame(r==1?k[0]:k),F==t.duration?(delete e.effect,s.data(e),t.complete&&t.complete()):window.requestAnim(m)}},v=0;v<r;v++)a.push(t.to[v]-t.from[v]);e.effect=u.extend({stop:function(){n=!1},easing:function(k,F,T,xt,it){return xt*Math.sqrt(1-(F=F/it-1)*F)+T}},t),this.data(e),z()}else delete e.effect}}),u.isTouch=wt,u.mouseEvents=ht,u.cssPrefix=mt,u.cssTransitionEnd=function(){var i,t=document.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MSTransition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(i in e)if(t.style[i]!==void 0)return e[i]},u.findPos=c})(b)},72701:function(ae,$t,R){"use strict";R.r($t),R.d($t,{default:function(){return ht}});var b=R(67294),Dt=R(38416),u=R.n(Dt),Rt=R(42122),N=R.n(Rt),Nt=R(861),_=R.n(Nt),vt=R(27424),B=R.n(vt);function U(P){var f=`<?xml version="1.0" encoding="UTF-8"?>
  <svg xmlns="http://www.w3.org/2000/svg" width="1440" height="2048">
    <defs>
      <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#1b1e24"/>
        <stop offset="100%" stop-color="#2b2f37"/>
      </linearGradient>
    </defs>
    <rect width="100%" height="100%" fill="url(#g)"/>
    <text x="50%" y="45%" dominant-baseline="middle" text-anchor="middle" font-size="220" fill="#ffffff" font-family="Inter, PingFang SC, Arial">`.concat(P,`</text>
    <text x="50%" y="60%" dominant-baseline="middle" text-anchor="middle" font-size="48" fill="#9aa0a6" font-family="Inter, PingFang SC, Arial">\u793A\u4F8B\u9875\u9762</text>
  </svg>`);return"data:image/svg+xml;utf8,".concat(encodeURIComponent(f))}var mt=Array.from({length:140}).map(function(P,f){return{id:f+1,title:"\u7B2C".concat(f+1,"\u9875"),src:"https://malloss.gree.com/gree-mall-v3/pdf/PDF%E5%9B%BE%E7%89%87%E6%8F%90%E5%8F%96-1764928790004/".concat(f+1,".webp")}}),K=R(13692),x={viewer:"viewer___Bx6Iz",gradient:"gradient___T8SrD",topBar:"topBar___VEUlJ",iconBtn:"iconBtn___SnTSK",hidden:"hidden___VTsCy",topBarLeft:"topBarLeft___iNkML",topBarRight:"topBarRight___VPeRh",topBarCenter:"topBarCenter___ucIah",stageWrap:"stageWrap___omAdB",stage:"stage___kchgc",flipbook:"flipbook____aVPw",page:"page___Kdllo",hard:"hard___hKec2",controls:"controls___Kuo3w",controlsLeft:"controlsLeft___RRUim",controlsCenter:"controlsCenter___jIx4h",controlsRight:"controlsRight___JwPpr",pageDisplay:"pageDisplay___w2div",pageInput:"pageInput___RwddY",zoomDisplay:"zoomDisplay___gDE7O",zoomWrap:"zoomWrap___ZULuY",progressOverlay:"progressOverlay___Wa8zs",loader:"loader___W5Yn3",bar:"bar___Zl0tF",barInner:"barInner___A2ZfV",loaderText:"loaderText___wGuJM",rightEdge:"rightEdge___Q6aMp",leftEdge:"leftEdge___efBja",pageLoader:"pageLoader___Rnljh",retryBtn:"retryBtn___OvmNj",loaderSpinner:"loaderSpinner___BmXCN",spin:"spin___Qqo26"},rt=R(72655),c=R(85893),Z=R(19755),kt=b.createContext([]);function nt(P,f){var tt=(0,b.useState)({width:0,height:0,display:"double"}),et=B()(tt,2),E=et[0],h=et[1];return(0,b.useEffect)(function(){var g=function(){if(P){var t=window.innerWidth<=640||window.innerHeight<=500&&window.innerWidth>window.innerHeight,e=t?20:140,a=t?0:80,r=window.innerWidth-a,n=window.innerHeight-e,s=n>r,l=P.width>P.height,z=f||(s||l?"single":"double"),v=P.width/P.height,m=z==="double"?v*2:v,k=r/n,F=n,T=n*m;k<m&&(T=r,F=r/m),h({width:T,height:F,display:z})}};return g(),window.addEventListener("resize",g),function(){return window.removeEventListener("resize",g)}},[P,f]),E}var Pt=b.memo(function(P){var f=P.flipbookRef,tt=P.layout,et=P.pageNodes,E=P.flipbookDomVersion;return(0,c.jsx)("div",{ref:f,className:"".concat(x.flipbook," ").concat(tt.display==="double"?"double":"single"),children:et},E)},function(P,f){return P.layout.display===f.layout.display&&P.layout.width===f.layout.width&&P.layout.height===f.layout.height&&P.flipbookDomVersion===f.flipbookDomVersion}),Mt=b.memo(function(P){var f,tt=P.page,et=P.retryLoadPage,E=P.index,h=P.isHard,g=b.useContext(kt),i=((f=g[E])===null||f===void 0?void 0:f.status)||"unloaded",t;return i==="loaded"?t=(0,c.jsx)("img",{src:tt.src,alt:tt.title,draggable:!1}):i==="error"?t=(0,c.jsxs)("div",{className:x.pageLoader,children:[(0,c.jsx)("div",{className:x.loaderText,children:"\u52A0\u8F7D\u5931\u8D25"}),(0,c.jsx)("button",{className:x.retryBtn,onClick:function(){return et(E)},children:"\u91CD\u8BD5"})]}):t=(0,c.jsx)("div",{className:x.pageLoader,children:(0,c.jsx)("div",{className:x.loaderSpinner})}),(0,c.jsxs)("div",{className:"".concat(x.page," ").concat(h?x.hard:""," whh"),children:[t,(0,c.jsx)("div",{className:x.gradient})]},tt.id)},function(P,f){return P.page.id===f.page.id&&P.isHard===f.isHard});function wt(){var P=(0,b.useRef)(null),f=(0,b.useRef)(null),tt=(0,b.useState)(1),et=B()(tt,2),E=et[0],h=et[1],g=(0,b.useState)(1),i=B()(g,2),t=i[0],e=i[1],a=(0,b.useState)([]),r=B()(a,2),n=r[0],s=r[1],l=n.length>0&&n.slice(0,2).every(function(d){return d.status==="loaded"||d.status==="error"}),z=(0,b.useState)(!0),v=B()(z,2),m=v[0],k=v[1],F=(0,b.useRef)(null),T=(0,b.useState)(),xt=B()(T,2),it=xt[0],yt=xt[1],St=(0,b.useState)(),bt=B()(St,2),_t=bt[0],Tt=bt[1],y=nt(it,_t),dt=E>1,ut=(0,b.useRef)(),st=function(){var o=y.display==="single"?"double":"single";Tt(o)},jt=(0,b.useState)({left:0,right:10}),Ft=B()(jt,2),L=Ft[0],Ot=Ft[1],I=(0,b.useState)(!1),Bt=B()(I,2),zt=Bt[0],ct=Bt[1],pt=(0,b.useState)(""),ot=B()(pt,2),gt=ot[0],It=ot[1],M=(0,b.useState)({x:0,y:0}),X=B()(M,2),j=X[0],D=X[1],Lt=(0,b.useState)(0),At=B()(Lt,2),G=At[0],Q=At[1],$=(0,b.useRef)({isPanning:!1,startX:0,startY:0,startPanX:0,startPanY:0}),J=(0,b.useRef)(1),O=(0,b.useRef)({tracking:!1,direction:null,startX:0,startY:0});(0,b.useEffect)(function(){E<=1&&D({x:0,y:0})},[E]);var w=mt.length,Kt=(0,b.useRef)(n);Kt.current=n;var Ct=(0,b.useCallback)(function(d,o){for(var p=Kt.current,C=Math.min(d+o,p.length),S=[],Y=d;Y<C;Y++){var A=p[Y];A&&(A.status==="unloaded"||A.status==="error")&&S.push({index:Y,src:A.page.src})}S.length!==0&&(s(function(H){var W=_()(H);return S.forEach(function(q){W[q.index]&&(W[q.index]=N()(N()({},W[q.index]),{},{status:"loading"}))}),W}),S.forEach(function(H){var W=H.index,q=H.src,V=new Image;V.onload=function(){s(function(lt){var at=_()(lt);return at[W]&&(at[W]=N()(N()({},at[W]),{},{status:"loaded"})),at})},V.onerror=function(){console.error("Failed to load page image",{pageIndex:W,src:q}),s(function(lt){var at=_()(lt);return at[W]&&(at[W]=N()(N()({},at[W]),{},{status:"error"})),at})},V.src=q}))},[]),Ut=(0,b.useCallback)(function(d){Ct(d,1)},[Ct]);(0,b.useEffect)(function(){if(y.display==="double"){var d=10,o=Math.max(1,t),p=Math.max(0,d*(1-o/w)),C=d-p;Ot({left:C,right:p})}},[t,w,y.display]);var Jt=function(){k(!0),F.current&&clearTimeout(F.current),F.current=setTimeout(function(){k(!1)},3e3)};(0,b.useEffect)(function(){return window.addEventListener("mousemove",Jt),function(){window.removeEventListener("mousemove",Jt),F.current&&clearTimeout(F.current)}},[]);var Yt=function(o){var p=Z(f.current);p&&p.turn&&p.turn("page",o)},re=function(){It(String(t)),ct(!0)},ne=function(o){if(o.key==="Enter"){var p=parseInt(gt,10);!isNaN(p)&&p>=1&&p<=w&&Yt(p),ct(!1)}o.key==="Escape"&&ct(!1)},ie=function(){var o=parseInt(gt,10);!isNaN(o)&&o>=1&&o<=w&&Yt(o),ct(!1)},se=function(){return Yt(1)},Zt=function(){var o=Z(f.current);o&&o.turn&&o.turn("previous")},Ht=function(){var o=Z(f.current);o&&o.turn&&o.turn("next")},oe=function(){return Yt(w)},Gt=function(o){if(!(E<=1)){o.stopPropagation(),$.current.isPanning=!0;var p="touches"in o.nativeEvent?o.nativeEvent.touches[0]:o.nativeEvent;$.current.startX=p.clientX,$.current.startY=p.clientY,$.current.startPanX=j.x,$.current.startPanY=j.y,o.currentTarget.style.cursor="grabbing"}},Qt=function(o){if(console.log("handlePanMove"),!(!$.current.isPanning||E<=1)){o.preventDefault(),o.stopPropagation();var p="touches"in o.nativeEvent?o.nativeEvent.touches[0]:o.nativeEvent,C=p.clientX-$.current.startX,S=p.clientY-$.current.startY;D({x:$.current.startPanX+C,y:$.current.startPanY+S})}},qt=function(o){$.current.isPanning&&(o.stopPropagation(),$.current.isPanning=!1,o.currentTarget.style.cursor="grab")},Vt=function(){O.current.tracking=!1,O.current.direction=null},te=function(o){if(!f.current)return!1;var p=f.current.getBoundingClientRect(),C=Math.min(p.height*.15,150);return o<p.top+C||o>p.bottom-C},le=function(o){if(o.button===0){if(E>1){Gt(o);return}te(o.clientY)||(o.stopPropagation(),O.current.tracking=!0,O.current.direction=null,O.current.startX=o.clientX,O.current.startY=o.clientY)}},de=function(o){if(E>1){Qt(o);return}if(O.current.tracking){var p=o.clientX-O.current.startX,C=o.clientY-O.current.startY,S=Math.abs(p)>Math.abs(C)*1.5;S&&Math.abs(p)>30&&(O.current.direction=p>0?"right":"left",o.preventDefault(),o.stopPropagation())}},ue=function(o){if(E>1){qt(o);return}if(O.current.tracking){var p=O.current.direction;Vt(),p&&(p==="left"?Ht():Zt())}},he=function(o){if(E>1){qt(o);return}Vt()},ce=function(o){if(E>1){Gt(o);return}if(o.touches.length!==1){Vt();return}var p=o.touches[0];te(p.clientY)||(O.current.tracking=!0,O.current.direction=null,O.current.startX=p.clientX,O.current.startY=p.clientY)},pe=function(o){if(E>1){Qt(o);return}if(!(!O.current.tracking||o.touches.length!==1)){var p=o.touches[0],C=p.clientX-O.current.startX,S=p.clientY-O.current.startY,Y=Math.abs(C)>Math.abs(S)*1.5;Y&&Math.abs(C)>30&&(O.current.direction=C>0?"right":"left",o.preventDefault())}},ee=function(o){if(E>1){qt(o);return}if(O.current.tracking){var p=O.current.direction;Vt(),p&&(p==="left"?Ht():Zt())}};(0,b.useEffect)(function(){if(!(!l||!f.current||!y.width||!y.height||!w||w===0)){var d=Z(f.current),o=J.current;if(d.turn("is")){var p=d.turn("page");o=Math.max(1,Math.min(p||J.current,w))}else o=Math.max(1,Math.min(J.current,w));J.current=o;var C=Math.max(1,o-2),S=Math.min(w,o+2),Y=C-1,A=S-Y;A>0&&setTimeout(function(){return Ct(Y,A)},0);var H,W,q,V=0,lt=100,at=function ft(){if(!w||w===0){V<lt?(V++,H=requestAnimationFrame(ft)):console.error("Cannot initialize: total is 0 or invalid");return}if(n.length!==w){V<lt?(V++,V%10===0&&console.log("Waiting for pagesWithStatus... (retry ".concat(V,"/").concat(lt,", state: ").concat(n.length,"/").concat(w,")")),H=requestAnimationFrame(ft)):console.error("Cannot initialize: pagesWithStatus not ready",{pagesWithStatusLength:n.length,total:w});return}if(!f.current){V<lt?(V++,H=requestAnimationFrame(ft)):console.error("Cannot initialize: flipbookRef.current is null");return}var we=Z(f.current),Et=we.children();if(Et.length!==w&&V<lt){V++,V%10===0&&console.log("Waiting for page elements in DOM... (retry ".concat(V,"/").concat(lt,", found ").concat(Et.length,"/").concat(w,")")),H=requestAnimationFrame(ft);return}if(Et.length===0){console.error("No page elements found when initializing turn.js",{retryCount:V,total:w,pagesWithStatusLength:n.length,flipbookRefExists:!!f.current,pageElementsLength:Et.length,flipbookHTML:f.current.innerHTML.substring(0,200)}),Q(function(Xt){return Xt+1});return}Et.length!==w&&console.warn("Page count mismatch: expected ".concat(w,", found ").concat(Et.length,". Continuing anyway.")),W=requestAnimationFrame(function(){requestAnimationFrame(function(){q=setTimeout(function(){if(!(!f.current||!w||w===0)){var Xt=Z(f.current),Wt=Xt.children();if(Wt.length===0){console.error("Page elements disappeared before turn.js initialization",{total:w,pagesWithStatusLength:n.length});return}Wt.length!==w&&console.warn("Expected ".concat(w," pages but found ").concat(Wt.length,". Initializing anyway."));try{Xt.turn({width:y.width,height:y.height,autoCenter:!0,duration:800,gradients:!0,elevation:60,acceleration:!0,display:y.display,page:o,pages:w}),J.current=o,e(o),console.log("turn.js initialized successfully with ".concat(Wt.length," pages"))}catch(xe){console.error("Error initializing turn.js:",xe,{total:w,pageElementsLength:Wt.length,pagesWithStatusLength:n.length,layout:y})}}},150)})})};return H=requestAnimationFrame(function(){requestAnimationFrame(function(){requestAnimationFrame(at)})}),function(){H&&cancelAnimationFrame(H),W&&cancelAnimationFrame(W),q&&clearTimeout(q);var ft=Z(f.current);ft&&ft.turn("is")&&ft.turn("destroy")}}},[l,w,Ct,G]),(0,b.useEffect)(function(){if(!(!l||!f.current)){var d=null,o=null,p=function C(){if(f.current){var S=Z(f.current);if(!S.turn||!S.turn("is")){d=requestAnimationFrame(C);return}var Y=function(W,q){J.current=q,e(q)},A=function(){if(S.turn("is")){var W=S.turn("page"),q=S.turn("display")==="double";S.removeClass("shadow first-page-shadow last-page-shadow"),q?W===1?S.addClass("first-page-shadow"):W===w?S.addClass("last-page-shadow"):S.addClass("shadow"):S.addClass("shadow")}};S.on("turning",Y),S.on("turned",A),A(),o=function(){S.off("turning",Y),S.off("turned",A)}}};return p(),function(){d&&cancelAnimationFrame(d),o&&o()}}},[l,w,y.display,G]),(0,b.useEffect)(function(){if(f.current){var d=Z(f.current);d.turn("is")&&d.turn("size",y.width,y.height)}},[y.width,y.height]),(0,b.useEffect)(function(){if(!(!l||!f.current)){var d=Z(f.current);if(d.turn&&d.turn("is"))try{d.turn("display",y.display);var o=Math.max(1,Math.min(J.current,w));d.turn("page",o)}catch(p){console.error("Failed to adjust display mode. Reinitializing...",p),Q(function(C){return C+1})}else l&&Q(function(p){return p+1})}},[y.display,l,w]),(0,b.useEffect)(function(){if(!l){ut.current=y.display;return}ut.current&&ut.current!==y.display&&Q(function(d){return d+1}),ut.current=y.display},[y.display,l]),(0,b.useLayoutEffect)(function(){if(l&&y.display==="single"&&f.current){var d=null,o=function(){if(f.current){var S=Z(f.current);if(!(!S.turn||!S.turn("is"))){var Y=S.data().turn;if(Y){var A=f.current.querySelector(".page.p-temporal"),H=!A;H&&(A=document.createElement("div"),A.className="page p-temporal",f.current.insertBefore(A,f.current.firstChild),Y.pageObjs[0]=Z(A)),A&&(A.style.width="".concat(y.width,"px"),A.style.height="".concat(y.height,"px"))}}}},p=function C(){if(f.current){var S=Z(f.current);if(!S.turn||!S.turn("is")){d=requestAnimationFrame(C);return}o()}};return p(),function(){d&&cancelAnimationFrame(d)}}},[l,y.display,y.width,y.height,G]),(0,b.useEffect)(function(){if(mt.length>0){var d=mt[0],o=new Image;o.onload=function(){yt({width:o.naturalWidth,height:o.naturalHeight})},o.src=d.src,s(mt.map(function(p){return{page:p,status:"unloaded"}})),J.current=1}},[]),(0,b.useEffect)(function(){if(w&&n.length===w){var d=Math.max(1,t-2),o=Math.min(w,t+2),p=d-1,C=o-p;if(C>0){var S=n.slice(p,p+C).some(function(Y){return Y.status==="unloaded"||Y.status==="error"});S&&Ct(p,C)}}},[t,w,Ct,n]);var ge=(0,b.useMemo)(function(){return n.map(function(d,o){return(0,c.jsx)(Mt,{page:d.page,retryLoadPage:Ut,index:o,isHard:o===0||o===w-1},d.page.id)})},[n,w,Ut]),fe=(0,b.useMemo)(function(){var d={width:L.left,display:y.display==="double"&&t>2?"block":"none"};return t===w?d.left=y.width/4-L.left:d.left=-L.left,d},[t,w,y,L.left]),ve=(0,b.useMemo)(function(){var d={width:L.right,display:y.display==="double"&&t<w&&t>1?"block":"none"};return t===1?d.right=y.width/4-L.right:d.right=-L.right,d},[t,w,y,L.right]),me=(0,b.useMemo)(function(){if(y.display==="double"){if(t===1)return"1";if(t===w)return"".concat(w);var d=t%2===0?t:t-1,o=d+1;return"".concat(d,"-").concat(o)}return String(t)},[t,w,y.display]);return(0,c.jsxs)("div",{className:"".concat(x.viewer," ").concat(m?"":x.controlsHidden),children:[(0,c.jsxs)("div",{className:"".concat(x.topBar," ").concat(m?"":x.hidden),"data-zoomed":dt,children:[(0,c.jsxs)("div",{className:x.topBarLeft,children:[(0,c.jsx)("button",{className:x.iconBtn,onClick:Zt,"aria-label":"\u4E0A\u4E00\u9875",children:(0,c.jsx)(K.YFh,{})}),(0,c.jsx)("button",{className:x.iconBtn,onClick:Ht,"aria-label":"\u4E0B\u4E00\u9875",children:(0,c.jsx)(K.Tfp,{})})]}),(0,c.jsxs)("div",{className:x.topBarCenter,children:[(0,c.jsx)("button",{className:x.iconBtn,onClick:function(){return h(Math.max(.5,E-.1))},children:(0,c.jsx)(K.gjP,{})}),(0,c.jsxs)("div",{className:x.zoomDisplay,children:[Math.round(E*100),"%"]}),(0,c.jsx)("button",{className:x.iconBtn,onClick:function(){return h(Math.min(3,E+.1))},children:(0,c.jsx)(K.SJS,{})}),(0,c.jsx)("button",{className:x.iconBtn,onClick:function(){return h(1)},children:(0,c.jsx)(K.ABE,{})}),(0,c.jsx)("button",{className:x.iconBtn,onClick:st,children:(0,c.jsx)(K.hbr,{})})]}),(0,c.jsx)("div",{className:x.topBarRight})]}),(0,c.jsx)("div",{className:x.stageWrap,onMouseDownCapture:le,onMouseMoveCapture:de,onMouseUpCapture:ue,onMouseLeave:he,onTouchStart:ce,onTouchMove:pe,onTouchEnd:ee,onTouchCancel:ee,style:{cursor:E>1?"grab":"default"},children:(0,c.jsx)("div",{ref:P,className:x.stage,style:u()({width:y.width,height:y.height},"--zoom",E),children:(0,c.jsxs)("div",{style:{transform:"translate(".concat(j.x,"px, ").concat(j.y,"px)")},children:[!l&&(0,c.jsx)("div",{className:x.progressOverlay,children:(0,c.jsx)("div",{className:x.loader,children:(0,c.jsx)("div",{className:x.loaderText,children:"\u52A0\u8F7D\u4E2D..."})})}),(0,c.jsx)("div",{className:x.leftEdge,style:fe}),(0,c.jsx)(kt.Provider,{value:n,children:(0,c.jsx)(Pt,{flipbookRef:f,layout:y,pageNodes:ge,flipbookDomVersion:G})}),(0,c.jsx)("div",{className:x.rightEdge,style:ve})]})})}),(0,c.jsxs)("div",{className:"".concat(x.controls," ").concat(m?"":x.hidden),children:[(0,c.jsx)("div",{}),(0,c.jsxs)("div",{className:x.controlsCenter,children:[(0,c.jsx)("button",{className:x.iconBtn,onClick:se,children:(0,c.jsx)(K.JHF,{})}),(0,c.jsx)("button",{className:x.iconBtn,onClick:Zt,children:(0,c.jsx)(K.YFh,{})}),(0,c.jsx)("div",{className:x.pageDisplay,children:zt?(0,c.jsx)("input",{type:"text",className:x.pageInput,value:gt,onChange:function(o){return It(o.target.value)},onKeyDown:ne,onBlur:ie,autoFocus:!0}):(0,c.jsxs)("span",{onClick:re,children:[me," / ",w]})}),(0,c.jsx)("button",{className:x.iconBtn,onClick:Ht,children:(0,c.jsx)(K.Tfp,{})}),(0,c.jsx)("button",{className:x.iconBtn,onClick:oe,children:(0,c.jsx)(K.qhs,{})})]}),(0,c.jsx)("div",{})]})]})}function ht(){return(0,c.jsx)("div",{className:"app-root",children:(0,c.jsx)(wt,{})})}}}]);
